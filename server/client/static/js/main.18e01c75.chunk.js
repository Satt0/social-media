(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{105:function(e,t,n){e.exports={pageWrapper:"UserPage_pageWrapper__3X4YX",showup:"UserPage_showup__2HiG8",CheckInWrapper:"UserPage_CheckInWrapper__2Mrh8",NewsFeedWrapper:"UserPage_NewsFeedWrapper__1olmX"}},150:function(e,t,n){e.exports={container:"HomePage_container__2EfJt",showup:"HomePage_showup__3gL5c"}},196:function(e,t,n){},208:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n(0),c=n.n(r),s=n(19),o=n.n(s),i=n(7),u=n(60),d=n.n(u),l=n.p+"static/media/avatar.6537f30a.jpg",b=n(28);function j(e){var t=e.path;return b.a.img+t}var p=n(1);function f(e){var t,n,a,r=e.userAvatar,c=e.size,s=void 0===c?"small":c,o=e.round,i=void 0===o||o,u=e.blank,j=void 0!==u&&u;switch(s){case"small":n=d.a.small;break;case"medium":n=d.a.medium;break;case"large":n=d.a.large;break;default:n=d.a.small}return j?Object(p.jsx)("div",{style:{borderRadius:i?"":"0",backgroundImage:null},className:"".concat(d.a.avatar," ").concat(n)}):Object(p.jsx)("div",{style:{borderRadius:i?"":"0",backgroundImage:'url("'.concat(null!==(a=r,t=(null===a||void 0===a?void 0:a.indexOf("public/"))>=0?b.a.img+a:a)&&void 0!==t?t:l,'")')},className:"".concat(d.a.avatar," ").concat(n)})}var m=n(48),v=n.n(m),O=n(33),h=n.p+"static/media/logo.2163973a.svg",g=n(10),x={default:{text:"black",backgroud:"white",backgroudPost:"white",backgroundImage:null},rosie:{text:"var(--text-rosie)",background:"var(--background-rosie)",backgroundPost:"var(--background-post-rosie)",backgroundImage:n.p+"static/media/rose.57fba1c8.jpg"},jennie:{text:"var(--text-jennie)",background:"var(--background-jennie)",backgroundPost:"var(--background-post-jennie)",backgroundImage:n.p+"static/media/jennie.faf3ee6f.jpg"}};function _(){var e=Object(g.c)((function(e){return e.settings.theme}));return x[e]}var y,C,k,w,I,N,S,E,P,M,T,A=n(14),B=n(250),U=n(254),R=n(261),F=n(266),L=n(253),D=n(265),G=n(144),q=n.n(G),W=n(252),V=n(255),H=n(41),$=n(63),z={GET_USER_INFORMATION:Object($.a)(y||(y=Object(H.a)(["\n    query getUserInformation($id: Int!) {\n      getUserInformation(userid: $id) {\n        userid\n        userfullname\n        userdisplayname\n        picture\n      }\n    }\n  "]))),GET_LATEST_POST:Object($.a)(C||(C=Object(H.a)(["\n    query{\n\tgetLatestPost{\n    postid\n    userid\n    content\n      datecreated\n      media\n      likecount\n      commentcount\n      embeded\n      \n    user {\n      picture\n      userid\n      userfullname\n      \n    }}\n  \n}\n  "]))),GET_USER_LATEST_POST:Object($.a)(k||(k=Object(H.a)(["\n   query  getLatestPostByUserID($userid:Int!){\n  getLatestPostByUserID(userid:$userid){\n    postid\n    userid\n    content\n      datecreated\n      media\n      likecount\n      commentcount\n      embeded\n    \n  user {\n    picture\n    userid\n    userfullname\n  }}\n  \n  }\n  "]))),GET_POST_LATEST_COMMENT:Object($.a)(w||(w=Object(H.a)(["\n  query getPostCommentById($postid:Int!){\n  getPostCommentById(postid:$postid){\n    commentid\n  postid\n  userid\n  content\n  datecreated\n  user {\n    picture\n    userfullname\n    userid\n  }}\n  }\n  "]))),POST_COMMENT:Object($.a)(I||(I=Object(H.a)(["\n  mutation createComment($userid:Int!,$content:String!,$postid:Int!){\n    createComment(input:{userid:$userid,content:$content,postid:$postid}){\n      content\n      commentid\n      datecreated\n      userid\n      postid\n      user{\n        picture\n        userfullname\n        userid\n      }\n      }\n  }"]))),UPDATE_COMMENT:Object($.a)(N||(N=Object(H.a)(["\n subscription getComment($postid:Int!){\ngetComment(postid:$postid){\n  commentid\n  userid\n  content\n  datecreated\n  \n  user{\n    userid\n    userfullname\n    userdisplayname\n    picture\n  }\n}\n}"]))),LISTEN_MESSAGE:Object($.a)(S||(S=Object(H.a)(["\nsubscription waitAllMessage($userid:Int!){\n   \n  \nwaitAllMessage(userid:$userid){\n  messageid\n  content\n  userid\n  receiver\n  datecreated\n  conversationid\n}\n}"]))),GET_ALL_CONVERSATION:Object($.a)(E||(E=Object(H.a)(["\n   query getAllConversation($userid:Int!) {\ngetAllConversation(userid:$userid){\nconversationid\nuserid1\nuserid2\nlastactivedate\nlastmessage{\n  content\n  receiver\n}}\n}\n"]))),SEND_MESSAGE:Object($.a)(P||(P=Object(H.a)(["\nmutation sendMessage($userid:Int!,$conversationid:Int!,$receiver:Int!,$content:String!){\n  sendMessage(input:{userid:$userid,conversationid:$conversationid,receiver:$receiver,content:$content}){\n    content\n    messageid\n    datecreated\n    userid\n    conversationid\n    receiver\n  }\n}\n"]))),INIT_MESSAGE:Object($.a)(M||(M=Object(H.a)(["\n  mutation initConversation($userid1:Int!,$userid2:Int!){\n      initConversation(input:{userid1:$userid1,userid2:$userid2}){\n              conversationid\n              userid1\n              userid2\n  \n}\n\n}"]))),GET_CONVERSATION_MESSAGE:Object($.a)(T||(T=Object(H.a)(["\nquery getAllMessage($id:Int!){\ngetAllMessage(conversationid:$id){\nmessageid\nuserid\nconversationid\ncontent\nreceiver\n  \n}\n}\n\n"])))},J=Object(B.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper}}}));function Q(e){var t=e.conversation,n=e.thisUser,r=Object(W.a)(z.GET_USER_INFORMATION),s=Object(a.a)(r,2),o=s[0],u=s[1],d=c.a.useState({}),l=Object(a.a)(d,2),b=l[0],j=l[1],m=Object(g.b)();c.a.useEffect((function(){if(t.conversationid){var e=t.userid1,a=t.userid2;o({variables:{id:parseInt(e===n?a:e)}})}}),[t.conversationid,t.userid1,t.userid2,n]);return c.a.useEffect((function(){(null===u||void 0===u?void 0:u.data)&&j(u.data.getUserInformation)}),[u]),Object(p.jsx)("div",{className:v.a.wrapper,children:Object(p.jsxs)(R.a,{onClick:function(){m({type:"addConversation",payload:Object(i.a)(Object(i.a)({},t),{},{state:"open",force:!0})})},children:[Object(p.jsx)(L.a,{children:Object(p.jsx)(D.a,{children:Object(p.jsx)(f,{userAvatar:b.picture})})}),Object(p.jsx)(F.a,{primary:b.userfullname,secondary:t.lastmessage})]})})}function X(e){var t=e.data,n=e.onClose,a=J(),r=Object(g.c)((function(e){return parseInt(e.user.uid)}));return Object(p.jsx)("div",{onClick:n,children:Object(p.jsx)(U.a,{className:a.root,children:t.map((function(e){return Object(p.jsx)(Q,{thisUser:r,conversation:e},"history-dropdown-"+e.conversationid)}))})})}var K=function(e){var t=e.userid,n=Object(g.c)((function(e){return e.Message.Conversation})),r=Object(V.a)(z.GET_ALL_CONVERSATION,{variables:{userid:parseInt(t)}}),s=c.a.useState([]),o=Object(a.a)(s,2),i=o[0],u=o[1],d=c.a.useState(!1),l=Object(a.a)(d,2),b=l[0],j=l[1];return c.a.useEffect((function(){var e=r.data;e&&u((function(t){return[].concat(Object(A.a)(t),Object(A.a)(e.getAllConversation))}))}),[r]),c.a.useEffect((function(){u((function(e){var t=Object(A.a)(n);return e.forEach((function(e){t.findIndex((function(t){return t.conversationid===e.conversationid}))<0&&t.push(e)})),t}))}),[n]),Object(p.jsxs)("div",{className:v.a.messageHistory,children:[Object(p.jsx)("div",{tabIndex:1,onClick:function(){j((function(e){return!e}))},children:Object(p.jsx)(q.a,{})}),Object(p.jsx)("div",{className:v.a.dropdown,children:b&&Object(p.jsx)(X,{onClose:function(){j(!1)},data:i})})]})};function Y(e){var t=e.userid,n=Object(g.c)((function(e){return e.user.uid})),a=_(),r=Object(g.c)((function(e){return e.user.profileImage}));return Object(p.jsx)("header",{style:{backgroundColor:a.background,color:a.text},className:v.a.navbar,children:Object(p.jsxs)("div",{className:v.a.content,children:[Object(p.jsx)("div",{className:v.a.groupSearch,style:{display:"flex",alignItems:"center"},children:Object(p.jsx)(O.b,{to:"/",children:Object(p.jsx)(f,{userAvatar:h})})}),Object(p.jsxs)("div",{className:v.a.groupNotification,style:{display:"flex",alignItems:"center"},children:[Object(p.jsx)("div",{style:{marginRight:8},children:Object(p.jsx)(K,{userid:t})}),n&&Object(p.jsx)(O.b,{to:"/user/".concat(n),children:Object(p.jsx)(f,{userAvatar:r})})]})]})})}n.p;var Z=n(264),ee=n(24),te=n.n(ee),ne=n(263),ae=n(147),re=n.n(ae),ce=n(118),se=n.n(ce),oe=n(18),ie=n(256),ue=n(258),de=n(148),le=n.n(de),be=Object(oe.a)((function(e){return{badge:{right:0,top:40,transform:"unset"}}}))(ie.a);function je(e){var t=e.conversation,n=e.newMessage,a=Object(g.b)(),r=function(e){var t=e.conversationid;a({type:"openConversation",payload:t})},c=function(e){a({type:"hideConversation",payload:e})},s=function(e){a({type:"closeConversation",payload:e})};return Object(p.jsxs)("div",{className:te.a.container,children:[Object(p.jsx)("div",{className:te.a.chatGroups,children:t.filter((function(e){return"close"!==e.state})).map((function(e,t){return Object(p.jsx)(fe,{newMessage:n,onClose:s,onHide:c,thisEl:e},"chat-"+t)}))}),Object(p.jsx)("div",{className:te.a.bubbleContainer,children:t.filter((function(e){return"hide"===e.state})).map((function(e,t){return Object(p.jsx)(pe,{newMessage:n,handleOpen:r,data:e},"cvst-"+e.conversationid)}))})]})}var pe=function(e){var t,n,r=e.data,s=e.handleOpen,o=e.newMessage,i=c.a.useState(null),u=Object(a.a)(i,2),d=u[0],l=u[1],b=Object(W.a)(z.GET_USER_INFORMATION),j=Object(g.c)((function(e){return parseInt(e.user.uid)})),m=c.a.useState(0),v=Object(a.a)(m,2),O=v[0],h=v[1];return c.a.useEffect((function(){var e=r.userid1,t=r.userid2,n=j===e?t:e;b[0]({variables:{id:n}})}),[r,j]),c.a.useEffect((function(){(null===o||void 0===o?void 0:o.waitAllMessage.conversationid)===(null===r||void 0===r?void 0:r.conversationid)&&o.waitAllMessage.messageid!==(null===d||void 0===d?void 0:d.messageid)&&(l(o.waitAllMessage),h((function(e){return e+1})))}),[o,r,d]),c.a.useEffect((function(){h(0)}),[]),Object(p.jsx)("div",{className:te.a.bubbleItem,onClick:function(){s(r),h(0)},children:Object(p.jsx)(be,{badgeContent:O<9?null===r||void 0===r?void 0:r.count:"9+",color:"secondary",children:Object(p.jsx)(f,{userAvatar:null===(t=b[1])||void 0===t||null===(n=t.data)||void 0===n?void 0:n.getUserInformation.picture,size:"medium"})})})},fe=function(e){var t=e.onHide,n=e.thisEl,r=e.onClose,s=e.newMessage,o=c.a.useState([]),i=Object(a.a)(o,2),u=i[0],d=i[1],l=Object(g.c)((function(e){return parseInt(e.user.uid)})),b=Object(ne.a)(z.SEND_MESSAGE),j=Object(a.a)(b,1)[0],f=Object(W.a)(z.GET_USER_INFORMATION),m=c.a.useState({}),v=Object(a.a)(m,2),O=v[0],h=v[1],x=c.a.useState(""),y=Object(a.a)(x,2),C=y[0],k=y[1],w=Object(ue.a)("(max-width:600px)"),I=_(),N=c.a.useRef(null),S=Object(V.a)(z.GET_CONVERSATION_MESSAGE,{variables:{id:n.conversationid},fetchPolicy:"no-cache"});c.a.useEffect((function(){var e=S.data;if(null===e||void 0===e?void 0:e.getAllMessage){var t=Object(A.a)(e.getAllMessage);d((function(e){return Object(A.a)(t)}))}}),[S]),c.a.useEffect((function(){var e,t;(null===s||void 0===s?void 0:s.waitAllMessage.conversationid)===n.conversationid&&(u.length>0?(null===s||void 0===s?void 0:s.waitAllMessage.messageid)!==(null===(e=u[u.length-1])||void 0===e?void 0:e.messageid)&&d((function(e){return[].concat(Object(A.a)(e),[s.waitAllMessage])})):d([null!==(t=null===s||void 0===s?void 0:s.waitAllMessage)&&void 0!==t?t:[].concat()]))}),[s,n,u]),c.a.useEffect((function(){var e=n.userid1,t=n.userid2,a=l===e?t:e;f[0]({variables:{id:a}})}),[n,l]),c.a.useEffect((function(){var e,t;(null===(e=f[1])||void 0===e?void 0:e.data)&&h(null===(t=f[1])||void 0===t?void 0:t.data.getUserInformation)}),[f]),c.a.useEffect((function(){var e;(e=N.current).scrollTop=e.scrollHeight}),[u]),c.a.useEffect((function(){return w&&"open"===n.state?document.body.style.overflow="hidden":document.body.style.overflow="",function(){document.body.style.overflow=""}}),[w,n.state]);return Object(p.jsxs)("div",{className:"".concat(te.a.chatItem," ").concat("open"===n.state?te.a.chatOpen:te.a.chatHidden),children:[w&&(null===O||void 0===O?void 0:O.userid)?Object(p.jsx)(me,{onClose:function(){r(n.conversationid)},onHide:function(){t(n.conversationid)},user:{name:null===O||void 0===O?void 0:O.userfullname,id:O.userid,picture:null===O||void 0===O?void 0:O.picture}}):Object(p.jsxs)("div",{className:te.a.header,style:{backgroundColor:I.backgroundPost},children:[Object(p.jsx)("p",{children:(null===O||void 0===O?void 0:O.userfullname)||"loading"}),Object(p.jsx)("div",{className:te.a.buttonWrapper,children:Object(p.jsx)(re.a,{onClick:function(){t(n.conversationid)}})}),Object(p.jsx)("div",{className:te.a.buttonWrapper,children:Object(p.jsx)(se.a,{onClick:function(){r(n.conversationid)}})})]}),Object(p.jsx)("div",{className:te.a.body,ref:N,children:Object(p.jsx)("div",{className:te.a.bodyContent,ref:N,children:u.map((function(e,t){return Object(p.jsx)("div",{className:te.a.commentItem,children:Object(p.jsx)(ve,{nextUID:t<u.length-1&&u[t+1].userid-l===u[t].userid-l,avatar:(null===O||void 0===O?void 0:O.picture)||null,text:e.content,isthisuser:l===e.userid})},"chat-"+e.messageid+" "+n.conversationid)}))})}),Object(p.jsx)("div",{className:te.a.form,children:Object(p.jsxs)("form",{className:w&&"open"===n.state?te.a.formSticky:"",onSubmit:function(e){e.preventDefault();var t=n.userid1===l?n.userid2:n.userid1;t&&l&&(j({variables:{userid:l,receiver:t,conversationid:n.conversationid,content:C.length>0?C:"\ud83d\udc4d"}}),k(""))},children:[Object(p.jsx)("input",{value:C,onChange:function(e){k(e.target.value)},type:"text",placeholder:"enter your message"}),Object(p.jsx)("button",{style:{backgroundColor:C.length>0?"":"transparent"},className:"button",type:"submit",children:C.length>0?"send":"\ud83d\udc4d"})]})})]})},me=function(e){var t=e.user,n=e.onClose,a=e.onHide;return Object(p.jsxs)("div",{className:te.a.mobileHeader,children:[Object(p.jsx)("div",{onClick:a,children:Object(p.jsx)(le.a,{})}),Object(p.jsx)("div",{onClick:a,className:te.a.userGroup,children:Object(p.jsxs)(O.b,{to:"/user/".concat(t.id),children:[Object(p.jsx)(f,{userAvatar:null===t||void 0===t?void 0:t.picture}),Object(p.jsx)("p",{children:null===t||void 0===t?void 0:t.name})]})}),Object(p.jsx)("div",{children:Object(p.jsx)(se.a,{onClick:n})})]})},ve=function(e){var t=e.text,n=e.isthisuser,a=e.avatar,r=e.nextUID,s=c.a.useRef();return c.a.useEffect((function(){(null===s||void 0===s?void 0:s.curent)&&s.current.scrollIntoView()}),[]),Object(p.jsxs)("div",{ref:s,className:"".concat(n?te.a.right:te.a.left," ").concat(te.a.messageGroup),children:[n?Object(p.jsx)(p.Fragment,{}):Object(p.jsx)(f,{blank:r,userAvatar:a,size:"small"}),Object(p.jsx)("div",{children:Object(p.jsx)("p",{style:"\ud83d\udc4d"===t.trim()?{fontSize:"2rem",background:"transparent",boxShadow:"unset"}:{},children:t})})]})};function Oe(e){var t=e.userid,n=Object(g.c)((function(e){return e.Message.Conversation}));return Object(p.jsx)("div",{style:{position:"relative"},children:n&&Object(p.jsx)(he,{conversation:n,userid:t})})}var he=function(e){var t=e.userid,n=e.conversation,a=Object(Z.a)(z.LISTEN_MESSAGE,{variables:{userid:t}}),r=Object(g.b)();return c.a.useEffect((function(){if(null===a||void 0===a?void 0:a.data){var e=a.data.waitAllMessage,t=e.userid,n=e.receiver,c={conversationid:e.conversationid,lastmessage:e.content,userid1:Math.min(t,n),userid2:Math.max(t,n),count:1,state:"hide"};r({type:"addConversation",payload:c})}}),[a.data]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(je,{conversation:n,newMessage:a.data})})};function ge(e){var t=e.children,n=Object(g.c)((function(e){return e.user.uid})),a=_(),r={backgroundColor:a.background,paddingBottom:"10vh",backgroundImage:'url("'.concat(a.backgroundImage,'")'),backgroundPosition:"left top",backgroundSize:"cover",backgroundAttachment:"fixed",minHeight:"100vh"};return Object(p.jsxs)("div",{style:r,children:[n&&Object(p.jsx)(Oe,{userid:n}),Object(p.jsx)(Y,{userid:n}),t]})}var xe=n(23),_e=n(105),ye=n.n(_e),Ce=n(83),ke=n.n(Ce),we=n.p+"static/media/setting.343a5657.svg",Ie=c.a.lazy((function(){return n.e(3).then(n.bind(null,268))}));function Ne(e){var t=e.user,n=e.isLocal,s=Object(g.b)(),o=_(),u=c.a.useState(!1),d=Object(a.a)(u,2),l=d[0],b=d[1],j=Object(g.c)((function(e){return e.user})),m=Object(ne.a)(z.INIT_MESSAGE),v=Object(a.a)(m,2),O=v[0],h=v[1].data;return c.a.useEffect((function(){(null===h||void 0===h?void 0:h.initConversation)&&s({type:"addConversation",payload:Object(i.a)(Object(i.a)({},h.initConversation),{},{force:!0,state:"open"})})}),[h]),Object(p.jsxs)("div",{className:ke.a.container,children:[Object(p.jsx)(r.Suspense,{fallback:Object(p.jsx)(Se,{}),children:Object(p.jsx)(Ie,{open:l,onClose:function(){b(!1)}})}),Object(p.jsx)("div",{className:ke.a.userInfor,style:{backgroundColor:"rgba(".concat(o.background,",.5)")},children:Object(p.jsxs)("div",{className:ke.a.group,children:[Object(p.jsx)(f,{size:"large",userAvatar:n?null===j||void 0===j?void 0:j.profileImage:null===t||void 0===t?void 0:t.picture}),Object(p.jsx)("p",{children:n?null===j||void 0===j?void 0:j.fullName:null===t||void 0===t?void 0:t.userfullname}),!n&&Object(p.jsx)("button",{className:"button",onClick:function(){var e=parseInt(j.uid),n=parseInt(t.userid);if(e!==n){var a=Math.min(e,n),r=Math.max(e,n);O({variables:{userid1:a,userid2:r}})}},children:"message"})]})}),Object(p.jsx)("div",{className:ke.a.background,children:Object(p.jsx)("button",{onClick:function(){b(!0)},children:Object(p.jsx)("img",{width:35,src:we})})})]})}var Se=function(){return Object(p.jsx)(p.Fragment,{})},Ee=n(71),Pe=n.n(Ee),Me=n.p+"static/media/reaction.61917291.svg",Te=n.p+"static/media/userreaction.ab536510.svg",Ae=n(72),Be=n.n(Ae);function Ue(e){var t=e.media,n=e.onOpen;e.handleOpen;return Object(p.jsxs)("div",{onClick:n,className:"".concat(Be.a.container," ").concat(1===t.length?Be.a.single:Be.a.many),children:[Object(p.jsx)(Re,{media:t[0]}),t.length>=2&&Object(p.jsx)(Re,{left:t.length-2,media:t[1]})]})}var Re=function(e){var t=e.media,n=e.left,a=t.type.match(/^video/);return Object(p.jsx)("div",{className:Be.a.VideoThumbnail,style:{backgroundImage:a?"":'url("'.concat(j(t),'")'),width:"100%",height:"100%"},children:n>0&&Object(p.jsx)("div",{className:Be.a.mediaRemain,children:Object(p.jsxs)("p",{children:[n,"+"]})})})},Fe=n(9),Le=n.n(Fe),De=n(22),Ge=n(37),qe=n.n(Ge),We=n(259);function Ve(e){var t=e.data,n=c.a.useState({}),r=Object(a.a)(n,2),s=r[0],o=r[1];c.a.useEffect((function(){o(t.user)}),[t]);var i=c.a.useState(!1),u=Object(a.a)(i,2),d=u[0],l=u[1];return(null===t||void 0===t?void 0:t.content)?Object(p.jsxs)("div",{className:qe.a.commentItem,children:[Object(p.jsx)("div",{className:qe.a.userinfor,children:Object(p.jsx)(O.b,{to:"/user/".concat(t.userid),children:Object(p.jsx)(f,{userAvatar:null===s||void 0===s?void 0:s.picture})})}),Object(p.jsx)("div",{children:Object(p.jsxs)("p",{className:qe.a.comment,children:[Object(p.jsx)(O.b,{to:"/user/".concat(t.userid),children:Object(p.jsx)("strong",{children:null===s||void 0===s?void 0:s.userfullname})}),Object(p.jsx)("br",{}),t.content.length>20&&!d?t.content.substring(0,20):t.content,t.content.length>20&&Object(p.jsxs)("span",{onClick:function(){l((function(e){return!e}))},style:{color:"gray"},children:["...see ",d?"less":"more"]}),Object(p.jsx)("br",{}),Object(p.jsxs)("span",{className:qe.a.commentInfor,children:[He(t.datecreated)," ",Object(p.jsx)("span",{style:{color:"gray",marginLeft:20},children:"replies"})]})]})})]}):Object(p.jsx)(p.Fragment,{})}function He(e){var t=e/1e3,n=new Date(0);return n.setUTCSeconds(t),n.toDateString()}function $e(e){var t=e.inMediaBrowser,n=e.onOpen,r=e.onClose,s=e.postID,o=c.a.useState([]),i=Object(a.a)(o,2),u=i[0],d=i[1],l=c.a.useState(!1),b=Object(a.a)(l,2),j=b[0],f=b[1],m=Object(W.a)(z.GET_POST_LATEST_COMMENT,{fetchPolicy:"no-cache"}),v=Object(ne.a)(z.POST_COMMENT,{fetchPolicy:"no-cache"}),O=c.a.useRef(null),h=Object(g.c)((function(e){return e.user.uid})),x=c.a.useState(!1),_=Object(a.a)(x,2),y=_[0],C=_[1],k=Object(ue.a)("(max-width:1000px)");c.a.useEffect((function(){void 0!==k&&null!==k&&C(!(!k||!n||t))}),[k,t,n]),c.a.useEffect((function(){n&&f(!0)}),[n]);var w=function(e,t){return function(){var n=Object(De.a)(Le.a.mark((function n(a){var r;return Le.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r={comment:{content:a,userid:e,postid:t}},v[0]({variables:r.comment});case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()};return c.a.useEffect((function(){j&&m[0]({variables:{postid:s}})}),[j,s]),c.a.useEffect((function(){var e=m[1].data;e&&d((function(t){return[].concat(Object(A.a)(t),Object(A.a)(e.getPostCommentById))}))}),[m[1].data]),u?Object(p.jsxs)("div",{ref:O,className:"".concat(qe.a.container," ").concat(n?qe.a.open:qe.a.close," ").concat(t?qe.a.inMediaBrowser:""),children:[n?y?Object(p.jsx)(ze,{onPostComment:w(h,s),comments:u,onClose:r,isOpen:!0}):Object(p.jsx)(Je,{onPostComment:w(h,s),comments:u,onClose:r}):Object(p.jsx)(p.Fragment,{}),n&&s&&Object(p.jsx)(Qe,{update:d,postid:s})]}):Object(p.jsx)("p",{})}var ze=function(e){var t=e.isOpen,n=e.onClose,a=e.comments,r=e.onPostComment,s=c.a.useRef(null);return Object(p.jsx)(We.a,{anchor:"bottom",open:t,onClose:n,children:Object(p.jsxs)("div",{className:qe.a.drawerComment,children:[Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==s.current.value.trim()&&r(s.current.value).then((function(e){s.current.value=""}))},className:qe.a.formComment,children:[Object(p.jsx)("input",{ref:s,type:"text"}),Object(p.jsx)("button",{type:"submit",children:"post"})]}),a.map((function(e){return Object(p.jsx)(Ve,{data:e},"comment-drawer-".concat(e.commentid,"-").concat(e.postid,"-").concat(e.userid))}))]})})},Je=function(e){var t=e.comments,n=(e.onClose,e.onPostComment),a=c.a.useRef(null);return Object(p.jsxs)("div",{children:[Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==a.current.value.trim()&&n(a.current.value).then((function(e){a.current.value=""}))},className:qe.a.formComment,children:[Object(p.jsx)("input",{ref:a,type:"text"}),Object(p.jsx)("button",{type:"submit",children:"post"})]}),t.map((function(e){return Object(p.jsx)(Ve,{data:e},"comment-scroll-".concat(e.commentid,"-").concat(e.postid,"-").concat(e.userid))})),Object(p.jsx)("h4",{children:"load older comment"})]})},Qe=function(e){var t=e.postid,n=e.update,a=Object(Z.a)(z.UPDATE_COMMENT,{variables:{postid:t}}),r=a.data;a.loading;return c.a.useEffect((function(){console.log(r),(null===r||void 0===r?void 0:r.getComment)&&n((function(e){return[r.getComment].concat(Object(A.a)(e))}))}),[r]),Object(p.jsx)(p.Fragment,{})};function Xe(e){var t=e/1e3,n=new Date(0);return n.setUTCSeconds(t),n.toDateString()}var Ke=b.a.img+"graphql",Ye=function(e){var t=e.userid,n=e.postid,a=e.iconcode;return"mutation{\n\tcreateLike(input:{userid:".concat(t,",postid:").concat(n,",iconcode:").concat(a,"}){\n   \n\n      change\n      status\n    \n  }\n}")},Ze=function(e){var t=e.userid,n=e.postid;return"query{\n  checkUserLikePost(input:{userid:".concat(t,",postid:").concat(n,"}) {\n    didlike\n  }\n}")},et=function(e){var t=e.userid,n=e.postid;return"mutation{\n  deleteLike(input:{userid:".concat(t,",postid:").concat(n,"}){\n    \n\n    change\n      status\n    \n  }\n\n\n}")},tt=function(){var e=Object(De.a)(Le.a.mark((function e(t){return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt(Ye(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nt=function(){var e=Object(De.a)(Le.a.mark((function e(t){var n,a;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userid,a=t.postid,e.next=3,rt(Ze({userid:n,postid:a}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),at=function(){var e=Object(De.a)(Le.a.mark((function e(t){var n,a;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userid,a=t.postid,e.next=3,rt(et({userid:n,postid:a}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rt=function(){var e=Object(De.a)(Le.a.mark((function e(t){return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(Ke,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t})}).then((function(e){return e.json()}));case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",{err:e.t0});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),ct=Object(oe.a)((function(e){return{badge:{right:5,top:30,border:"2px solid ".concat(e.palette.background.paper),padding:"0 4px",backgroundColor:"#fd0061"}}}))(ie.a);function st(e){var t,n,s,o=e.data,u=e.onOpen,d=e.type,l=void 0===d?"minimal":d,b=e.propsStyle,j=Object(r.useState)(!1),m=Object(a.a)(j,2),v=m[0],h=m[1],x=Object(r.useState)("minimal"!==l),y=Object(a.a)(x,2),C=y[0],k=y[1],w=Object(r.useState)(null),I=Object(a.a)(w,2),N=I[0],S=I[1],E=Object(r.useState)(!1),P=Object(a.a)(E,2),M=P[0],T=P[1],A=Object(r.useState)(0),B=Object(a.a)(A,2),U=B[0],R=B[1],F=Object(g.c)((function(e){return e.user.uid})),L=_();return c.a.useEffect((function(){F&&o.postid&&nt({userid:F,postid:o.postid}).then((function(e){if(e.data){var t=e.data.checkUserLikePost.didlike;S(!!t),R(parseInt(o.likecount))}else S(null)}))}),[o]),c.a.useEffect((function(){M&&(!1===N?tt({userid:F,postid:o.postid,iconcode:1}).then((function(e){e.data&&(S(!0),R((function(e){return e+1})))})):!0===N&&at({userid:F,postid:o.postid}).then((function(e){e.data&&(S(!1),R((function(e){return e-1})))})))}),[M]),c.a.useEffect((function(){var e;return null!==N&&(e=setTimeout((function(){T(!1)}),200)),function(){clearTimeout(e)}}),[N]),o?Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{style:Object(i.a)(Object(i.a)({},b),{},{backgroundColor:L.backgroundPost,color:L.text}),className:Pe.a.container,tabIndex:"1",children:[Object(p.jsxs)("div",{className:Pe.a.userInfor,children:[Object(p.jsx)(O.b,{to:"/user/".concat(null===o||void 0===o?void 0:o.userid),children:Object(p.jsx)(f,{userAvatar:null!==(t=null===o||void 0===o||null===(n=o.user)||void 0===n?void 0:n.picture)&&void 0!==t?t:null,size:"medium"})}),Object(p.jsxs)("div",{className:Pe.a.postInfor,children:[Object(p.jsx)(O.b,{to:"/user/".concat(null===o||void 0===o?void 0:o.userid),children:Object(p.jsx)("p",{children:(null===o||void 0===o||null===(s=o.user)||void 0===s?void 0:s.userfullname)||""})}),Object(p.jsx)("p",{children:Xe(o.datecreated)})]})]}),Object(p.jsxs)("div",{title:"click to open post",className:Pe.a.postContent,children:[Object(p.jsxs)("p",{children:[v?o.content:o.content.substring(0,200),Object(p.jsxs)("span",{style:{color:"gray",display:o.content.length<200?"none":""},onClick:function(e){h((function(e){return!e})),v&&setTimeout((function(){e.target.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}),50)},children:["...see ",v?"less":"more"]})]}),"[]"!==(null===o||void 0===o?void 0:o.media)&&"minimal"===l?Object(p.jsx)(Ue,{onOpen:u,media:JSON.parse(o.media)}):Object(p.jsx)(p.Fragment,{})]}),Object(p.jsxs)("div",{className:Pe.a.like_comment,children:[Object(p.jsx)("button",{disabled:M||null===N,className:"button-none",onClick:function(){T(!0)},children:Object(p.jsx)(ct,{badgeContent:U,color:"secondary",children:Object(p.jsx)(f,{userAvatar:N?Te:Me,round:!1})})}),Object(p.jsx)("div",{}),Object(p.jsx)("p",{style:{cursor:"pointer"},onClick:function(){k((function(e){return!e}))},children:"comments"})]}),Object(p.jsx)($e,{userId:o.userid,postID:o.postid,onOpen:C,onClose:function(){k(!1)},inMediaBrowser:"minimal"!==l})]})}):Object(p.jsx)(p.Fragment,{})}var ot=n(61),it=n.n(ot),ut=n(62),dt=n.n(ut),lt=n.p+"static/media/back.bd68ef98.svg",bt=n.p+"static/media/forward.45007aa6.svg";function jt(e){var t=e.media,n=c.a.useState(0),r=Object(a.a)(n,2),s=r[0],o=r[1],i=c.a.useRef(null),u=c.a.useState({width:0,height:0}),d=Object(a.a)(u,2),l=d[0],b=d[1],j=function(e){return function(){o((function(n){return"r"===e?Math.min(n+1,t.length-1):Math.max(n-1,0)}))}};return c.a.useEffect((function(){var e=function(){var e=i.current.offsetWidth,t=i.current.offsetHeight;b({width:e,height:t})};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[s]),Object(p.jsxs)("div",{className:dt.a.container,ref:i,children:[s>0&&Object(p.jsx)("button",{onClick:j("l"),className:dt.a.Left,children:Object(p.jsx)("img",{alt:"go back",src:lt})}),Object(p.jsx)(mt,{ctnDimension:l,media:t[s]}),s<t.length-1&&Object(p.jsx)("button",{onClick:j("r"),className:dt.a.Right,children:Object(p.jsx)("img",{alt:"go forward",src:bt})})]})}var pt=function(e){var t=e.image,n=e.ctnDimension,r=c.a.useRef(null),s=c.a.useState(!1),o=Object(a.a)(s,2),i=o[0],u=o[1];return Object(p.jsx)("img",{ref:r,onLoad:function(e){var t=e.target,a=t.offsetWidth,r=t.offsetHeight;a>n.width&&u(!0),r>n.height&&u(!1)},style:{userSelect:"none"},alt:"user post",className:i?dt.a.ImageWidth:dt.a.ImageHeight,src:j(t)})},ft=function(e){var t=e.video;return Object(p.jsx)("video",{controls:!0,className:dt.a.Video,src:j(t)})},mt=function(e){var t=e.media,n=e.ctnDimension;return t.type.match(/^video/)?Object(p.jsx)(ft,{video:t}):Object(p.jsx)(pt,{ctnDimension:n,image:t})},vt=n.p+"static/media/minimize.2ade6ffd.svg";function Ot(e){var t=e.open,n=void 0!==t&&t,s=e.onClose,o=e.postid,i=void 0===o?null:o,u=Object(r.useState)({}),d=Object(a.a)(u,2),l=d[0],b=d[1];return c.a.useEffect((function(){document.body.style.overflow=n?"hidden":""}),[n]),c.a.useEffect((function(){return i>=0&&function(e){try{return rt(function(e){return"\t{\n  getPostInformationById(postid:".concat(e,"){\n    postid\n    userid\n    content\n    media\n    datecreated\n    likecount\n    embeded\n    \n    user{\n      userfullname\n      userid\n      userdisplayname\n      picture\n    }\n  }\n}")}(e))}catch(t){return{err:t}}}(i).then((function(e){e.data&&b(e.data.getPostInformationById)})),function(){document.body.style.overflow=""}}),[n,i]),n?Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("div",{className:it.a.container,children:l.postid&&Object(p.jsxs)("div",{className:"".concat(it.a.postWrapper," ").concat("[]"!==l.media?it.a.hasMedia:it.a.noMedia),children:["[]"!==(null===l||void 0===l?void 0:l.media)&&Object(p.jsxs)("div",{className:it.a.mediaViewer,children:[Object(p.jsx)("button",{className:it.a.closeButton,onClick:s,children:Object(p.jsx)("img",{src:vt,alt:"exit media"})}),Object(p.jsx)(jt,{media:JSON.parse(l.media)})]}),Object(p.jsx)(st,{type:"detail",data:l})]})})}):Object(p.jsx)(p.Fragment,{})}var ht=n(44);function gt(e){var t=e.posts,n=e.setPosts,s=e.byUID,o=void 0!==s&&s,i=e.uid,u=Object(r.useState)(!1),d=Object(a.a)(u,2),l=d[0],b=d[1],j=Object(r.useState)(null),f=Object(a.a)(j,2),m=f[0],v=f[1],O=Object(r.useState)(!0),h=Object(a.a)(O,2),g=(h[0],h[1],Object(W.a)(z.GET_LATEST_POST,{fetchPolicy:"no-cache"})),x=Object(W.a)(z.GET_USER_LATEST_POST,{fetchPolicy:"no-cache"});Object(r.useEffect)((function(){i>=0&&!0===o?x[0]({variables:{userid:i}}):g[0]()}),[i,o]),c.a.useEffect((function(){var e=g[1].data;e&&n(e.getLatestPost)}),[g]),c.a.useEffect((function(){var e=x[1].data;e&&n(e.getLatestPostByUserID)}),[x]);var _=function(e){return function(){b(!0),v(t[e].postid)}};return t.length>0?Object(p.jsxs)("div",{children:[m&&Object(p.jsx)(Ot,{open:l,postid:m,onClose:function(){b(!1)}}),t.map((function(e,t){return Object(p.jsx)(st,{propsStyle:{marginBottom:17},onOpen:_(t),data:e},"post-id-"+e.postid)}))]}):Object(p.jsx)(p.Fragment,{})}var xt=n(73),_t=n.n(xt),yt=n.p+"static/media/picture.b0c992ca.svg",Ct=n.p+"static/media/video.f3b3fb0e.svg",kt=n(49),wt=n.n(kt),It=n(149);function Nt(e){var t=e.value,n=e.setValue;return Object(p.jsx)("div",{className:wt.a.editorWrapper,children:Object(p.jsx)("textarea",{value:t,onChange:function(e){n(e.target.value)}})})}function St(e){var t=e.files,n=e.handleFiles,a=Object(r.useCallback)((function(e){return function(){n((function(t){return t.filter((function(t,n){return e!==n}))}))}}),[n]);return Object(p.jsx)("div",{className:wt.a.fileViewerWrapper,children:t.map((function(e,t){return Object(p.jsx)(Et,{onDelete:a(t),index:t+1,file:e},"file+"+t)}))})}function Et(e){var t=e.file,n=e.index,c=e.onDelete,s=Object(r.useState)(""),o=Object(a.a)(s,2),u=o[0],d=o[1];return Object(r.useEffect)((function(){var e=new FileReader;e.addEventListener("load",(function(e){var t=e.target.result;d(t)}),[]),e.readAsDataURL(t)}),[t]),Object(p.jsxs)("div",{draggable:!0,style:Object(i.a)({backgroundImage:"url(".concat(u,")")},{backgroundPosition:"center",backgroundSize:"cover",display:"flex",alignItems:"flex-end",justifyContent:"space-between"}),children:[Object(p.jsx)(ie.a,{badgeContent:n,color:"secondary",children:Object(p.jsx)("div",{style:{height:15,width:15}})}),Object(p.jsx)("button",{onClick:c,style:{backgroundColor:"var(--light-button)",color:"white"},className:"button",children:"delete"})]})}function Pt(e){var t=e.onClose,n=e.appendPost,s=_(),o=c.a.useState(""),u=Object(a.a)(o,2),d=u[0],l=u[1],b=Object(g.c)((function(e){return e.user})),j=Object(r.useRef)(null),f=function(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1];return[n,function(e){var t,n=Object(It.a)(e.target.files);try{var a=function(){var e=t.value;c((function(t){return[].concat(Object(A.a)(t),[e])}))};for(n.s();!(t=n.n()).done;)a()}catch(r){n.e(r)}finally{n.f()}},c]}(),m=Object(a.a)(f,3),v=m[0],O=m[1],h=m[2],x=Object(r.useState)(!1),y=Object(a.a)(x,2),C=y[0],k=y[1],w=Object(r.useState)(!1),I=Object(a.a)(w,2),N=I[0],S=I[1],E=Object(r.useState)({message:""}),P=Object(a.a)(E,2),M=P[0],T=P[1],B=Object(r.useCallback)((function(e){M.message&&T({message:""}),l(e)}),[T,l,M.message]),U=Object(r.useCallback)((function(){j.current.click()}),[j]),R=Object(r.useCallback)((function(e){t()}),[t]),F=Object(r.useCallback)((function(){S(!0),T({message:"posting!"})}),[]);return Object(r.useEffect)((function(){if(!0===N)if(b.uid&&d.trim().length){var e=new FormData;e.append("content",d),e.append("count",v.length),e.append("uid",b.uid),v.forEach((function(t){e.append("uploads",t)})),ht.a.makePost(e).then((function(e){if(e.postid){var a=Object(i.a)(Object(i.a)({},e),{},{datecreated:Date.now(),user:{userid:b.uid,userfullname:b.fullName,picture:b.profileImage}});n(a),T({message:"success!"}),t()}})).catch((function(e){T({message:"post failed!"}),S(!1)}))}else T({message:"no empty post!"}),S(!1)}),[N,b.uid,d,v,n,t]),Object(p.jsxs)("div",{className:wt.a.container,style:{backgroundColor:"rbga(".concat(s.background,",.3)")},children:[Object(p.jsx)("div",{className:wt.a.hiddenInput,children:Object(p.jsx)("input",{onChange:O,ref:j,type:"file",multiple:!0,accept:"image/png, image/gif, image/jpeg, video/*"})}),Object(p.jsx)("div",{title:"close editor",className:wt.a.overlay,onClick:function(e){N||t()}}),Object(p.jsxs)("div",{className:wt.a.editor,style:{backgroundColor:s.background,color:s.text},children:[Object(p.jsx)("div",{className:wt.a.userProfile,children:Object(p.jsxs)("p",{children:[C?"Edit file ("+v.length+")":"Write post"," ",Object(p.jsx)("strong",{children:M.message})]})}),C?Object(p.jsx)(St,{files:v,handleFiles:h}):Object(p.jsx)(Nt,{value:d,setValue:B}),Object(p.jsxs)("div",{className:wt.a.groupButton,children:[Object(p.jsx)("button",{disabled:N,className:"button",onClick:U,children:"add media"}),Object(p.jsx)(ie.a,{invisible:C,badgeContent:v.length||0,color:"secondary",children:Object(p.jsxs)("button",{className:"button",onClick:function(){k((function(e){return!e}))},children:["view ",C?"post":"media"]})}),Object(p.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:Object(p.jsx)("button",{disabled:N,className:"button bg-pink",onClick:F,children:"post"})}),Object(p.jsx)("button",{className:"button",disabled:N,onClick:R,children:"cancel"})]})]})]})}var Mt=n.p+"static/media/checkin.b8d0c75f.svg";function Tt(e){var t=e.appendPost,n=Object(r.useState)(!1),s=Object(a.a)(n,2),o=s[0],i=s[1],u=Object(g.c)((function(e){return e.user.profileImage})),d=c.a.useCallback((function(){i(!1)}),[]),l=_();return Object(p.jsxs)("div",{style:{backgroundColor:l.background},className:_t.a.container,children:[o&&Object(p.jsx)(Pt,{appendPost:t,onClose:d}),Object(p.jsx)("div",{className:_t.a.CheckInItem,children:Object(p.jsx)(f,{size:"large",userAvatar:null!==u&&void 0!==u?u:null})}),Object(p.jsxs)("div",{className:_t.a.CheckInStatus,children:[Object(p.jsx)("div",{className:_t.a.CheckinForm,children:Object(p.jsx)("button",{onClick:function(){i(!0)},children:"What's in your mind!"})}),Object(p.jsxs)("div",{className:_t.a.CheckinButton,children:[Object(p.jsxs)("button",{onClick:function(){i(!0)},children:[Object(p.jsx)(f,{userAvatar:yt}),Object(p.jsx)("p",{children:"Media"})]}),Object(p.jsxs)("button",{children:[Object(p.jsx)(f,{userAvatar:Ct}),Object(p.jsx)("p",{children:"Live"})]}),Object(p.jsxs)("button",{children:[Object(p.jsx)(f,{userAvatar:Mt}),Object(p.jsx)("p",{children:"Checkin! "})]})]})]})]})}var At=n(150),Bt=n.n(At);var Ut=[{name:"home",path:"/",Component:function(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1],s=_(),o=Object(r.useCallback)((function(e){c((function(t){return[e].concat(Object(A.a)(t))}))}),[]);return Object(p.jsxs)("div",{className:Bt.a.container,style:{backgroundColor:s.background,color:s.text},children:[Object(p.jsx)(Tt,{appendPost:o}),Object(p.jsx)(gt,{byUID:!1,uid:null,posts:n,setPosts:c})]})}},{name:"user",path:"/user/:uid",Component:function(e){var t=e.match,n=Object(g.c)((function(e){return e.user.uid})),s=Object(r.useState)([]),o=Object(a.a)(s,2),i=o[0],u=o[1],d=Object(r.useState)(null),l=Object(a.a)(d,2),b=l[0],j=l[1],f=_(),m=Object(V.a)(z.GET_USER_INFORMATION,{variables:{id:parseInt(t.params.uid)},errorPolicy:"all"}),v=(m.loading,m.error),O=m.data,h=c.a.useCallback((function(e){u((function(t){return[e].concat(Object(A.a)(t))}))}),[]);return c.a.useEffect((function(){O&&j(O.getUserInformation)}),[O,v,t]),(null===b||void 0===b?void 0:b.userid)?Object(p.jsxs)("div",{className:ye.a.pageWrapper,style:{backgroundColor:f.background,color:f.text},children:[Object(p.jsx)(Ne,{isLocal:n===b.userid,user:b}),b.userid===n&&Object(p.jsxs)("div",{className:ye.a.CheckInWrapper,children:[" ",Object(p.jsx)(Tt,{appendPost:h})]}),Object(p.jsx)("div",{className:ye.a.NewsFeedWrapper,children:Object(p.jsx)(gt,{posts:i,uid:b.userid,byUID:!0,setPosts:u})})]}):Object(p.jsx)(p.Fragment,{})}},{name:"post",path:"/post",Component:function(){return Object(p.jsx)("h1",{children:"post page"})}}];var Rt=function(){return Object(p.jsx)(ge,{children:Object(p.jsx)(xe.c,{children:Ut.map((function(e){var t=e.path,n=e.name,a=e.Component;return Object(p.jsx)(xe.a,{children:function(e){return Object(p.jsx)(a,Object(i.a)({},e))},exact:!0,path:t},n)}))})})},Ft=n(97),Lt=n(54),Dt=n.n(Lt),Gt=n(151),qt=n.n(Gt),Wt=n(51);function Vt(e){return function(t){var n=e.user,a=n.uid,r=n.userFullName,c={loggedIn:!0,uid:a,displayName:n.userDisplayName,profileImage:n.picture,fullName:r};t({type:Wt.a.logInUser,payload:c})}}function Ht(){var e=Object(r.useState)(!0),t=Object(a.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)((function(){return{username:"",password:"",userDisplayName:"",userFullName:"",dateOfBirth:"",dateCreatedAccount:(new Date).toISOString().substring(0,10),email:"",phone:"",gender:""}})),o=Object(a.a)(s,2),u=o[0],d=o[1],l=Object(g.b)(),b=function(e){return function(t){var n=t.target.value;"username"!==e&&"password"!==e||(" "===n[n.length-1]&&alert("kh\xf4ng \u0111\u01b0\u1ee3c c\xf3 kho\u1ea3ng c\xe1ch"),n=n.trim()),d((function(t){return Object(i.a)(Object(i.a)({},t),{},Object(Ft.a)({},e,n))}))}};return Object(p.jsx)("div",{className:Dt.a.container,children:Object(p.jsxs)("div",{className:Dt.a.Form,children:[n?Object(p.jsx)(zt,{handleLogin:function(e){e.preventDefault();var t=u.username,n=u.password;ht.a.loginExistingUser({username:t,password:n}).then((function(e){e.err||l(Vt(e))}))},user:u,handleChange:b}):Object(p.jsx)($t,{handleRegister:function(e){e.preventDefault(),ht.a.registerNewUser(u).then((function(e){e.err||l(Vt(e))}))},user:u,handleChange:b}),Object(p.jsx)("p",{children:n?"Don't have account?":"Account already exists?"}),Object(p.jsxs)("div",{className:Dt.a.Suggest,children:[Object(p.jsx)("button",{onClick:function(){c((function(e){return!e}))},children:n?"Register":"Login"}),Object(p.jsx)("span",{children:"or"}),Object(p.jsx)(qt.a,{appId:"142129044562039",redirectUri:"google.com",cssClass:"facebook-login-icon",autoLoad:!1,fields:"name,email,picture",onClick:function(){console.log("clicked")},callback:function(e){console.log(e)}})]})]})})}var $t=function(e){var t=e.user,n=e.handleChange,a=e.handleRegister;return Object(p.jsxs)("form",{onSubmit:a,className:Dt.a.MainForm,children:[[{name:"Username",type:"text",placeholder:"login account",isRequired:!0,key:"username"},{name:"Password",type:"password",placeholder:"secure password",isRequired:!0,key:"password"},{name:"Full name",type:"text",placeholder:"your full name",isRequired:!0,key:"userFullName"},{name:"Display name",type:"text",placeholder:"your display name",isRequired:!0,key:"userDisplayName"},{name:"Gender",type:"text",placeholder:"what is your gender",isRequired:!0,key:"gender"},{name:"Email",type:"email",placeholder:"your backup email",isRequired:!0,key:"email"},{name:"Phone",type:"text",placeholder:"your phone number",isRequired:!0,key:"phone"},{name:"Date of birth",type:"date",placeholder:"",isRequired:!0,key:"dateOfBirth"}].map((function(e,a){return Object(p.jsxs)("div",{className:Dt.a.groupForm,children:[Object(p.jsx)("label",{children:e.name}),Object(p.jsx)("input",{type:e.type,value:t[e.key],onChange:n(e.key),placeholder:e.placeholder,required:e.isRequired})]},"register-id-"+a)})),Object(p.jsx)("button",{type:"submit",children:"Create Account"})]})},zt=function(e){var t=e.user,n=e.handleChange,a=e.handleLogin;return Object(p.jsxs)("form",{onSubmit:a,className:Dt.a.MainForm,children:[[{name:"Username",type:"text",placeholder:"login account",isRequired:!0,key:"username"},{name:"Password",type:"password",placeholder:"secure password",isRequired:!0,key:"password"}].map((function(e,a){return Object(p.jsxs)("div",{className:Dt.a.groupForm,children:[Object(p.jsx)("label",{children:e.name}),Object(p.jsx)("input",{type:e.type,value:t[e.key],onChange:n(e.key),placeholder:e.placeholder,required:e.isRequired})]},"login-id-"+a)})),Object(p.jsx)("button",{type:"submit",children:"Login"})]})};var Jt=n(67),Qt=n(152),Xt={loggedIn:!1,uid:null,displayName:null,profileImage:null,fullName:null},Kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0;return t.type===Wt.a.logInUser?Object(i.a)(Object(i.a)({},e),t.payload):t.type===Wt.a.logOutUser?Object(i.a)({},Xt):t.type===Wt.a.changeAvatar?Object(i.a)(Object(i.a)({},e),t.payload):e},Yt={theme:"default"},Zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt;return e},en={queue:[],Conversation:[]},tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:en,t=arguments.length>1?arguments[1]:void 0;if("addToQueue"===t.type)return Object(i.a)(Object(i.a)({},e),{},{queue:[].concat(Object(A.a)(e.queue),[t.payload])});if("popFistElement"===t.type)return Object(i.a)(Object(i.a)({},e),{},{queue:Object(A.a)(e.queue).filter((function(e,t){return 0!==t}))});if("addConversation"===t.type){var n=Object(A.a)(e.Conversation),a=n.find((function(e){return e.conversationid===t.payload.conversationid}));if(a){var r=n.map((function(e){return e.conversationid===a.conversationid?Object(i.a)(Object(i.a)({},e),{},{count:"hide"===e.state?e.count+1:0,lastmessage:t.payload.lastmessage,state:"open"===a.state||!0===t.payload.force?"open":"hide"}):e}));return Object(i.a)(Object(i.a)({},e),{},{Conversation:r})}var c=[Object(i.a)(Object(i.a)({},t.payload),{},{count:t.payload.count||0})].concat(Object(A.a)(n.filter((function(e){return e.conversationid!==t.payload.conversationid}))));return Object(i.a)(Object(i.a)({},e),{},{Conversation:c})}if("getAllConversation"===t.type)return Object(i.a)(Object(i.a)({},e),{},{Conversation:t.payload});if("openConversation"===t.type){var s=t.payload,o=Object(A.a)(e.Conversation),u=o.map((function(e){return s===e.conversationid?Object(i.a)(Object(i.a)({},e),{},{state:"open"}):e}));return Object(i.a)(Object(i.a)({},e),{},{Conversation:u})}if("hideConversation"===t.type){var d=t.payload,l=Object(A.a)(e.Conversation),b=l.map((function(e){return d===e.conversationid?Object(i.a)(Object(i.a)({},e),{},{state:"hide",count:0}):e}));return Object(i.a)(Object(i.a)({},e),{},{Conversation:b})}if("closeConversation"===t.type){var j=t.payload,p=Object(A.a)(e.Conversation),f=p.map((function(e){return j===e.conversationid?Object(i.a)(Object(i.a)({},e),{},{state:"close"}):e}));return Object(i.a)(Object(i.a)({},e),{},{Conversation:f})}return e},nn=Object(Jt.combineReducers)({user:Kt,settings:Zt,Message:tn}),an=[n(153).a],rn=Object(Jt.createStore)(nn,Object(Qt.composeWithDevTools)(Jt.applyMiddleware.apply(void 0,an))),cn=(n(196),n(112)),sn=n(210),on=n(207),un=n(260),dn=n(38),ln=n(53),bn=n(154),jn=window.location.host,pn=new un.a({uri:"http://".concat(jn,"/graphql")}),fn=new bn.a({uri:"ws://".concat(jn,"/graphql"),options:{reconnect:!0}}),mn=Object(dn.split)((function(e){var t=e.query,n=Object(ln.e)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),fn,pn),vn=new cn.a({link:mn,cache:new sn.a});var On=function(){var e=Object(g.b)(),t=c.a.useState(!1),n=Object(a.a)(t,2),s=n[0],o=n[1];c.a.useEffect((function(){ht.a.resumeUserSession().then((function(t){(null===t||void 0===t?void 0:t.user)&&e(function(e){return function(t){var n=e.user,a=n.uid,r=n.userFullName,c={loggedIn:!0,uid:a,displayName:n.userDisplayName,profileImage:n.picture,fullName:r};t({type:Wt.a.logInUser,payload:c})}}(t)),o(!0)}))}));var i=function(){var e=Object(r.useState)(null),t=Object(a.a)(e,2),n=t[0],c=t[1],s=Object(g.c)((function(e){return e.user.loggedIn}));return Object(r.useEffect)((function(){c(s)}),[s]),n}();return s&&null!==i?!0===i?Object(p.jsx)(Rt,{}):Object(p.jsx)(Ht,{}):Object(p.jsx)(p.Fragment,{})};o.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(g.a,{store:rn,children:Object(p.jsx)(O.a,{children:Object(p.jsx)(on.a,{client:vn,children:Object(p.jsx)(On,{})})})})}),document.getElementById("root"))},24:function(e,t,n){e.exports={container:"ChatBubble_container__3S5sJ",bubbleContainer:"ChatBubble_bubbleContainer__2rnxW",bubbleItem:"ChatBubble_bubbleItem__S5xGB",chatGroups:"ChatBubble_chatGroups__BmNCM",chatItem:"ChatBubble_chatItem__juEdF",buttonWrapper:"ChatBubble_buttonWrapper__1iQX2",userGroup:"ChatBubble_userGroup__sOVC_",mobileHeader:"ChatBubble_mobileHeader__27bgv",header:"ChatBubble_header__8Ju_9",form:"ChatBubble_form__5E2X2",formSticky:"ChatBubble_formSticky__2Gbz0",body:"ChatBubble_body__188j2",bodyContent:"ChatBubble_bodyContent__7ssOB",chatHidden:"ChatBubble_chatHidden__1modv",left:"ChatBubble_left__1aWr4",right:"ChatBubble_right__Ya3Kc",commentItem:"ChatBubble_commentItem__2JRzb",messageGroup:"ChatBubble_messageGroup__TzKEx",drawerDialog:"ChatBubble_drawerDialog__c6HzV"}},28:function(e,t,n){"use strict";var a={dev:"/api",img:"/"};t.a=a},37:function(e,t,n){e.exports={container:"Comment_container__3imMD",userinfor:"Comment_userinfor__1odgz",commentItem:"Comment_commentItem__2pmZ5",comment:"Comment_comment__1PIRq",showup:"Comment_showup__2CGhg",commentInfor:"Comment_commentInfor__26YK_",drawerComment:"Comment_drawerComment__3qZ-O",formComment:"Comment_formComment__3xEeE"}},44:function(e,t,n){"use strict";var a=n(9),r=n.n(a),c=n(22),s=n(28),o=n(106),i=n.n(o),u={registerNewUser:function(e){return Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(s.a.dev,"/user/signup"),d("POST",{user:e})).then((function(e){return e.json()}));case 3:if(!(n=t.sent).status){t.next=6;break}return t.abrupt("return",n);case 6:throw new Error;case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",{err:"bad request"});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},loginExistingUser:function(e){return Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(s.a.dev,"/user/login"),d("POST",{user:e})).then((function(e){return e.json()}));case 3:if(!(n=t.sent).status){t.next=6;break}return t.abrupt("return",n);case 6:throw new Error;case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",{err:"bad request from client"});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},loginFacebook:function(e){return Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(s.a.dev,"/user/fblogin"),d("POST",{user:e})).then((function(e){return e.json()}));case 3:if(!(n=t.sent).status){t.next=6;break}return t.abrupt("return",n);case 6:throw new Error;case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",{err:"bad request"});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},makePost:function(e){return Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i()({method:"post",url:"".concat(s.a.dev,"/post/newpost"),data:e,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data})).catch((function(e){console.log(e)}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))()},getLatestPost:function(){return Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get("".concat(s.a.dev,"/post/latest")).then((function(e){return e.data}));case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{err:"bad request! no post."});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},getUserById:function(e){return Object(c.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.abrupt("return",fetch("".concat(s.a.dev,"/user/information/").concat(e)).then((function(e){return e.json()})));case 4:return t.prev=4,t.t0=t.catch(0),t.abrupt("return",{err:t.t0.message});case 7:case"end":return t.stop()}}),t,null,[[0,4]])})))()},getEarlierPostByLastId:function(e){return Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(s.a.dev,"/post/earlier/").concat(e)).then((function(e){return e.json()}));case 3:return n=t.sent,t.abrupt("return",n);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{err:t.t0.message});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getAllPostById:function(e){return Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(s.a.dev,"/post/allpost/").concat(e)).then((function(e){return e.json()}));case 3:return n=t.sent,t.abrupt("return",n);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{err:t.t0.message});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getUserEarlierPostById:function(e,t){return Object(c.a)(r.a.mark((function n(){var a;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("".concat(s.a.dev,"/post/earlier/").concat(e,"/").concat(t)).then((function(e){return e.json()}));case 3:return a=n.sent,n.abrupt("return",a);case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",{err:n.t0.message});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},setUserAvatar:function(e,t){return Object(c.a)(r.a.mark((function n(){var a;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i()({method:"put",url:"".concat(s.a.dev,"/user/avatar/").concat(e),data:t,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data})).catch((function(e){console.log(e)}));case 3:return a=n.sent,n.abrupt("return",a);case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",{err:n.t0.message});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},userCommentPost:function(e){return Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(s.a.dev,"/post/comment"),d("POST",e)).then((function(e){return e.json()}));case 3:return n=t.sent,t.abrupt("return",n);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{err:"bad request"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getPostLatestComment:function(e){return Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(s.a.dev,"/post/comment/").concat(e)).then((function(e){return e.json()}));case 3:return n=t.sent,t.abrupt("return",n);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{err:"bad request"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},updateCommentByLastID:function(e){return Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(s.a.dev,"/post/comment/update"),d("POST",e)).then((function(e){return e.json()}));case 3:return n=t.sent,t.abrupt("return",n);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{err:"not found"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},resumeUserSession:function(){return Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(s.a.dev,"/user/resume")).then((function(e){return e.json()}));case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",{err:!0});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()}},d=function(e,t){return{method:e,mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}};t.a=u},48:function(e,t,n){e.exports={groupNotification:"Navbar_groupNotification__3NmGa",navbar:"Navbar_navbar__3HLis",content:"Navbar_content__j5B0b",groupSearch:"Navbar_groupSearch__dY8E7",dropdown:"Navbar_dropdown__13VHp",messageHistory:"Navbar_messageHistory__bmgGV",wrapper:"Navbar_wrapper__1xzjY"}},49:function(e,t,n){e.exports={container:"PostEdit_container__1cABj",overlay:"PostEdit_overlay__3nG28",editor:"PostEdit_editor__3GTHV",editorWrapper:"PostEdit_editorWrapper__1BXqX",fileViewerWrapper:"PostEdit_fileViewerWrapper__GXxpg",groupButton:"PostEdit_groupButton__1zwPx",hiddenInput:"PostEdit_hiddenInput__31IVS"}},51:function(e,t,n){"use strict";t.a={logInUser:"user/LogInUser",logOutUser:"user/LogOutUser",changeAvatar:"user/changeAvatars"}},54:function(e,t,n){e.exports={container:"LoginPage_container__2iffR",Form:"LoginPage_Form__1MiFU",MainForm:"LoginPage_MainForm__1w3oE",Suggest:"LoginPage_Suggest__2T50A",groupForm:"LoginPage_groupForm__3B-v9"}},60:function(e,t,n){e.exports={small:"Avatar_small__1S5ft",medium:"Avatar_medium__2Wn88",large:"Avatar_large__16sur",avatar:"Avatar_avatar__2GRnH"}},61:function(e,t,n){e.exports={container:"MediaBrowser_container__l0ovP",postWrapper:"MediaBrowser_postWrapper__2d20Z",hasMedia:"MediaBrowser_hasMedia__3IbhH",noMedia:"MediaBrowser_noMedia__2R8dK",overlay:"MediaBrowser_overlay__nQIPx",mediaViewer:"MediaBrowser_mediaViewer__1GHtf",closeButton:"MediaBrowser_closeButton__1SpPQ"}},62:function(e,t,n){e.exports={container:"MediaViewer_container__1UA21",Left:"MediaViewer_Left__tRnSH",Right:"MediaViewer_Right__1PFCw",Video:"MediaViewer_Video__1Mwxg",ImageHeight:"MediaViewer_ImageHeight__39tQr",ImageWidth:"MediaViewer_ImageWidth__eMG_V"}},71:function(e,t,n){e.exports={container:"Post_container__705-l",userInfor:"Post_userInfor__3TsEz",postInfor:"Post_postInfor__2u5Dy",postContent:"Post_postContent__1O4Rf",postMedia:"Post_postMedia__1d6sf",like_comment:"Post_like_comment__D8NQK"}},72:function(e,t,n){e.exports={container:"Preview_container__1bfQb",single:"Preview_single__1vPF6",many:"Preview_many__PfN9x",VideoThumbnail:"Preview_VideoThumbnail__MwOHt",mediaRemain:"Preview_mediaRemain__sQjtr"}},73:function(e,t,n){e.exports={container:"CheckIn_container__lONDU",CheckInStatus:"CheckIn_CheckInStatus__1Sa0w",CheckInItem:"CheckIn_CheckInItem__1mM14",CheckinForm:"CheckIn_CheckinForm__2Yoyx",CheckinButton:"CheckIn_CheckinButton__3Itp0"}},83:function(e,t,n){e.exports={container:"UserWall_container__ASS1k",background:"UserWall_background__1lSyb",showup:"UserWall_showup__2KldS",userInfor:"UserWall_userInfor__PIxU_",group:"UserWall_group__2SClk"}}},[[208,1,2]]]);
//# sourceMappingURL=main.18e01c75.chunk.js.map