{"version":3,"sources":["Page/UserPage/UserPage.module.scss","Page/HomePage/HomePage.module.scss","Components/Avatar/avatar.jpg","lib/Ultilities/getURL.js","Components/Avatar/index.js","stylesheets/svg/logo.svg","stylesheets/color.js","stylesheets/images/rose.jpg","stylesheets/images/jennie.jpg","lib/hooks/useColor.js","lib/API/Apollo/Queries/index.js","Components/Navbar/MessageHistory.js","Components/Navbar/index.js","stylesheets/svg/message.svg","Components/ChatBubble/index.js","Components/ChatListener/index.js","Components/Layout/index.js","stylesheets/svg/setting.svg","Components/UserWall/index.js","stylesheets/svg/reaction.svg","stylesheets/svg/userreaction.svg","Components/PreviewMedia/index.js","Components/Comment/CommentItem.js","Components/Comment/index.js","lib/Ultilities/Format.js","lib/API/Graphql.js","Components/Post/index.js","stylesheets/svg/back.svg","stylesheets/svg/forward.svg","Components/MediaViewer/index.js","stylesheets/svg/minimize.svg","Components/MediaBrowser/index.js","Components/NewsFeed/index.js","stylesheets/svg/picture.svg","stylesheets/svg/video.svg","Components/PostEdit/index.js","lib/hooks/useMedia.js","stylesheets/svg/checkin.svg","Components/CheckIn/index.js","Page/route.js","Page/HomePage/index.js","Page/UserPage/index.js","App.js","Page/LoginPage/index.js","ReduxStore/bin/reducers/User.js","ReduxStore/bin/reducers/Settings.js","ReduxStore/bin/reducers/Message.js","ReduxStore/bin/reducers/index.js","ReduxStore/store.js","lib/API/Apollo/Link/index.js","index.js","lib/hooks/useLogin.js","Components/ChatBubble/ChatBubble.module.scss","lib/API/URL.js","Components/Comment/Comment.module.scss","lib/API/UserAPI.js","Components/Navbar/Navbar.module.scss","Components/PostEdit/PostEdit.module.scss","ReduxStore/bin/CONSTANT.js","Page/LoginPage/LoginPage.module.scss","Components/Avatar/Avatar.module.scss","Components/MediaBrowser/MediaBrowser.module.scss","Components/MediaViewer/MediaViewer.module.scss","Components/Post/Post.module.scss","Components/PreviewMedia/Preview.module.scss","Components/CheckIn/CheckIn.module.scss","Components/UserWall/UserWall.module.scss"],"names":["module","exports","getImageURL","url","path","api","img","Avatar","imgSize","userAvatar","size","round","blank","styles","small","medium","large","style","borderRadius","backgroundImage","className","avatar","indexOf","noAvatar","theme","default","text","backgroud","backgroudPost","rosie","background","backgroundPost","jennie","useTheme","index","useSelector","state","settings","Query","GET_USER_INFORMATION","gql","GET_LATEST_POST","GET_USER_LATEST_POST","GET_POST_LATEST_COMMENT","POST_COMMENT","UPDATE_COMMENT","LISTEN_MESSAGE","GET_ALL_CONVERSATION","SEND_MESSAGE","INIT_MESSAGE","GET_CONVERSATION_MESSAGE","useStyles","makeStyles","root","width","backgroundColor","palette","paper","MessageHistoryItem","conversation","thisUser","useLazyQuery","getData","response","React","useState","user","setUser","dispatch","useDispatch","useEffect","conversationid","userid1","userid2","variables","id","parseInt","data","getUserInformation","wrapper","ListItem","onClick","type","payload","force","ListItemAvatar","picture","ListItemText","primary","userfullname","secondary","lastmessage","FolderList","onClose","classes","userid","uid","List","map","item","MessageHistory","Conversation","Message","GetLatestConversation","useQuery","history","setHistory","open","setOpen","s","getAllConversation","NewState","forEach","conver","findIndex","e","push","messageHistory","tabIndex","dropdown","Navbar","profileImage","color","navbar","content","groupSearch","display","alignItems","to","logo","groupNotification","marginRight","StyledBadge","withStyles","badge","right","top","transform","Badge","ChatBubble","newMessage","onOpen","onHide","container","chatGroups","filter","i","thisEl","bubbleContainer","c","handleOpen","message","setMessage","getUserLazy","messageCount","setCount","otherid","waitAllMessage","messageid","bubbleItem","badgeContent","count","ChatDialog","useMutation","sendMessage","userState","setUserState","inputVal","setVal","isMobile","useMediaQuery","bodyRef","useRef","getAllComment","fetchPolicy","getAllMessage","newArr","length","objDiv","current","scrollTop","scrollHeight","document","body","overflow","chatItem","chatOpen","chatHidden","name","header","buttonWrapper","ref","bodyContent","commentItem","nextUID","isthisuser","form","formSticky","onSubmit","preventDefault","receiver","value","onChange","target","placeholder","MobileHeader","mobileHeader","userGroup","MessageItem","curent","scrollIntoView","left","messageGroup","trim","fontSize","boxShadow","ChatListener","GlobalConversation","position","Listener","listener","useSubscription","newC","Math","min","max","Layout","children","paddingBottom","backgroundPosition","backgroundSize","backgroundAttachment","minHeight","Setting","lazy","UserWall","isLocal","openMenu","setOpenMenu","localUser","initConversation","fallback","userInfor","group","fullName","first","second","src","setting","FallBack","PreviewMedia","media","single","many","GetElement","isVideo","match","VideoThumbnail","height","mediaRemain","CommentItem","seeMore","setSeeMore","userinfor","comment","substring","commentInfor","timeConverter","datecreated","marginLeft","UNIX_timestamp","utcSeconds","d","Date","setUTCSeconds","toDateString","Comment","inMediaBrowser","postID","setComment","isLoad","setIsLoaded","getPostComment","postNewComment","elRef","userId","openDrawer","setSwitch","undefined","onPostComment","a","newComment","postid","getPostCommentById","close","comments","isOpen","update","DrawerComment","Drawer","anchor","drawerComment","then","res","formComment","cmt","commentid","ScrollComment","CommentListener","loading","console","log","getComment","gqlURL","createLikeQuery","iconcode","checkLikeStatusQuery","deleteLikeQuery","likePost","like","fetchGQL","checkLikeStatus","deleteLike","query","fetch","method","headers","JSON","stringify","json","err","border","padding","Post","propsStyle","seemore","setSeemore","seeComment","setCommentView","didLike","setLike","isLock","setLock","likeCount","didlike","checkUserLikePost","likecount","setTimeout","clearTimeout","postInfor","title","postContent","behavior","block","inline","parse","like_comment","disabled","userLike","cursor","MediaViewer","setIndex","containerRef","thisDimension","setDimension","navigate","dir","old","changeHandler","newWidth","offsetWidth","newHeight","offsetHeight","window","addEventListener","removeEventListener","Left","alt","back","ctnDimension","Right","forward","Image","image","thisRef","moreWidth","setMoreWidth","onLoad","thisWidth","thisHeight","userSelect","ImageWidth","ImageHeight","Video","video","controls","Show","MediaBrowser","post","setPost","getOnePostQuery","getPostById","getPostInformationById","postWrapper","hasMedia","noMedia","mediaViewer","closeButton","minimize","NewsFeed","posts","setPosts","byUID","currentPost","setCurrent","getAllPost","getUserPost","getLatestPost","getLatestPostByUserID","openBrowser","marginBottom","MyEditor","setValue","editorWrapper","MyFileViewer","files","handleFiles","deleteFile","useCallback","file","fileViewerWrapper","ImageReview","onDelete","setImg","reader","FileReader","event","result","readAsDataURL","draggable","justifyContent","PostEdit","appendPost","editorState","setEditorState","fileRef","addFile","useMedia","appendFile","viewFile","setViewFile","status","setStatus","onChangeInput","triggerFileUploads","click","closeEditor","onPost","FormData","append","API","makePost","newPost","now","catch","hiddenInput","multiple","accept","overlay","editor","userProfile","groupButton","invisible","CheckIn","openEditor","setOpenEditor","userImage","CheckInItem","CheckInStatus","CheckinForm","CheckinButton","checkin","routes","Component","isUserID","params","errorPolicy","error","pageWrapper","CheckInWrapper","NewsFeedWrapper","App","props","exact","DispatchLogin","userFullName","loggedIn","displayName","userDisplayName","TYPE","logInUser","LoginPage","hasAccount","openLoginPage","username","password","dateOfBirth","dateCreatedAccount","toISOString","email","phone","gender","handleUserInput","key","alert","Form","handleLogin","loginExistingUser","handleChange","handleRegister","registerNewUser","Suggest","appId","redirectUri","cssClass","autoLoad","fields","callback","RegisterForm","MainForm","isRequired","input","groupForm","required","LoginForm","defaultState","action","Type","logOutUser","changeAvatar","Settings","queue","found","find","newState","combineReducers","UserReducer","SettingsReducer","middleware","ReduxThunk","store","createStore","reducer","composeWithDevTools","applyMiddleware","host","location","httpLink","HttpLink","uri","wsLink","WebSocketLink","options","reconnect","splitLink","split","definition","getMainDefinition","kind","operation","client","ApolloClient","link","cache","InMemoryCache","Loader","load","setLoad","resumeUserSession","isLoggedIn","setLoggedIn","checkLoggedIn","useLogin","ReactDOM","render","StrictMode","ApolloProvider","getElementById","dev","getHeaders","feedback","Error","loginFacebook","axios","get","getUserById","getEarlierPostByLastId","lastId","getAllPostById","getUserEarlierPostById","setUserAvatar","userCommentPost","getPostLatestComment","updateCommentByLastID","mode"],"mappings":"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","file":"static/js/main.18e01c75.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"pageWrapper\":\"UserPage_pageWrapper__3X4YX\",\"showup\":\"UserPage_showup__2HiG8\",\"CheckInWrapper\":\"UserPage_CheckInWrapper__2Mrh8\",\"NewsFeedWrapper\":\"UserPage_NewsFeedWrapper__1olmX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"HomePage_container__2EfJt\",\"showup\":\"HomePage_showup__3gL5c\"};","export default __webpack_public_path__ + \"static/media/avatar.6537f30a.jpg\";","import api from 'src/lib/API/URL'\nexport function getImageURL(url){\n            const {path}=url\n        \n        \n       return api.img+path\n        \n}\nexport function getAvatarImage(url){\n    \n    if(url?.indexOf('public/')>=0){\n     return api.img+url\n    }\n    return url\n}","import React from 'react'\nimport styles from './Avatar.module.scss'\nimport noAvatar from './avatar.jpg'\nimport { getAvatarImage } from 'src/lib/Ultilities/getURL'\nexport default function Avatar({userAvatar,size=\"small\",round=true,blank=false}) {\n    let imgSize\n    switch (size) {\n        case \"small\":imgSize=styles.small\n            \n            break;\n            case \"medium\":imgSize=styles.medium\n            \n            break;\n            case \"large\":imgSize=styles.large\n            \n            break;\n        default:\n            imgSize=styles.small\n            break;\n    }\n   if(blank){\n    return (\n        <div style={{borderRadius:round?\"\":\"0\",backgroundImage:null}} className={`${styles.avatar} ${imgSize}`} >\n            \n        </div>\n    )\n   }\n   return (\n    <div style={{borderRadius:round?\"\":\"0\",backgroundImage:`url(\"${getAvatarImage(userAvatar)??noAvatar}\")`}} className={`${styles.avatar} ${imgSize}`} >\n        \n    </div>\n)\n}\n","export default __webpack_public_path__ + \"static/media/logo.2163973a.svg\";","\nimport bgRosie from './images/rose.jpg'\nimport bgJennie from './images/jennie.jpg'\n  \n   const  theme={\n       default:{\n            text:'black',\n            backgroud:\"white\",\n            backgroudPost:'white',\n            backgroundImage:null\n\n       },\n        rosie:{\n            text:'var(--text-rosie)',\n            background:'var(--background-rosie)',\n            backgroundPost:'var(--background-post-rosie)',\n            backgroundImage:bgRosie\n        },\n        jennie:{\n            text:'var(--text-jennie)',\n            background:'var(--background-jennie)',\n            backgroundPost:'var(--background-post-jennie)',\n            backgroundImage:bgJennie\n        }\n    }\nexport default theme","export default __webpack_public_path__ + \"static/media/rose.57fba1c8.jpg\";","export default __webpack_public_path__ + \"static/media/jennie.faf3ee6f.jpg\";","import {useState,useEffect} from 'react'\nimport { useSelector } from 'react-redux'\nimport theme from 'src/stylesheets/color'\n\nexport function useTheme(){\n    const index=useSelector(state=>state.settings.theme)\n    \n\n    return theme[index]\n\n\n}","import { gql } from \"@apollo/client\";\n\nconst Query = {\n  GET_USER_INFORMATION: gql`\n    query getUserInformation($id: Int!) {\n      getUserInformation(userid: $id) {\n        userid\n        userfullname\n        userdisplayname\n        picture\n      }\n    }\n  `,\n  GET_LATEST_POST:gql`\n    query{\n\tgetLatestPost{\n    postid\n    userid\n    content\n      datecreated\n      media\n      likecount\n      commentcount\n      embeded\n      \n    user {\n      picture\n      userid\n      userfullname\n      \n    }}\n  \n}\n  `,\n  GET_USER_LATEST_POST:gql`\n   query  getLatestPostByUserID($userid:Int!){\n  getLatestPostByUserID(userid:$userid){\n    postid\n    userid\n    content\n      datecreated\n      media\n      likecount\n      commentcount\n      embeded\n    \n  user {\n    picture\n    userid\n    userfullname\n  }}\n  \n  }\n  `,\n  GET_POST_LATEST_COMMENT:gql`\n  query getPostCommentById($postid:Int!){\n  getPostCommentById(postid:$postid){\n    commentid\n  postid\n  userid\n  content\n  datecreated\n  user {\n    picture\n    userfullname\n    userid\n  }}\n  }\n  `,\n  POST_COMMENT:gql`\n  mutation createComment($userid:Int!,$content:String!,$postid:Int!){\n    createComment(input:{userid:$userid,content:$content,postid:$postid}){\n      content\n      commentid\n      datecreated\n      userid\n      postid\n      user{\n        picture\n        userfullname\n        userid\n      }\n      }\n  }`,\nUPDATE_COMMENT:gql`\n subscription getComment($postid:Int!){\ngetComment(postid:$postid){\n  commentid\n  userid\n  content\n  datecreated\n  \n  user{\n    userid\n    userfullname\n    userdisplayname\n    picture\n  }\n}\n}`,\nLISTEN_MESSAGE:gql`\nsubscription waitAllMessage($userid:Int!){\n   \n  \nwaitAllMessage(userid:$userid){\n  messageid\n  content\n  userid\n  receiver\n  datecreated\n  conversationid\n}\n}`,\nGET_ALL_CONVERSATION:gql`\n   query getAllConversation($userid:Int!) {\ngetAllConversation(userid:$userid){\nconversationid\nuserid1\nuserid2\nlastactivedate\nlastmessage{\n  content\n  receiver\n}}\n}\n`,\nSEND_MESSAGE:gql`\nmutation sendMessage($userid:Int!,$conversationid:Int!,$receiver:Int!,$content:String!){\n  sendMessage(input:{userid:$userid,conversationid:$conversationid,receiver:$receiver,content:$content}){\n    content\n    messageid\n    datecreated\n    userid\n    conversationid\n    receiver\n  }\n}\n`,\nINIT_MESSAGE:gql`\n  mutation initConversation($userid1:Int!,$userid2:Int!){\n      initConversation(input:{userid1:$userid1,userid2:$userid2}){\n              conversationid\n              userid1\n              userid2\n  \n}\n\n}`,\nGET_CONVERSATION_MESSAGE:gql`\nquery getAllMessage($id:Int!){\ngetAllMessage(conversationid:$id){\nmessageid\nuserid\nconversationid\ncontent\nreceiver\n  \n}\n}\n\n`\n\n};\nexport default Query","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport QuestionAnswerOutlinedIcon from '@material-ui/icons/QuestionAnswerOutlined';\nimport { useSelector,useDispatch } from \"react-redux\";\nimport { useQuery,useLazyQuery } from \"@apollo/client\";  \nimport Query from \"src/lib/API/Apollo/Queries\";\nimport styles from \"./Navbar.module.scss\";\nimport UserAvatar from 'src/Components/Avatar'\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n   \n   \n    backgroundColor: theme.palette.background.paper,\n  },\n}));\nfunction MessageHistoryItem({conversation,thisUser}){\n    const [getData,response] = useLazyQuery(Query.GET_USER_INFORMATION);\n    const [user,setUser]=React.useState({})\n    const  dispatch = useDispatch()\n   React.useEffect(()=>{\n       if(conversation.conversationid){\n           const {userid1,userid2}=conversation\n            const otherUser=userid1===thisUser?userid2:userid1;\n            getData({variables:{id:parseInt(otherUser)}})\n       }\n   },[conversation.conversationid,conversation.userid1,conversation.userid2,thisUser])\n\n   const handleClick=()=>{\n    dispatch({type:\"addConversation\",payload:{...conversation,state:'open',force:true}})\n\n\n\n   }\n   React.useEffect(()=>{\n    ;\n    if(response?.data){\n        setUser(response.data.getUserInformation)\n    }\n   },[response])\n    return <div className={styles.wrapper}>\n    <ListItem onClick={handleClick}>\n        <ListItemAvatar>\n          <Avatar>\n            <UserAvatar userAvatar={user.picture} />\n          </Avatar>\n        </ListItemAvatar>\n        <ListItemText primary={user.userfullname} secondary={conversation.lastmessage} />\n      </ListItem>\n    </div>\n}\nfunction FolderList({data,onClose}) {\n  const classes = useStyles();\n  const userid=useSelector(state=>parseInt(state.user.uid))\n\n\n  return (<div onClick={onClose}>\n      <List className={classes.root}>\n      {data.map(item=>(<MessageHistoryItem key={\"history-dropdown-\"+item.conversationid} thisUser={userid} conversation={item}/>))}\n      \n    </List>\n  </div>\n  \n  );\n}\n\nconst MessageHistory=({userid})=>{\n    const Conversation=useSelector(state=>state.Message.Conversation)\n    const GetLatestConversation=useQuery(Query.GET_ALL_CONVERSATION,{variables:{userid:parseInt(userid)}})\n    const [history,setHistory]=React.useState([])\n    const [open,setOpen]=React.useState(false)\n    React.useEffect(()=>{\n        const {data}=GetLatestConversation\n        if(data){\n          setHistory(s=>[...s,...data.getAllConversation])\n        }\n    },[GetLatestConversation])\n    React.useEffect(()=>{\n        setHistory(s=>{\n            const NewState=[...Conversation]\n            s.forEach(conver=>{\n              const found=NewState.findIndex((e=>e.conversationid===conver.conversationid))\n              if(found<0){\n                NewState.push(conver)\n              }\n            })\n\n          return NewState\n        })\n\n    },[Conversation])\n    \n return <div className={styles.messageHistory}>\n   <div tabIndex={1} onClick={()=>{setOpen(s=>!s)}}>\n<QuestionAnswerOutlinedIcon/>\n   </div>\n    <div className={styles.dropdown}>\n       {open&& <FolderList onClose={()=>{setOpen(false)}} data={history} />}\n    </div>\n  </div>\n}\n\nexport default MessageHistory","import React from \"react\";\nimport Avatar from \"src/Components/Avatar\";\nimport styles from \"./Navbar.module.scss\";\nimport { Link } from \"react-router-dom\";\n// icon\nimport logo from \"src/stylesheets/svg/logo.svg\";\n// import IconBadge from \"src/Components/IconBadge\";\n// import notification from \"src/stylesheets/svg/notification.svg\";\n// material ui\nimport { useTheme } from \"src/lib/hooks/useColor\";\n// import { SearchBox } from \"../SearchBox\";\nimport { useSelector } from \"react-redux\";\nimport MessageHistory from \"./MessageHistory\";\nexport default function Navbar({userid}) {\n  const uid = useSelector((state) => state.user.uid);\n  const theme=useTheme()\n  const profileImage=useSelector(state=>state.user.profileImage)\n  return (\n    <header style={{backgroundColor:theme.background,color:theme.text}} className={styles.navbar}>\n      <div className={styles.content}>\n        <div className={styles.groupSearch} style={{display:'flex',alignItems:\"center\"}}>\n          <Link to=\"/\">\n            <Avatar userAvatar={logo} />\n          </Link>\n          {/* <SearchBox /> */}\n        </div>\n\n        <div className={styles.groupNotification}  style={{display:'flex',alignItems:\"center\"}}>\n          {/* <IconBadge icon={notification} /> */}\n         <div style={{marginRight:8}}>\n       \n         <MessageHistory userid={userid}/>\n         </div>\n          {uid && (\n            <Link to={`/user/${uid}`}>\n              <Avatar userAvatar={profileImage}/>\n            </Link>\n          )}\n        </div>\n      </div>\n    </header>\n  );\n}\n\n","export default __webpack_public_path__ + \"static/media/message.2ca51fba.svg\";","import React from \"react\";\nimport styles from \"./ChatBubble.module.scss\";\nimport Avatar from \"../Avatar\";\nimport {Link} from 'react-router-dom'\nimport { useLazyQuery, useMutation, useQuery } from \"@apollo/client\";\nimport Query from \"src/lib/API/Apollo/Queries\";\nimport MinimizeIcon from \"@material-ui/icons/Minimize\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useTheme } from \"src/lib/hooks/useColor\";\nimport { Badge, withStyles, useMediaQuery } from \"@material-ui/core\";\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nconst StyledBadge = withStyles((theme) => ({\n  badge: {\n    right: 0,\n\n    top: 40,\n    transform: \"unset\",\n  },\n}))(Badge);\nexport default function ChatBubble({ conversation, newMessage }) {\n  const dispatch = useDispatch();\n  const onOpen = (data) => {\n    const id = data.conversationid;\n    dispatch({ type: \"openConversation\", payload: id });\n  };\n  const onHide = (id) => {\n    dispatch({ type: \"hideConversation\", payload: id });\n  };\n  const onClose = (id) => {\n    dispatch({ type: \"closeConversation\", payload: id });\n  };\n  return (\n    <div className={styles.container}>\n      <div className={styles.chatGroups}>\n        {conversation\n          .filter((e) => e.state !== \"close\")\n          .map((e, i) => (\n            <ChatDialog\n              newMessage={newMessage}\n              onClose={onClose}\n              onHide={onHide}\n              key={\"chat-\" + i}\n              thisEl={e}\n            />\n          ))}\n      </div>\n      <div className={styles.bubbleContainer}>\n        {conversation\n          .filter((e) => e.state === \"hide\")\n          .map((c, i) => (\n            <Conversation\n              newMessage={newMessage}\n              handleOpen={onOpen}\n              data={c}\n              key={\"cvst-\" + c.conversationid}\n            />\n          ))}\n      </div>\n    </div>\n  );\n}\n\nconst Conversation = ({ data, handleOpen, newMessage }) => {\n  const [message, setMessage] = React.useState(null);\n  const getUserLazy = useLazyQuery(Query.GET_USER_INFORMATION);\n  const userid = useSelector((state) => parseInt(state.user.uid));\n  const [messageCount, setCount] = React.useState(0);\n  React.useEffect(() => {\n    const { userid1, userid2 } = data;\n\n    const otherid = userid === userid1 ? userid2 : userid1;\n    getUserLazy[0]({ variables: { id: otherid } });\n  }, [data, userid]);\n\n  React.useEffect(() => {\n    const isThisConver =\n      newMessage?.waitAllMessage.conversationid === data?.conversationid;\n\n    if (\n      isThisConver &&\n      newMessage.waitAllMessage.messageid !== message?.messageid\n    ) {\n      setMessage(newMessage.waitAllMessage);\n\n      setCount((c) => c + 1);\n    }\n  }, [newMessage, data, message]);\n  React.useEffect(() => {\n    setCount(0);\n  }, []);\n  return (\n    <div\n      className={styles.bubbleItem}\n      onClick={() => {\n        handleOpen(data);\n        setCount(0);\n      }}\n    >\n      <StyledBadge\n        badgeContent={messageCount < 9 ? data?.count : \"9+\"}\n        color=\"secondary\"\n      >\n        <Avatar\n          userAvatar={getUserLazy[1]?.data?.getUserInformation.picture}\n          size=\"medium\"\n        />\n      </StyledBadge>\n    </div>\n  );\n};\n\nconst ChatDialog = ({ onHide, thisEl, onClose, newMessage }) => {\n  const [message, setMessage] = React.useState([]);\n  const userid = useSelector((state) => parseInt(state.user.uid));\n  const [sendMessage] = useMutation(Query.SEND_MESSAGE);\n  const getUserLazy = useLazyQuery(Query.GET_USER_INFORMATION);\n  const [userState, setUserState] = React.useState({});\n  const [inputVal, setVal] = React.useState(\"\");\n  const isMobile = useMediaQuery(\"(max-width:600px)\");\n  const theme = useTheme();\n  const bodyRef = React.useRef(null);\n  const getAllComment = useQuery(Query.GET_CONVERSATION_MESSAGE, {\n    variables: { id: thisEl.conversationid },\n    fetchPolicy: \"no-cache\",\n  });\n  // load on mount\n  React.useEffect(() => {\n    const { data } = getAllComment;\n\n    if (data?.getAllMessage) {\n      const newArr = [...data.getAllMessage];\n      setMessage((s) => [...newArr]);\n    }\n  }, [getAllComment]);\n\n  React.useEffect(() => {\n    const isThisConver =\n      newMessage?.waitAllMessage.conversationid === thisEl.conversationid;\n    if (isThisConver) {\n      if (message.length > 0) {\n        if (\n          newMessage?.waitAllMessage.messageid !==\n          message[message.length - 1]?.messageid\n        ) {\n          setMessage((c) => [...c, newMessage.waitAllMessage]);\n        }\n      } else {\n        setMessage([newMessage?.waitAllMessage ?? [...[]]]);\n      }\n    }\n  }, [newMessage, thisEl, message]);\n  React.useEffect(() => {\n    const { userid1, userid2 } = thisEl;\n\n    const otherid = userid === userid1 ? userid2 : userid1;\n    getUserLazy[0]({ variables: { id: otherid } });\n  }, [thisEl, userid]);\n\n  React.useEffect(() => {\n    if (getUserLazy[1]?.data) {\n      setUserState(getUserLazy[1]?.data.getUserInformation);\n    }\n  }, [getUserLazy]);\n\n  React.useEffect(() => {\n    const scrollToBottom = (objDiv) => {\n      objDiv.scrollTop = objDiv.scrollHeight;\n    };\n    scrollToBottom(bodyRef.current);\n  }, [message]);\n  React.useEffect(() => {\n    if (isMobile && thisEl.state === \"open\") {\n      document.body.style.overflow = \"hidden\";\n    } else {\n      document.body.style.overflow = \"\";\n    }\n    return () => {\n      document.body.style.overflow = \"\";\n    };\n  }, [isMobile, thisEl.state]);\n  const onSubmit = (e) => {\n    e.preventDefault();\n\n    const receiver =\n      thisEl.userid1 === userid ? thisEl.userid2 : thisEl.userid1;\n\n    if (receiver && userid) {\n      sendMessage({\n        variables: {\n          userid: userid,\n          receiver: receiver,\n          conversationid: thisEl.conversationid,\n          content: inputVal.length > 0 ? inputVal : \"👍\",\n        },\n      });\n      setVal(\"\");\n    }\n  };\n\n  return (\n    <div\n      className={`${styles.chatItem} ${\n        thisEl.state === \"open\" ? styles.chatOpen : styles.chatHidden\n      }`}\n    >\n      {isMobile && userState?.userid?<MobileHeader onClose={()=>{onClose(thisEl.conversationid)}} onHide={()=>{onHide(thisEl.conversationid)}} user={{name:userState?.userfullname,id:userState.userid,picture:userState?.picture}}/>:(\n      <div\n        className={styles.header}\n        style={{ backgroundColor: theme.backgroundPost }}\n      >\n        <p>{userState?.userfullname || \"loading\"}</p>\n\n        <div className={styles.buttonWrapper}>\n          <MinimizeIcon\n            onClick={() => {\n              onHide(thisEl.conversationid);\n            }}\n          />\n        </div>\n        <div className={styles.buttonWrapper}>\n          <CloseIcon\n            onClick={() => {\n              onClose(thisEl.conversationid);\n            }}\n          />\n        </div>\n      </div>)}\n      <div className={styles.body} ref={bodyRef}>\n        <div className={styles.bodyContent} ref={bodyRef}>\n          {message.map((e, i) => (\n            <div\n              className={styles.commentItem}\n              key={\"chat-\" + e.messageid + \" \" + thisEl.conversationid}\n            >\n              <MessageItem\n                nextUID={\n                  i < message.length - 1\n                    ? message[i + 1].userid - userid ===\n                      message[i].userid - userid\n                    : false\n                }\n                avatar={userState?.picture || null}\n                text={e.content}\n                isthisuser={userid === e.userid}\n              />\n            </div>\n          ))}\n        </div>\n       \n      </div>\n      <div className={styles.form}>\n        <form\n          className={\n            isMobile && thisEl.state === \"open\" ? styles.formSticky : \"\"\n          }\n          onSubmit={onSubmit}\n        >\n          <input\n            value={inputVal}\n            onChange={(e) => {\n              setVal(e.target.value);\n            }}\n            type=\"text\"\n            placeholder=\"enter your message\"\n          />\n          <button\n            style={{\n              backgroundColor: inputVal.length > 0 ? \"\" : \"transparent\",\n            }}\n            className=\"button\"\n            type=\"submit\"\n          >\n            {inputVal.length > 0 ? \"send\" : \"👍\"}\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n};\nconst MobileHeader=({user,onClose,onHide})=>{\n  return <div className={styles.mobileHeader}>\n      <div  onClick={onHide}>\n    <ArrowBackIcon/>\n      </div>\n      <div onClick={onHide} className={styles.userGroup}>\n      <Link to={`/user/${user.id}`}>\n      <Avatar userAvatar={user?.picture}/>\n        <p>{user?.name}</p></Link>\n      </div>\n      <div>\n    <CloseIcon onClick={onClose}/>\n      </div>\n  </div>\n}\nconst MessageItem = ({ text, isthisuser, avatar, nextUID }) => {\n  const ref = React.useRef();\n  React.useEffect(() => {\n    if (ref?.curent) {\n      ref.current.scrollIntoView();\n    }\n  }, []);\n  return (\n    <div\n      ref={ref}\n      className={`${isthisuser ? styles.right : styles.left} ${\n        styles.messageGroup\n      }`}\n    >\n      {!isthisuser ? (\n        <Avatar blank={nextUID} userAvatar={avatar} size=\"small\" />\n      ) : (\n        <></>\n      )}\n      <div>\n        <p\n          style={\n            text.trim() === \"👍\"\n              ? {\n                  fontSize: \"2rem\",\n                  background: \"transparent\",\n                  boxShadow: \"unset\",\n                }\n              : {}\n          }\n        >\n          {text}\n        </p>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { useSubscription } from \"@apollo/client\";\nimport Query from \"src/lib/API/Apollo/Queries\";\nimport ChatBubble from \"../ChatBubble\";\nimport { useSelector, useDispatch } from \"react-redux\";\nexport default function ChatListener({ userid }) {\n\n  const GlobalConversation = useSelector((state) => state.Message.Conversation);\n \n\n  return (\n    <div style={{ position: \"relative\" }}>\n    \n      {GlobalConversation && (\n        <Listener\n          conversation={GlobalConversation}\n          userid={userid}\n          \n        />\n      )}\n    </div>\n  );\n}\n\nconst Listener = ({ userid, conversation }) => {\n  const listener = useSubscription(Query.LISTEN_MESSAGE, {\n    variables: { userid },\n  });\n  const dispatch = useDispatch();\n \n  React.useEffect(() => {\n    if (listener?.data) {\n\n      const newMessage = listener.data.waitAllMessage;\n      const { userid, receiver } = newMessage;\n      const newC = {\n        conversationid: newMessage.conversationid,\n\n        lastmessage: newMessage.content,\n        userid1: Math.min(userid, receiver),\n        userid2: Math.max(userid, receiver),\n        count:1,\n        state: \"hide\",\n      };\n      \n\n        dispatch({ type: \"addConversation\", payload: newC });\n      \n    }\n  }, [listener.data]);\n\n  return (\n    <>\n      <ChatBubble conversation={conversation} newMessage={listener.data} />\n    </>\n  );\n};\n","\nimport React from 'react'\nimport Navbar from 'src/Components/Navbar'\nimport { useTheme } from 'src/lib/hooks/useColor'\nimport message from 'src/stylesheets/svg/message.svg'\nimport { useSelector } from 'react-redux'\nimport ChatListener from '../ChatListener'\nexport default function Layout({children}) {\n    const userid=useSelector(state=>state.user.uid)\n    const theme=useTheme()\n    const style={\n        backgroundColor:theme.background,\n        paddingBottom:'10vh',\n        backgroundImage:`url(\"${theme.backgroundImage}\")`,\n        backgroundPosition:\"left top\",\n        backgroundSize:\"cover\",\n        backgroundAttachment:\"fixed\",\n        minHeight:\"100vh\"\n    }\n    return (\n        <div style={style}>\n                      {userid&&<ChatListener  userid={userid}/>}\n\n            <Navbar userid={userid}/>\n            {children}\n        </div>\n    )\n}\n","export default __webpack_public_path__ + \"static/media/setting.343a5657.svg\";","import React,{Suspense} from 'react'\nimport styles from './UserWall.module.scss'\nimport Avatar from '../Avatar'\nimport setting from 'src/stylesheets/svg/setting.svg'\nimport { useSelector } from 'react-redux'\nimport { useTheme } from 'src/lib/hooks/useColor'\nimport { useDispatch } from 'react-redux'\nimport { useMutation } from '@apollo/client'\nimport Query from 'src/lib/API/Apollo/Queries'\n\nconst Setting=React.lazy(()=>import('src/Components/SettingPanel'))\nexport default function UserWall({user,isLocal}) {\n    const dispatch = useDispatch()\n    const theme=useTheme()\n    const [openMenu,setOpenMenu]=React.useState(false)\n    const localUser=useSelector(state=>state.user)\n    const [initConversation,{data}]=useMutation(Query.INIT_MESSAGE)\n\n    const onInitConversation=()=>{\n        const userid=parseInt(localUser.uid)\n        const receiver=parseInt(user.userid)\n        if(userid!==receiver){\n            const first=Math.min(userid,receiver)\n            const second=Math.max(userid,receiver)\n            initConversation({variables:{userid1:first,userid2:second}})\n        }\n        \n\n    }\n    React.useEffect(()=>{\n        if(data?.initConversation){\n            dispatch({type:\"addConversation\",payload:{...data.initConversation,force:true,state:'open'}})\n        }\n    },[data])\n    return (\n        <div className={styles.container}> \n        <Suspense fallback={<FallBack/>}>\n\n        <Setting open={openMenu} onClose={()=>{setOpenMenu(false)}}/>\n        </Suspense>\n        <div className={styles.userInfor} style={{backgroundColor:`rgba(${theme.background},.5)`}}>\n       <div className={styles.group}>\n       <Avatar size=\"large\" userAvatar={isLocal?localUser?.profileImage:user?.picture}/>\n        <p>{isLocal?localUser?.fullName:user?.userfullname}</p>\n        {!isLocal&&        <button className=\"button\" onClick={onInitConversation}>message</button>}\n       </div>\n        </div>\n           <div className={styles.background} >\n               <button onClick={()=>{setOpenMenu(true)}}><img width={35} src={setting}/></button>\n           </div>\n        </div>\n    )\n}\n\nconst FallBack=()=>{\n    return <></>\n}","export default __webpack_public_path__ + \"static/media/reaction.61917291.svg\";","export default __webpack_public_path__ + \"static/media/userreaction.ab536510.svg\";","import React from 'react'\nimport { getImageURL } from 'src/lib/Ultilities/getURL';\nimport styles from './Preview.module.scss'\nexport default function PreviewMedia({media,onOpen,handleOpen}) {\n    return (\n        <div onClick={onOpen} className={`${styles.container} ${media.length===1?styles.single:styles.many}`}>\n            <GetElement media={media[0]}/>\n            {media.length>=2&&<GetElement left={media.length-2} media={media[1]}/>}\n            \n        </div>\n    )\n}\n\n\n\nconst GetElement=({media,left})=>{\n        const isVideo=media.type.match(/^video/)\n           \n        return <div className={styles.VideoThumbnail} style={{backgroundImage:isVideo?'':`url(\"${getImageURL(media)}\")`,width:'100%',height:'100%'}}>\n\n            {left>0&&<div className={styles.mediaRemain}>\n                <p>{left}+</p>\n            </div>}\n        </div>\n    }","import React from \"react\";\nimport Avatar from \"../Avatar\";\nimport styles from \"./Comment.module.scss\";\nimport { Link } from \"react-router-dom\";\nconst wordLimit = 20;\nexport default function CommentItem({ data }) {\n  const [user,setUser]=React.useState({})\n\nReact.useEffect(()=>{\n      setUser(data.user)\n    \n},[data])\n\n  const [seeMore, setSeeMore] = React.useState(false);\n  if (data?.content) {\n    return (\n      <div className={styles.commentItem}>\n<div className={styles.userinfor}>\n<Link to={`/user/${data.userid}`}>\n<Avatar userAvatar={user?.picture} />\n        </Link>\n  </div>        \n        <div>\n        <p className={styles.comment}>\n          <Link to={`/user/${data.userid}`}>\n        <strong>{user?.userfullname}</strong>\n        </Link>\n        <br/>\n          {data.content.length > wordLimit && !seeMore\n            ? data.content.substring(0, wordLimit)\n            : data.content}\n          {data.content.length > wordLimit && (\n            <span\n              onClick={() => {\n                setSeeMore((s) => !s);\n              }}\n              style={{ color: \"gray\" }}\n            >\n              ...see {seeMore ? \"less\" : \"more\"}\n            </span>\n          )}\n          <br/>\n                              <span className={styles.commentInfor}>{timeConverter(data.datecreated)} <span style={{color:\"gray\",marginLeft:20}}>replies</span></span>\n\n        </p>\n        \n\n        </div>\n\n        \n      </div>\n    );\n  }\n  return <></>;\n}\n\nfunction timeConverter(UNIX_timestamp){\n  var utcSeconds = UNIX_timestamp/1000;\nvar d = new Date(0); // The 0 there is the key, which sets the date to the epoch\nd.setUTCSeconds(utcSeconds);\nreturn d.toDateString()\n}","import React from \"react\";\nimport styles from \"./Comment.module.scss\";\nimport { Drawer, useMediaQuery } from \"@material-ui/core\";\nimport CommentItem from \"./CommentItem\";\nimport { useSelector } from \"react-redux\";\nimport { useLazyQuery ,useMutation} from \"@apollo/client\";\nimport Query from \"src/lib/API/Apollo/Queries\";\nimport { useSubscription } from \"@apollo/client\";\n\n\nexport default function Comment({ inMediaBrowser, onOpen, onClose, postID }) {\n  const [comment, setComment] = React.useState([]);\n  const [isLoad, setIsLoaded] = React.useState(false);\n\n  \n  const getPostComment=useLazyQuery(Query.GET_POST_LATEST_COMMENT,{  fetchPolicy: \"no-cache\"\n})\n  const postNewComment=useMutation(Query.POST_COMMENT,{fetchPolicy:'no-cache'})\n  const elRef = React.useRef(null);\n  const userId = useSelector((state) => state.user.uid);\n const [openDrawer,setSwitch]=React.useState(false)\n const isMobile = useMediaQuery(\"(max-width:1000px)\");\n\n  React.useEffect(()=>{\n       if(isMobile!==undefined && isMobile!==null){\n        if(isMobile&&onOpen&&!inMediaBrowser){\n          setSwitch(true)\n        }else{\n          setSwitch(false)\n        }\n       }\n  },[isMobile,inMediaBrowser,onOpen])\n\n  React.useEffect(() => {\n    if (onOpen) {\n      setIsLoaded(true);\n    }\n  }, [onOpen]);\n  const onPostComment = (userId, postID) => {\n    return async (comment) => {\n      const newComment = {\n        comment: { content: comment, userid: userId, postid: postID },\n      };\n      postNewComment[0]({variables:newComment.comment})\n  \n    };\n  };\n  React.useEffect(() => {\n    if (isLoad) {\n      getPostComment[0]({variables:{postid:postID}})\n    }\n  }, [isLoad, postID]);\n  React.useEffect(()=>{\n    const data=getPostComment[1].data\n    if(data){\n      setComment(s=>([...s,...data.getPostCommentById]))\n    }\n  },[getPostComment[1].data])\n  if (comment) {\n    return (\n      <div\n        ref={elRef}\n        className={`${styles.container} ${\n          onOpen ? styles.open : styles.close\n        } ${inMediaBrowser ? styles.inMediaBrowser : \"\"}`}\n      >\n\n        {onOpen?openDrawer?<DrawerComment\n            onPostComment={onPostComment(userId, postID)}\n            comments={comment}\n            onClose={onClose}\n            isOpen={true}\n          />:\n          <ScrollComment\n            onPostComment={onPostComment(userId, postID)}\n            comments={comment}\n            onClose={onClose}\n          />:<></>}\n        \n          \n        \n      \n       \n        {onOpen&&postID&&<CommentListener update={setComment} postid={postID}/>}\n      </div>\n    );\n  }\n\n  return <p></p>;\n}\n\nconst DrawerComment = ({ isOpen, onClose, comments, onPostComment }) => {\n  const ref = React.useRef(null);\n  const onSubmit = (e) => {\n    e.preventDefault();\n    if (ref.current.value.trim() !== \"\") {\n      onPostComment(ref.current.value).then((res) => {\n        ref.current.value = \"\";\n      });\n    }\n  };\n  return (\n    <Drawer anchor={\"bottom\"} open={isOpen} onClose={onClose}>\n      <div className={styles.drawerComment}>\n        <form onSubmit={onSubmit} className={styles.formComment}>\n          <input ref={ref} type=\"text\" />\n          <button type=\"submit\">post</button>\n        </form>\n        {comments.map((cmt) => (\n          <CommentItem\n            data={cmt}\n            key={`comment-drawer-${cmt.commentid}-${cmt.postid}-${cmt.userid}`}\n          />\n        ))}\n      </div>\n    </Drawer>\n  );\n};\nconst ScrollComment = ({ comments, onClose, onPostComment }) => {\n  const ref = React.useRef(null);\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n    if (ref.current.value.trim() !== \"\") {\n      onPostComment(ref.current.value).then((res) => {\n        ref.current.value = \"\";\n      });\n    }\n  };\n  return (\n    <div>\n      <form onSubmit={onSubmit} className={styles.formComment}>\n        <input ref={ref} type=\"text\" />\n        <button type=\"submit\">post</button>\n      </form>\n      {comments.map((cmt) => (\n        <CommentItem\n          key={`comment-scroll-${cmt.commentid}-${cmt.postid}-${cmt.userid}`}\n          data={cmt}\n        />\n      ))}\n\n      <h4>load older comment</h4>\n    </div>\n  );\n};\nconst CommentListener=({postid,update})=>{\n  const {data,loading}=useSubscription(Query.UPDATE_COMMENT,{variables:{postid:postid}})\n React.useEffect(()=>{\n    console.log(data);\n    if(data?.getComment){\n      update(s=>([data.getComment,...s]))\n    }\n  },[data])\n  return <></>\n}","\n\nexport function timeConverter(UNIX_timestamp){\n    var utcSeconds = UNIX_timestamp/1000;\n  var d = new Date(0); // The 0 there is the key, which sets the date to the epoch\n  d.setUTCSeconds(utcSeconds);\n  return d.toDateString()\n  }","import url from \"./URL\";\nconst gqlURL = url.img + \"graphql\";\n\n\nconst createLikeQuery=({userid,postid,iconcode})=>`mutation{\n\tcreateLike(input:{userid:${userid},postid:${postid},iconcode:${iconcode}}){\n   \n\n      change\n      status\n    \n  }\n}`\nconst checkLikeStatusQuery=({userid,postid})=>`query{\n  checkUserLikePost(input:{userid:${userid},postid:${postid}}) {\n    didlike\n  }\n}`\nconst deleteLikeQuery=({userid,postid})=>`mutation{\n  deleteLike(input:{userid:${userid},postid:${postid}}){\n    \n\n    change\n      status\n    \n  }\n\n\n}`\n\nconst getOnePostQuery=(postid)=>`\t{\n  getPostInformationById(postid:${postid}){\n    postid\n    userid\n    content\n    media\n    datecreated\n    likecount\n    embeded\n    \n    user{\n      userfullname\n      userid\n      userdisplayname\n      picture\n    }\n  }\n}`\n\n\n\nconst getPostById = (postid) => {\n  try {\n    return fetchGQL(getOnePostQuery(postid));\n  } catch (err) {\n    return { err: err };\n  }\n};\n\n\nconst likePost=async(like)=>{\n  return await fetchGQL(createLikeQuery(like))\n}\nconst checkLikeStatus=async({userid,postid})=>{\n    return await fetchGQL(checkLikeStatusQuery({userid,postid}))\n}\nconst deleteLike=async({userid,postid})=>{\n  return await fetchGQL(deleteLikeQuery({userid,postid}))\n}\n\n// helper\nconst fetchGQL = async(query) => {\n  try{\n    return await fetch(gqlURL, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ query: query }),\n    })\n      .then((response) => {\n        return response.json();\n      })\n      \n  }catch(e){\n    return {err:e}\n  }\n};\nexport {\n \n  likePost,\n  checkLikeStatus,\n  deleteLike,\n  getPostById\n  \n};\n","import React, { useState } from \"react\";\nimport styles from \"./Post.module.scss\";\nimport Avatar from \"../Avatar\";\nimport like from \"src/stylesheets/svg/reaction.svg\";\nimport userLike from \"src/stylesheets/svg/userreaction.svg\";\nimport { Link } from \"react-router-dom\";\nimport PreviewMedia from \"../PreviewMedia\";\nimport Comment from \"../Comment\";\nimport { Badge, withStyles } from \"@material-ui/core\";\nimport { timeConverter } from \"src/lib/Ultilities/Format\";\nimport { likePost, checkLikeStatus, deleteLike } from \"src/lib/API/Graphql\";\nimport { useSelector } from \"react-redux\";\nimport { useTheme } from \"src/lib/hooks/useColor\";\nconst StyledBadge = withStyles((theme) => ({\n  badge: {\n    right: 5,\n    top: 30,\n    border: `2px solid ${theme.palette.background.paper}`,\n    padding: \"0 4px\",\n    backgroundColor: \"#fd0061\",\n  },\n}))(Badge);\n\nexport default function Post({\n  data,\n  onOpen,\n  type = \"minimal\",\n  propsStyle,\n}) {\n  const [seemore, setSeemore] = useState(false);\n  const [seeComment, setCommentView] = useState(type!==\"minimal\");\n  const [didLike, setLike] = useState(null);\n  const [isLock, setLock] = useState(false);\n  const [likeCount, setCount] = useState(0);\n  const userid = useSelector((state) => state.user.uid);\n  const theme=useTheme()\n  React.useEffect(() => {\n    if (userid && data.postid) {\n      checkLikeStatus({ userid: userid, postid: data.postid }).then((res) => {\n        if (res.data) {\n          const didlike = res.data.checkUserLikePost.didlike;\n          if (didlike) {\n            setLike(true);\n          } else {\n            setLike(false);\n          }\n          setCount(parseInt(data.likecount));\n        } else {\n          setLike(null);\n        }\n      });\n    }\n  }, [data]);\n\n  React.useEffect(() => {\n    if (isLock) {\n      if (didLike === false) {\n        likePost({ userid: userid, postid: data.postid, iconcode: 1 }).then(\n          (res) => {\n            if (res.data) {\n              setLike(true);\n\n              setCount((c) => c + 1);\n            }\n          }\n        );\n      } else if (didLike === true) {\n        deleteLike({ userid: userid, postid: data.postid }).then((res) => {\n          if (res.data) {\n            setLike(false);\n\n            setCount((c) => c - 1);\n          }\n        });\n      }\n    }\n  }, [isLock]);\n  // unlock like button\n  React.useEffect(() => {\n    \n    let a;\n    if (didLike !== null) {\n      a = setTimeout(() => {\n        setLock(false);\n      }, 200);\n    }\n    return () => {\n      clearTimeout(a);\n    };\n  }, [didLike]);\n  if (data) {\n    return (\n      <>\n        <div style={{...propsStyle,backgroundColor:theme.backgroundPost,color:theme.text}} className={styles.container} tabIndex=\"1\">\n          {/* user infor */}\n\n          <div className={styles.userInfor}>\n            <Link to={`/user/${data?.userid}`}>\n              <Avatar userAvatar={data?.user?.picture ?? null} size=\"medium\" />\n            </Link>\n            {/* user name and date created */}\n            <div className={styles.postInfor}>\n              <Link to={`/user/${data?.userid}`}>\n                <p>{data?.user?.userfullname || \"\"}</p>\n              </Link>\n              <p>{timeConverter(data.datecreated)}</p>\n            </div>\n          </div>\n\n          {/* post */}\n          <div title=\"click to open post\" className={styles.postContent}>\n            <p>\n              {!seemore ? data.content.substring(0, 200) : data.content}\n              <span\n                style={{\n                  color: \"gray\",\n                  display: data.content.length < 200 ? \"none\" : \"\",\n                }}\n                onClick={(e) => {\n                  setSeemore((state) => !state);\n\n                  if (seemore) {\n                    setTimeout(() => {\n                      e.target.scrollIntoView({\n                        behavior: \"smooth\",\n                        block: \"end\",\n                        inline: \"nearest\",\n                      });\n                    }, 50);\n                  }\n                }}\n              >\n                ...see {seemore ? \"less\" : \"more\"}\n              </span>\n            </p>\n            {data?.media !== \"[]\" && type === \"minimal\" ? (\n              <PreviewMedia onOpen={onOpen} media={JSON.parse(data.media)} />\n            ) : (\n              <></>\n            )}\n          </div>\n          {/* likes and comments */}\n          <div className={styles.like_comment}>\n            <button\n              disabled={isLock || didLike === null}\n              className=\"button-none\"\n              onClick={() => {\n                setLock(true);\n              }}\n            >\n              <StyledBadge\n                badgeContent={likeCount}\n                color=\"secondary\"\n              >\n                <Avatar userAvatar={didLike ? userLike : like} round={false} />\n              </StyledBadge>\n            </button>\n\n            <div></div>\n            <p\n              style={{ cursor: \"pointer\" }}\n              onClick={() => {\n                \n                  setCommentView((s) => !s);\n                \n              }}\n            >\n              comments\n            </p>\n          </div>\n          <Comment\n            userId={data.userid}\n            postID={data.postid}\n            onOpen={seeComment}\n            onClose={() => {\n              setCommentView(false);\n            }}\n            inMediaBrowser={type !== \"minimal\"}\n          />\n        </div>\n      </>\n    );\n  }\n  return <></>;\n}\n","export default __webpack_public_path__ + \"static/media/back.bd68ef98.svg\";","export default __webpack_public_path__ + \"static/media/forward.45007aa6.svg\";","import React from \"react\";\nimport styles from \"./MediaViewer.module.scss\";\nimport { getImageURL } from \"src/lib/Ultilities/getURL\";\nimport back from \"src/stylesheets/svg/back.svg\";\nimport forward from \"src/stylesheets/svg/forward.svg\";\nexport default function MediaViewer({ media }) {\n  const [index, setIndex] = React.useState(0);\n  const containerRef = React.useRef(null);\n  const [thisDimension,setDimension]=React.useState({width:0,height:0})\n  const navigate = (dir) => () => {\n    setIndex((old) =>\n      dir === \"r\" ? Math.min(old + 1, media.length - 1) : Math.max(old - 1, 0)\n    );\n  };\n  React.useEffect(() => {\n    \n      const changeHandler=()=>{\n        \n        \n          const newWidth=containerRef.current.offsetWidth;\n          const newHeight=containerRef.current.offsetHeight;\n            setDimension({width:newWidth,height:newHeight})\n        \n      }\n      changeHandler()\n      if(typeof window){\n        window.addEventListener('resize',changeHandler)\n\n      }\n      return()=>{\n        if(typeof window){\n          window.removeEventListener('resize',changeHandler)\n\n        }\n      }\n  }, [index]);\n  \n  return (\n    <div className={styles.container} ref={containerRef}>\n      {index > 0 && (\n        <button onClick={navigate(\"l\")} className={styles.Left}>\n          <img alt=\"go back\" src={back} />\n        </button>\n      )}\n      <Show ctnDimension={thisDimension}  media={media[index]} />\n      {index < media.length - 1 && (\n        <button onClick={navigate(\"r\")} className={styles.Right}>\n          <img alt=\"go forward\" src={forward} />\n        </button>\n      )}\n    </div>\n  );\n}\nconst Image = ({ image ,ctnDimension}) => {\n  const thisRef=React.useRef(null)\n  const [moreWidth,setMoreWidth]=React.useState(false)\n  return (\n    <img\n        ref={thisRef}\n        onLoad={(e)=>{\n        const image=e.target\n        const thisWidth=image.offsetWidth\n        const thisHeight=image.offsetHeight\n        if(thisWidth > ctnDimension.width){\n          setMoreWidth(true)\n        }\n        if(thisHeight>ctnDimension.height){\n          setMoreWidth(false)\n        }\n      \n        }}\n        style={{userSelect:\"none\"}}\n      alt=\"user post\"\n      className={moreWidth?styles.ImageWidth:styles.ImageHeight}\n      src={getImageURL(image)}\n    />\n  );\n};\n\nconst Video = ({ video }) => {\n  return (\n    <video\n      controls\n      className={styles.Video}\n      src={getImageURL(video)}\n    />\n  );\n};\nconst Show = ({ media ,ctnDimension}) => {\n  if (media.type.match(/^video/)) {\n    return <Video video={media} />;\n  }\n  return <Image ctnDimension={ctnDimension}  image={media} />;\n}\n\n","export default __webpack_public_path__ + \"static/media/minimize.2ade6ffd.svg\";","import React,{useState} from 'react'\nimport style from './MediaBrowser.module.scss'\nimport Post from '../Post';\nimport MediaViewer from '../MediaViewer'\nimport minimize from 'src/stylesheets/svg/minimize.svg'\nimport {getPostById} from 'src/lib/API/Graphql'\nexport default function MediaBrowser({open=false,onClose,postid=null}) {\n    const [post,setPost]=useState({})\n    React.useEffect(()=>{\n        if(typeof document){\n           if(open){\n            document.body.style.overflow = 'hidden';\n           }else{\n            document.body.style.overflow = '';\n           }\n\n        }\n    },[open])\n    React.useEffect(()=>{\n        if(postid>=0){\n            getPostById(postid).then(res=>{\n                if(res.data){\n                    \n                        setPost(res.data.getPostInformationById)\n                    \n                }\n            })\n        }\n        return ()=>{\n            document.body.style.overflow = '';\n        }\n    },[open,postid])\n    if(open){\n        return (<>\n        \n         <div  className={style.container}>\n              {post.postid&& <div className={`${style.postWrapper} ${post.media!==\"[]\"?style.hasMedia:style.noMedia}`}>\n               {post?.media!==\"[]\"&&<div className={style.mediaViewer}>\n                <button className={style.closeButton} onClick={onClose}>\n                    <img src={minimize} alt=\"exit media\"/>\n                </button>\n\n                <MediaViewer media={JSON.parse(post.media)}/>\n                </div>}\n                   <Post type=\"detail\" data={post}/>\n               </div>}\n            </div>\n        </>\n           \n        )\n    }\n    return <></>\n}\n","import React, { useState, useEffect } from \"react\";\nimport Post from \"src/Components/Post\";\nimport MediaBrowser from \"../MediaBrowser\";\n// import InfiniteScroll from \"react-infinite-scroll-component\";\nimport API from \"src/lib/API/UserAPI\";\nimport { useLazyQuery } from \"@apollo/client\";\nimport Query from \"src/lib/API/Apollo/Queries\";\nexport default function NewsFeed({ posts, setPosts,byUID=false,uid }) {\n  const [open, setOpen] = useState(false);\n  const [currentPost, setCurrent] = useState(null);\n  const [hasMore,setHasMore]=useState(true)\n  const getAllPost=useLazyQuery(Query.GET_LATEST_POST,{fetchPolicy: \"no-cache\"})\n  const getUserPost=useLazyQuery(Query.GET_USER_LATEST_POST,{fetchPolicy: \"no-cache\"})\n  const onUpdate = () => {\n    if (posts.length > 0) {\n        const  lastId = posts[posts.length - 1].postid;\n      if(!uid || !byUID){\n        API.getEarlierPostByLastId(lastId).then((res) => {\n          setPosts((state) => [...state, ...res.rows]);\n  \n          if (res.rows.length < 10) {\n            setHasMore(false);\n          }\n        })\n      }\n      else{\n          API.getUserEarlierPostById(uid,lastId).then(res=>{\n            setPosts((state) => [...state, ...res.rows]);\n  \n            if (res.rows.length < 10) {\n              setHasMore(false);\n            }\n          })\n      }\n    }\n\n    }\n  \n     useEffect(()=>{\n        if(uid>=0 && byUID===true){\n           \n            getUserPost[0]({variables:{userid:uid}}) \n           \n        }else{\n            getAllPost[0]()\n        }\n    },[uid,byUID])\n    React.useEffect(()=>{\n      const data=getAllPost[1].data\n      if(data){\n        setPosts(data.getLatestPost)\n      }\n    },[getAllPost])\n    React.useEffect(()=>{\n      const data=getUserPost[1].data\n      if(data){\n         setPosts(data.getLatestPostByUserID)\n      }\n    },[getUserPost])\n  const openBrowser = (index) => {\n    return () => {\n      setOpen(true);\n      setCurrent(posts[index].postid);\n    };\n  };\n  if (posts.length>0) {\n    return (\n      <div>\n        {currentPost&&<MediaBrowser\n          open={open}\n          postid={currentPost}\n          \n          onClose={() => {\n            setOpen(false);\n          }}\n        />}\n        \n          {posts.map((data, index) => (\n            <Post\n                propsStyle={{marginBottom:17}}\n              onOpen={openBrowser(index)}\n              key={\"post-id-\" + data.postid}\n              data={data}\n            />\n          ))}\n       \n      </div>\n    );\n  }\n  return <></>;\n}\n","export default __webpack_public_path__ + \"static/media/picture.b0c992ca.svg\";","export default __webpack_public_path__ + \"static/media/video.f3b3fb0e.svg\";","import React, { useRef ,useState,useEffect,useCallback} from \"react\";\nimport styles from \"./PostEdit.module.scss\";\nimport { useMedia } from \"src/lib/hooks/useMedia\";\nimport {Badge} from '@material-ui/core'\nimport API from 'src/lib/API/UserAPI'\nimport {useSelector} from 'react-redux'\nimport {useTheme} from 'src/lib/hooks/useColor'\nfunction MyEditor({value,setValue}) {\n  \n  return (\n    <div className={styles.editorWrapper}>\n      <textarea\n        value={value}\n        onChange={(e) => {\n          setValue(e.target.value);\n        }}\n      />\n    </div>\n  );\n}\nfunction MyFileViewer({files,handleFiles}) {\n    const deleteFile=useCallback((index)=>{\n      return ()=>{\n          handleFiles(state=>state.filter((file,i)=>index!==i))\n      }\n  },[handleFiles])\n  return <div className={styles.fileViewerWrapper}>\n      {files.map((file,index)=><ImageReview key={'file+'+index} onDelete={deleteFile(index)} index={index+1} file={file}/>)}\n  </div>;\n}\n\nfunction ImageReview({file,index,onDelete}){\n    const [img,setImg]=useState('')\n    const bgStyle={\n        backgroundPosition:\"center\",\n        backgroundSize:'cover',\n        display:'flex',\n        alignItems:'flex-end',\n        justifyContent:\"space-between\"\n    }\n    useEffect(() => {\n        const reader = new FileReader();\n  reader.addEventListener('load', (event) => {\n   const src=(event.target.result);\n   \n    setImg(src)\n  },[]);\n  reader.readAsDataURL(file);\n    }, [file])\n        return <div draggable style={{backgroundImage:`url(${img})`,...bgStyle}}>\n            <Badge  badgeContent={index} color=\"secondary\">\n            <div style={{height:15,width:15}}></div>\n\n            </Badge>\n            <button onClick={onDelete} style={{backgroundColor:\"var(--light-button)\",color:'white'}} className=\"button\">delete</button>\n        </div>\n}\n\n\n\nexport default function PostEdit({ onClose,appendPost }) {\n  const theme=useTheme()\n    const [editorState, setEditorState] = React.useState(\"\");\n  const user=useSelector(state=>state.user)\n  const fileRef = useRef(null);\n  const [files,appendFile,handleFiles] = useMedia();\n  const [viewFile,setViewFile]=useState(false)\n  \n  const postButton = { display: \"flex\", justifyContent: \"flex-end\" };\n  const [isLock,setLock]=useState(false);\n  const [status,setStatus]=useState({message:''})\n  const onChangeInput=useCallback((value)=>{\n    if(status.message){\n      setStatus({message:''})\n    }\n    setEditorState(value)\n  },[setStatus,setEditorState,status.message])\n  const triggerFileUploads = useCallback(() => {\n    fileRef.current.click();\n  },[fileRef])\n  const closeEditor = useCallback((e) => {\n    onClose();\n  },[onClose])\n  const onPost=useCallback(()=>{\n     \n    setLock(true)\n    setStatus({message:\"posting!\"})\n },[])\n  useEffect(()=>{\n    if(isLock===true){\n      if(user.uid && editorState.trim().length){\n        var data = new FormData()\n        data.append('content', editorState)\n        data.append('count', files.length)\n        data.append('uid', user.uid)\n        files.forEach((file)=>{\n            data.append(`uploads`,file)\n        })\n        \n        \n        API.makePost(data).then(res=>{\n            if(res.postid){\n              const newPost={\n                ...res,\n                datecreated:Date.now(),\n                user:{\n                    userid:user.uid,\n                    userfullname:user.fullName,\n                    picture:user.profileImage\n                }\n              }\n              appendPost(newPost)\n              setStatus({message:\"success!\"})\n              onClose()\n            }\n        }).catch(e=>{\n          setStatus({message:\"post failed!\"})\n          setLock(false)\n        })\n       }else{\n         \n        setStatus({message:\"no empty post!\"})\n        setLock(false)\n       }\n    }\n  },[isLock,user.uid,editorState,files,appendPost,onClose])\n\n\n  return (\n    <div   className={styles.container} style={{backgroundColor:`rbga(${theme.background},.3)`}}>\n      {/* files input hidden */}\n      <div className={styles.hiddenInput}>\n        <input\n          onChange={appendFile}\n          ref={fileRef}\n          type=\"file\"\n          multiple\n          accept=\"image/png, image/gif, image/jpeg, video/*\"\n        />\n      </div>\n      {/* overlay */}\n      <div\n        title=\"close editor\"\n        className={styles.overlay}\n        onClick={(e) => {\n          if(!isLock){\n            onClose();\n          }\n          \n        }}\n      ></div>\n      {/* text editor */}\n      <div className={styles.editor} style={{backgroundColor:theme.background,color:theme.text}}>\n        <div className={styles.userProfile}>\n          <p>{!viewFile?'Write post':\"Edit file (\"+files.length+\")\"} <strong>{status.message}</strong></p>\n        </div>\n\n        {viewFile?<MyFileViewer files={files} handleFiles={handleFiles}/>:<MyEditor value={editorState} setValue={onChangeInput}/>}\n\n        <div className={styles.groupButton}>\n          <button disabled={isLock} className=\"button\" onClick={triggerFileUploads}>\n            add media\n          </button>\n          <Badge invisible={viewFile} badgeContent={files.length || 0} color=\"secondary\">\n          <button className=\"button\" onClick={()=>{setViewFile(s=>!s)}}>view {viewFile?'post':'media'}</button>\n</Badge>\n          <div style={postButton}>\n            <button disabled={isLock} className=\"button bg-pink\" onClick={onPost}>post</button>\n          </div>\n          <button className=\"button\" disabled={isLock} onClick={closeEditor}>\n            cancel\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import {useState} from 'react'\n\n\nexport function useMedia(){\n    const [files,addFile]=useState([])\n    const appendFile=function(e){\n        for ( let file of e.target.files){\n            addFile((state)=>([...state,file]))\n        }\n    }\n    return [files,appendFile,addFile]\n}","export default __webpack_public_path__ + \"static/media/checkin.b8d0c75f.svg\";","import React,{ useState} from 'react'\nimport styles from './CheckIn.module.scss'\nimport Avatar from 'src/Components/Avatar'\nimport picture from 'src/stylesheets/svg/picture.svg'\nimport video from 'src/stylesheets/svg/video.svg'\nimport PostEdit from '../PostEdit'\nimport checkin from 'src/stylesheets/svg/checkin.svg'\nimport { useSelector } from 'react-redux'\nimport { useTheme } from \"src/lib/hooks/useColor\";\n\nexport default function CheckIn({appendPost}) {\n    const [openEditor,setOpenEditor]=useState(false)\n    const userImage=useSelector(state => state.user.profileImage)\n    const onClose=React.useCallback(()=>{setOpenEditor(false)},[])\n    const theme=useTheme()\n    return (\n        <div style={{backgroundColor:theme.background}} className={styles.container}>\n                {openEditor&&<PostEdit appendPost={appendPost} onClose={onClose}/>}\n                <div className={styles.CheckInItem}>\n                <Avatar size=\"large\" userAvatar={userImage??null}/>\n                </div>\n                <div className={styles.CheckInStatus}>\n                <div className={styles.CheckinForm}>\n                    <button onClick={()=>{setOpenEditor(true)}}>What's in your mind!</button>\n                </div>\n                <div className={styles.CheckinButton}>\n                    <button onClick={()=>{setOpenEditor(true)}}>\n                        <Avatar userAvatar={picture}/>\n                    <p>Media</p>\n                    </button>\n                    <button>\n                    <Avatar userAvatar={video}/>\n                    <p>Live</p>\n                    </button>\n                    <button>\n                    <Avatar userAvatar={checkin}/>   \n                    <p>Checkin! </p> \n                                        </button>\n                </div>\n\n                </div>\n        </div>\n    )\n}\n","\n\n\nimport UserPage from './UserPage'\nimport HomePage from \"./HomePage\"\nconst routes= [\n    {\n        name:'home',\n        path:'/',\n        Component:HomePage\n    },\n    {\n        name:'user',\n        path:'/user/:uid',\n        Component:UserPage\n    },\n    {\n        name:'post',\n        path:'/post',\n        Component:()=><h1>post page</h1>\n    }\n]\n\nexport default routes","import React, { useState,useCallback } from \"react\";\nimport styles from \"./HomePage.module.scss\";\nimport NewsFeed from \"src/Components/NewsFeed\";\nimport CheckIn from \"src/Components/CheckIn\";\nimport { useTheme } from \"src/lib/hooks/useColor\";\n\nexport default function HomePage() {\n  const [posts, setPosts] = useState([]);\n  const theme=useTheme()\n  \n \n  const appendPost = useCallback((post) => {\n        setPosts(state=>([post,...state]))\n  },[])\n  \n  return (\n    <div  className={styles.container} style={{backgroundColor:theme.background,color:theme.text}}>\n      <CheckIn appendPost={appendPost} />     \n        <NewsFeed byUID={false} uid={null} posts={posts} setPosts={setPosts} />\n    </div>\n  );\n}\n\n","import React,{useState,useEffect} from 'react'\nimport styles from './UserPage.module.scss'\nimport UserWall from 'src/Components/UserWall'\nimport NewsFeed from 'src/Components/NewsFeed'\nimport CheckIn from 'src/Components/CheckIn'\nimport {useSelector} from 'react-redux'\nimport { useQuery } from '@apollo/client'\nimport Query from 'src/lib/API/Apollo/Queries'\nimport { useTheme } from \"src/lib/hooks/useColor\";\n\n\nexport default function UserPage({match}) {\n    const isUserID=useSelector(state=>state.user.uid)\n    const [posts,setPosts]=useState([])\n    const [user,setUser]=useState(null)\n    const theme=useTheme()\n    const { loading, error, data} = useQuery(Query.GET_USER_INFORMATION, {\n        variables: { id:parseInt(match.params.uid) },\n        errorPolicy:\"all\"\n      });\n    const appendPost = React.useCallback((post) => {\n        setPosts((state) => [post, ...state]);\n      },[])\n      React.useEffect(()=>{\n         \n         \n        if(data){\n           \n           setUser(data.getUserInformation)\n        }\n    },[data,error,match])\n    \n\n   \n \n   \n    if(user?.userid){\n        return (\n            <div className={styles.pageWrapper} style={{backgroundColor:theme.background,color:theme.text}}>\n                <UserWall  isLocal={isUserID===user.userid} user={user}/>\n              {user.userid===isUserID&&\n              \n               <div className={styles.CheckInWrapper}> <CheckIn appendPost={appendPost}/></div>\n              }\n               <div className={styles.NewsFeedWrapper}>\n               <NewsFeed posts={posts} uid={user.userid} byUID={true} setPosts={setPosts}/>\n               </div>\n            </div>\n        )\n    }\n    return <></>\n}\n","import Layout from './Components/Layout'\nimport {Switch,Route} from 'react-router-dom'\nimport routes from 'src/Page/route'\nfunction App() {\n  return (\n    <Layout>\n        <Switch>\n\n        {routes.map(({path,name,Component})=><Route key={name} children={(props)=>(<Component {...props} />)} exact path={path}/> )}\n\n        </Switch>\n    </Layout>\n  );\n}\n\nexport default App;\n","import React, { useState } from \"react\";\nimport styles from \"./LoginPage.module.scss\";\nimport FacebookLogin from \"react-facebook-login\";\nimport API from \"src/lib/API/UserAPI\";\nimport { useDispatch } from \"react-redux\";\nimport TYPE from \"src/ReduxStore/bin/CONSTANT\";\nfunction getDateNowISO() {\n  return new Date().toISOString().substring(0, 10);\n}\n\nfunction DispatchLogin(res) {\n\n  return (dispatch)=>{\n    const { uid, userFullName, userDisplayName, picture } = res.user;\n  const payload = {\n    loggedIn: true,\n    uid: uid,\n    displayName: userDisplayName,\n    profileImage: picture,\n    fullName: userFullName,\n  };\n    dispatch({ type: TYPE.logInUser, payload: payload });\n  }\n\n}\nexport default function LoginPage() {\n  const [hasAccount, openLoginPage] = useState(true);\n  const [user, setUser] = useState(() => {\n    return {\n      username: \"\",\n      password: \"\",\n      userDisplayName: \"\",\n      userFullName: \"\",\n      dateOfBirth: \"\",\n      dateCreatedAccount: getDateNowISO(),\n      email: \"\",\n      phone: \"\",\n      gender: \"\",\n    };\n  });\n\n  // redux\n  const dispatch = useDispatch();\n\n  const handleUserInput = (key) => {\n    return (e) => {\n      let value = e.target.value;\n      if (key === \"username\" || key === \"password\") {\n        if (value[value.length - 1] === \" \") {\n          alert(\"không được có khoảng cách\");\n        }\n        value = value.trim();\n      }\n      setUser((state) => ({ ...state, [key]: value }));\n    };\n  };\n  const handleLogin = (e) => {\n    e.preventDefault();\n    const { username, password } = user;\n    API.loginExistingUser({ username, password }).then((res) => {\n      if (!res.err) {\n        dispatch(DispatchLogin(res))\n      }\n    });\n  };\n  const handleRegister = (e) => {\n    e.preventDefault();\n    API.registerNewUser(user).then((res) => {\n      if (!res.err) {\n        dispatch(DispatchLogin(res))\n      }\n    });\n  };\n  return (\n    <div className={styles.container}>\n      <div className={styles.Form}>\n        {hasAccount ? (\n          <LoginForm\n            handleLogin={handleLogin}\n            user={user}\n            handleChange={handleUserInput}\n          />\n        ) : (\n          <RegisterForm\n            handleRegister={handleRegister}\n            user={user}\n            handleChange={handleUserInput}\n          />\n        )}\n        <p>{hasAccount ? \"Don't have account?\" : \"Account already exists?\"}</p>\n        <div className={styles.Suggest}>\n          <button\n            onClick={() => {\n              openLoginPage((s) => !s);\n            }}\n          >\n            {hasAccount ? \"Register\" : \"Login\"}\n          </button>\n          <span>or</span>\n          <FacebookLogin\n            appId=\"142129044562039\"\n            redirectUri={\"google.com\"}\n            cssClass=\"facebook-login-icon\"\n            autoLoad={false}\n            fields=\"name,email,picture\"\n            onClick={() => {\n              console.log(\"clicked\");\n            }}\n            callback={(res) => {\n              console.log(res);\n            }}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nconst RegisterForm = ({ user, handleChange, handleRegister }) => {\n  const schema = [\n    {\n      name: \"Username\",\n      type: \"text\",\n      placeholder: \"login account\",\n      isRequired: true,\n      key: \"username\",\n    },\n    {\n      name: \"Password\",\n      type: \"password\",\n      placeholder: \"secure password\",\n      isRequired: true,\n      key: \"password\",\n    },\n    {\n      name: \"Full name\",\n      type: \"text\",\n      placeholder: \"your full name\",\n      isRequired: true,\n      key: \"userFullName\",\n    },\n\n    {\n      name: \"Display name\",\n      type: \"text\",\n      placeholder: \"your display name\",\n      isRequired: true,\n      key: \"userDisplayName\",\n    },\n\n    {\n      name: \"Gender\",\n      type: \"text\",\n      placeholder: \"what is your gender\",\n      isRequired: true,\n      key: \"gender\",\n    },\n\n    {\n      name: \"Email\",\n      type: \"email\",\n      placeholder: \"your backup email\",\n      isRequired: true,\n      key: \"email\",\n    },\n\n    {\n      name: \"Phone\",\n      type: \"text\",\n      placeholder: \"your phone number\",\n      isRequired: true,\n      key: \"phone\",\n    },\n\n    {\n      name: \"Date of birth\",\n      type: \"date\",\n      placeholder: \"\",\n      isRequired: true,\n      key: \"dateOfBirth\",\n    },\n  ];\n\n  return (\n    <form onSubmit={handleRegister} className={styles.MainForm}>\n      {schema.map((input, index) => (\n        <div key={\"register-id-\" + index} className={styles.groupForm}>\n          <label>{input.name}</label>\n          <input\n            type={input.type}\n            value={user[input.key]}\n            onChange={handleChange(input.key)}\n            placeholder={input.placeholder}\n            required={input.isRequired}\n          />\n        </div>\n      ))}\n      <button type=\"submit\">Create Account</button>\n    </form>\n  );\n};\nconst LoginForm = ({ user, handleChange, handleLogin }) => {\n  const schema = [\n    {\n      name: \"Username\",\n      type: \"text\",\n      placeholder: \"login account\",\n      isRequired: true,\n      key: \"username\",\n    },\n    {\n      name: \"Password\",\n      type: \"password\",\n      placeholder: \"secure password\",\n      isRequired: true,\n      key: \"password\",\n    },\n  ];\n  return (\n    <form onSubmit={handleLogin} className={styles.MainForm}>\n      {schema.map((input, index) => (\n        <div key={\"login-id-\" + index} className={styles.groupForm}>\n          <label>{input.name}</label>\n          <input\n            type={input.type}\n            value={user[input.key]}\n            onChange={handleChange(input.key)}\n            placeholder={input.placeholder}\n            required={input.isRequired}\n          />\n        </div>\n      ))}\n\n      <button type=\"submit\">Login</button>\n    </form>\n  );\n};\n","import Type from 'src/ReduxStore/bin/CONSTANT'\nconst defaultState={\n    loggedIn:false,\n    uid:null,\n    displayName:null,\n    profileImage:null,\n    fullName:null\n}\n\nconst user=(state=defaultState,action)=>{\n    if ( action.type===Type.logInUser){\n        return {...state,...action.payload}\n    }\n    if ( action.type===Type.logOutUser){\n        return {...defaultState}\n    } \n    if (action.type===Type.changeAvatar){\n        return {...state,...action.payload}\n    }\n    return state\n}\n\n\n\nexport default user","\nconst settings={\n    theme:'default'\n}\n\n\nconst Settings=(state=settings,action)=>{\n\n\n    return state\n}\n\nexport default Settings","const defaultState = {\n  queue: [],\n  Conversation: [],\n};\n\nconst message = (state = defaultState, action) => {\n  if (action.type === \"addToQueue\") {\n    return { ...state, queue: [...state.queue, action.payload] };\n  } else if (action.type === \"popFistElement\") {\n    return { ...state, queue: [...state.queue].filter((e, i) => i !== 0) };\n  } else if (action.type === \"addConversation\") {\n    const old = [...state.Conversation];\n    const found = old.find(\n      (e) => e.conversationid === action.payload.conversationid\n    );\n    if (found) {\n      const newState =old.map(e=>e.conversationid===found.conversationid?{...e,count:e.state==='hide'?e.count+1:0,lastmessage: action.payload.lastmessage,state:found.state==='open' || action.payload.force===true?'open':'hide' }:e)\n  \n      return { ...state, Conversation: newState };\n    }\n\n    const newState = [\n      {...action.payload,count:action.payload.count||0},\n      ...old.filter((e) => e.conversationid !== action.payload.conversationid),\n    ];\n\n    return { ...state, Conversation: newState };\n  } else if (action.type === \"getAllConversation\") {\n    return { ...state, Conversation: action.payload };\n  } else if (action.type === \"openConversation\") {\n    const id = action.payload;\n    const old = [...state.Conversation];\n    const newState = old.map((e) => {\n      if (id === e.conversationid) {\n        return { ...e, state: \"open\" };\n      }\n      return e;\n    });\n\n    return { ...state, Conversation: newState };\n  } else if (action.type === \"hideConversation\") {\n    const id = action.payload;\n    const old = [...state.Conversation];\n    const newState = old.map((e) => {\n      if (id === e.conversationid) {\n        return { ...e, state: \"hide\",count:0 };\n      }\n      return e;\n    });\n\n    return { ...state, Conversation: newState };\n  } else if (action.type === \"closeConversation\") {\n    const id = action.payload;\n    const old = [...state.Conversation];\n    const newState = old.map((e) => {\n      if (id === e.conversationid) {\n        return { ...e, state: \"close\" };\n      }\n      return e;\n    });\n\n    return { ...state, Conversation: newState };\n  }\n  return state;\n};\nexport default message;\n","import UserReducer from './User'\nimport SettingsReducer from './Settings'\nimport message from './Message'\nimport { combineReducers } from 'redux'\n\n\nexport default combineReducers({user:UserReducer,settings:SettingsReducer,Message:message})","import { createStore, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport reducer from './bin/reducers'\nimport ReduxThunk from 'redux-thunk'\nconst middleware=[ReduxThunk]\nconst store = createStore(\n  reducer,\n  composeWithDevTools(\n    applyMiddleware(...middleware)\n    // other store enhancers if any\n  )\n);\n\n\nexport default store","import { split, HttpLink } from '@apollo/client';\nimport { getMainDefinition } from '@apollo/client/utilities';\nimport { WebSocketLink } from '@apollo/client/link/ws';\n//const host=true?'192.168.1.8:4000':\"192.168.1.48:4000\"\nconst host=(window.location.host);\nconst httpLink = new HttpLink({\n  uri: `http://${host}/graphql`\n});\n\nconst wsLink = new WebSocketLink({\n  uri: `ws://${host}/graphql`,\n  options: {\n    reconnect: true\n  }\n});\n\n// The split function takes three parameters:\n//\n// * A function that's called for each operation to execute\n// * The Link to use for an operation if the function returns a \"truthy\" value\n// * The Link to use for an operation if the function returns a \"falsy\" value\nconst splitLink = split(\n  ({ query }) => {\n    const definition = getMainDefinition(query);\n    return (\n      definition.kind === 'OperationDefinition' &&\n      definition.operation === 'subscription'\n    );\n  },\n  wsLink,\n  httpLink,\n);\nexport {splitLink}","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport LoginPage from \"./Page/LoginPage\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { Provider } from \"react-redux\";\nimport { useLogin } from \"src/lib/hooks/useLogin\";\nimport store from \"src/ReduxStore/store\";\nimport { useDispatch } from \"react-redux\";\nimport TYPE from 'src/ReduxStore/bin/CONSTANT'\nimport API from 'src/lib/API/UserAPI'\nimport \"src/stylesheets/css/global.css\";\nimport {\n  ApolloClient,\n  InMemoryCache,\n  ApolloProvider,\n  \n} from \"@apollo/client\";\nimport { splitLink } from \"./lib/API/Apollo/Link\";\nconst client = new ApolloClient({\n  link: splitLink,\n  cache: new InMemoryCache()\n});\nfunction DispatchLogin(res) {\n\n  return (dispatch)=>{\n    const { uid, userFullName, userDisplayName, picture } = res.user;\n  const payload = {\n    loggedIn: true,\n    uid: uid,\n    displayName: userDisplayName,\n    profileImage: picture,\n    fullName: userFullName,\n  };\n    dispatch({ type: TYPE.logInUser, payload: payload });\n  }\n\n}\nconst Loader = () => {\n  const dispatch = useDispatch()\n  const [load,setLoad]=React.useState(false)\n  React.useEffect(()=>{\n    API.resumeUserSession().then(res=>{\n      if(res?.user){\n        dispatch(DispatchLogin(res))\n      }\n\n\n      setLoad(true)\n    })\n  })\n  const isLoggedIn = useLogin();\n if(load){\n  if (isLoggedIn !== null) {\n    if (isLoggedIn === true) {\n      return <App />;\n    }\n    return (\n        <LoginPage />\n      \n    );\n  }\n }\n  return <></>;\n};\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <Router>\n        <ApolloProvider client={client}>\n        <Loader />\n    \n  </ApolloProvider>\n      </Router>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","import { useSelector } from \"react-redux\";\nimport {useState,useEffect} from 'react'\n\nexport function useLogin(){\n    const [isLoggedIn,setLoggedIn]=useState(null)\n    const checkLoggedIn=useSelector(state=>state.user.loggedIn)\n    useEffect(() => {\n            setLoggedIn(checkLoggedIn)\n    }, [checkLoggedIn])\n\n\n    return isLoggedIn\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ChatBubble_container__3S5sJ\",\"bubbleContainer\":\"ChatBubble_bubbleContainer__2rnxW\",\"bubbleItem\":\"ChatBubble_bubbleItem__S5xGB\",\"chatGroups\":\"ChatBubble_chatGroups__BmNCM\",\"chatItem\":\"ChatBubble_chatItem__juEdF\",\"buttonWrapper\":\"ChatBubble_buttonWrapper__1iQX2\",\"userGroup\":\"ChatBubble_userGroup__sOVC_\",\"mobileHeader\":\"ChatBubble_mobileHeader__27bgv\",\"header\":\"ChatBubble_header__8Ju_9\",\"form\":\"ChatBubble_form__5E2X2\",\"formSticky\":\"ChatBubble_formSticky__2Gbz0\",\"body\":\"ChatBubble_body__188j2\",\"bodyContent\":\"ChatBubble_bodyContent__7ssOB\",\"chatHidden\":\"ChatBubble_chatHidden__1modv\",\"left\":\"ChatBubble_left__1aWr4\",\"right\":\"ChatBubble_right__Ya3Kc\",\"commentItem\":\"ChatBubble_commentItem__2JRzb\",\"messageGroup\":\"ChatBubble_messageGroup__TzKEx\",\"drawerDialog\":\"ChatBubble_drawerDialog__c6HzV\"};","\nconst host=false?'http://192.168.1.8:4000':\"\"\nconst url={\n    dev:host+'/api',\n    img:host+'/',\n}\nexport default url","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Comment_container__3imMD\",\"userinfor\":\"Comment_userinfor__1odgz\",\"commentItem\":\"Comment_commentItem__2pmZ5\",\"comment\":\"Comment_comment__1PIRq\",\"showup\":\"Comment_showup__2CGhg\",\"commentInfor\":\"Comment_commentInfor__26YK_\",\"drawerComment\":\"Comment_drawerComment__3qZ-O\",\"formComment\":\"Comment_formComment__3xEeE\"};","import url from \"./URL\";\nimport axios from \"axios\";\nconst API = {\n  async registerNewUser(user) {\n    try {\n      const feedback = await fetch(\n        `${url.dev}/user/signup`,\n        getHeaders(\"POST\", { user: user })\n      ).then((res) => res.json());\n\n      if (feedback.status) {\n        return feedback;\n      }\n      throw new Error();\n    } catch (e) {\n      return { err: \"bad request\" };\n    }\n  },\n  async loginExistingUser(user) {\n    try {\n      const feedback = await fetch(\n        `${url.dev}/user/login`,\n        getHeaders(\"POST\", { user: user })\n      ).then((res) => res.json());\n\n      if (feedback.status) {\n        return feedback;\n      }\n      throw new Error();\n    } catch (e) {\n      return { err: \"bad request from client\" };\n    }\n  },\n  async loginFacebook(user) {\n    try {\n      const feedback = await fetch(\n        `${url.dev}/user/fblogin`,\n        getHeaders(\"POST\", { user: user })\n      ).then((res) => res.json());\n\n      if (feedback.status) {\n        return feedback;\n      }\n      throw new Error();\n    } catch (e) {\n      return { err: \"bad request\" };\n    }\n  },\n  async makePost(form) {\n    const data = await axios({\n      method: \"post\",\n      url: `${url.dev}/post/newpost`,\n      data: form,\n      headers: { \"Content-Type\": \"multipart/form-data\" },\n    })\n      .then(function (response) {\n        //handle success\n        return response.data;\n      })\n      .catch(function (response) {\n        //handle error\n        console.log(response);\n      });\n    return data;\n  },\n  async getLatestPost() {\n    try {\n      const posts = await axios\n        .get(`${url.dev}/post/latest`)\n        .then(({ data }) => data);\n      return posts;\n    } catch (e) {\n      return { err: \"bad request! no post.\" };\n    }\n  },\n  async getUserById(id) {\n    try {\n      return fetch(`${url.dev}/user/information/${id}`).then((res) =>\n        res.json()\n      );\n    } catch (e) {\n      return { err: e.message };\n    }\n  },\n  async getEarlierPostByLastId(lastId) {\n    try {\n      const response = await fetch(`${url.dev}/post/earlier/${lastId}`).then(\n        (res) => res.json()\n      );\n      return response;\n    } catch (e) {\n      return { err: e.message };\n    }\n  },\n  async getAllPostById(uid) {\n    try {\n      const response = await fetch(`${url.dev}/post/allpost/${uid}`).then(\n        (res) => res.json()\n      );\n      return response;\n    } catch (e) {\n      return { err: e.message };\n    }\n  },\n  async getUserEarlierPostById(uid, lastId) {\n    try {\n      const response = await fetch(\n        `${url.dev}/post/earlier/${uid}/${lastId}`\n      ).then((res) => res.json());\n      return response;\n    } catch (e) {\n      return { err: e.message };\n    }\n  },\n  async setUserAvatar(uid, form) {\n    try {\n      const data = await axios({\n        method: \"put\",\n        url: `${url.dev}/user/avatar/${uid}`,\n        data: form,\n        headers: { \"Content-Type\": \"multipart/form-data\" },\n      })\n        .then(function (response) {\n          //handle success\n          return response.data;\n        })\n        .catch(function (response) {\n          //handle error\n          console.log(response);\n        });\n      return data;\n    } catch (e) {\n      return { err: e.message };\n    }\n  },\n  async userCommentPost(comment){\n      try{\n        const response=await fetch(`${url.dev}/post/comment`,getHeaders(\"POST\",comment)).then(res=>res.json())\n        return response\n      }\n      catch(e){\n        return {err:'bad request'}\n      }\n  },\n  async getPostLatestComment(postid){\n        try{\n              const response=await fetch(`${url.dev}/post/comment/${postid}`).then(res=>res.json())\n              return response\n        }catch (e){\n          return {\n            err:'bad request'\n          }\n        }\n  },\n  async updateCommentByLastID(update){\n      try{  \n            const response=await fetch(`${url.dev}/post/comment/update`,getHeaders(\"POST\",update)).then(res=>res.json())\n            return response\n      }\n      catch(e){\n        return {err:\"not found\"}\n      }\n  },\n  async resumeUserSession(){\n    try{\n        return await fetch(`${url.dev}/user/resume`).then(res=>res.json())\n    }catch(e){\n      return {err:true}\n    }\n  }\n};\n\nconst getHeaders = (method, data) => {\n  return {\n    method: method, // *GET, POST, PUT, DELETE, etc.\n\n    mode: \"cors\",\n\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n\n    body: JSON.stringify(data), // body data type must match \"Content-Type\" header\n  };\n};\n\nexport default API;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"groupNotification\":\"Navbar_groupNotification__3NmGa\",\"navbar\":\"Navbar_navbar__3HLis\",\"content\":\"Navbar_content__j5B0b\",\"groupSearch\":\"Navbar_groupSearch__dY8E7\",\"dropdown\":\"Navbar_dropdown__13VHp\",\"messageHistory\":\"Navbar_messageHistory__bmgGV\",\"wrapper\":\"Navbar_wrapper__1xzjY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"PostEdit_container__1cABj\",\"overlay\":\"PostEdit_overlay__3nG28\",\"editor\":\"PostEdit_editor__3GTHV\",\"editorWrapper\":\"PostEdit_editorWrapper__1BXqX\",\"fileViewerWrapper\":\"PostEdit_fileViewerWrapper__GXxpg\",\"groupButton\":\"PostEdit_groupButton__1zwPx\",\"hiddenInput\":\"PostEdit_hiddenInput__31IVS\"};","const action= {\n    logInUser:'user/LogInUser',\n    logOutUser:\"user/LogOutUser\",\n    changeAvatar:\"user/changeAvatars\"\n}\nexport default action","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"LoginPage_container__2iffR\",\"Form\":\"LoginPage_Form__1MiFU\",\"MainForm\":\"LoginPage_MainForm__1w3oE\",\"Suggest\":\"LoginPage_Suggest__2T50A\",\"groupForm\":\"LoginPage_groupForm__3B-v9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"small\":\"Avatar_small__1S5ft\",\"medium\":\"Avatar_medium__2Wn88\",\"large\":\"Avatar_large__16sur\",\"avatar\":\"Avatar_avatar__2GRnH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"MediaBrowser_container__l0ovP\",\"postWrapper\":\"MediaBrowser_postWrapper__2d20Z\",\"hasMedia\":\"MediaBrowser_hasMedia__3IbhH\",\"noMedia\":\"MediaBrowser_noMedia__2R8dK\",\"overlay\":\"MediaBrowser_overlay__nQIPx\",\"mediaViewer\":\"MediaBrowser_mediaViewer__1GHtf\",\"closeButton\":\"MediaBrowser_closeButton__1SpPQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"MediaViewer_container__1UA21\",\"Left\":\"MediaViewer_Left__tRnSH\",\"Right\":\"MediaViewer_Right__1PFCw\",\"Video\":\"MediaViewer_Video__1Mwxg\",\"ImageHeight\":\"MediaViewer_ImageHeight__39tQr\",\"ImageWidth\":\"MediaViewer_ImageWidth__eMG_V\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Post_container__705-l\",\"userInfor\":\"Post_userInfor__3TsEz\",\"postInfor\":\"Post_postInfor__2u5Dy\",\"postContent\":\"Post_postContent__1O4Rf\",\"postMedia\":\"Post_postMedia__1d6sf\",\"like_comment\":\"Post_like_comment__D8NQK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Preview_container__1bfQb\",\"single\":\"Preview_single__1vPF6\",\"many\":\"Preview_many__PfN9x\",\"VideoThumbnail\":\"Preview_VideoThumbnail__MwOHt\",\"mediaRemain\":\"Preview_mediaRemain__sQjtr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"CheckIn_container__lONDU\",\"CheckInStatus\":\"CheckIn_CheckInStatus__1Sa0w\",\"CheckInItem\":\"CheckIn_CheckInItem__1mM14\",\"CheckinForm\":\"CheckIn_CheckinForm__2Yoyx\",\"CheckinButton\":\"CheckIn_CheckinButton__3Itp0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"UserWall_container__ASS1k\",\"background\":\"UserWall_background__1lSyb\",\"showup\":\"UserWall_showup__2KldS\",\"userInfor\":\"UserWall_userInfor__PIxU_\",\"group\":\"UserWall_group__2SClk\"};"],"sourceRoot":""}