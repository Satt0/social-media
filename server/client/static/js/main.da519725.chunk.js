(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{131:function(e,t,n){e.exports={container:"HomePage_container__2EfJt",showup:"HomePage_showup__3gL5c"}},154:function(e,t,n){e.exports={container:"style_container__6kQGY"}},178:function(e,t,n){},190:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(24),s=n.n(c),o=n(7),i=n(52),u=n.n(i),d=n.p+"static/media/avatar.6537f30a.jpg",l=n(22);function b(e){var t=e.path;return l.a.img+t}var j=n(1);function p(e){var t,n,a,r=e.userAvatar,c=e.size,s=void 0===c?"small":c,o=e.round,i=void 0===o||o,b=e.blank,p=void 0!==b&&b;switch(s){case"small":n=u.a.small;break;case"medium":n=u.a.medium;break;case"large":n=u.a.large;break;default:n=u.a.small}return p?Object(j.jsx)("div",{style:{borderRadius:i?"":"0",backgroundImage:null},className:"".concat(u.a.avatar," ").concat(n)}):Object(j.jsx)("div",{style:{borderRadius:i?"":"0",backgroundImage:'url("'.concat(null!==(a=r,t=(null===a||void 0===a?void 0:a.indexOf("public/"))>=0?l.a.img+a:a)&&void 0!==t?t:d,'")')},className:"".concat(u.a.avatar," ").concat(n)})}var m=n(74),f=n.n(m),v=n(34),O=n.p+"static/media/message.2ca51fba.svg",h=n.p+"static/media/logo.2163973a.svg",g=n(44),x=n(223),_=Object(g.a)((function(e){return{badge:{right:4,top:4,border:"2px solid ".concat(e.palette.background.paper),padding:"0 4px"}}}))(x.a);function y(e){var t=e.icon,n=e.size,a=e.count;return Object(j.jsx)(_,{badgeContent:null!==a&&void 0!==a?a:4,color:"secondary",children:Object(j.jsx)(p,{userAvatar:t,size:n})})}n.p;var C=n(9),k={default:{text:"black",backgroud:"white",backgroudPost:"white",backgroundImage:null},rosie:{text:"var(--text-rosie)",background:"var(--background-rosie)",backgroundPost:"var(--background-post-rosie)",backgroundImage:n.p+"static/media/rose.57fba1c8.jpg"},jennie:{text:"var(--text-jennie)",background:"var(--background-jennie)",backgroundPost:"var(--background-post-jennie)",backgroundImage:n.p+"static/media/jennie.faf3ee6f.jpg"}};function w(){var e=Object(C.c)((function(e){return e.settings.theme}));return k[e]}var I,N,S,E,P,M,T,A,B,R,U,L=n(5),F=(n(88),n.p,n.p,n(228)),D=n(224),q=n(232),G=n(37),W=n(55),$={GET_USER_INFORMATION:Object(W.a)(I||(I=Object(G.a)(["\n    query getUserInformation($id: Int!) {\n      getUserInformation(userid: $id) {\n        userid\n        userfullname\n        userdisplayname\n        picture\n      }\n    }\n  "]))),GET_LATEST_POST:Object(W.a)(N||(N=Object(G.a)(["\n    query{\n\tgetLatestPost{\n    postid\n    userid\n    content\n      datecreated\n      media\n      likecount\n      commentcount\n      embeded\n      \n    user {\n      picture\n      userid\n      userfullname\n      \n    }}\n  \n}\n  "]))),GET_USER_LATEST_POST:Object(W.a)(S||(S=Object(G.a)(["\n   query  getLatestPostByUserID($userid:Int!){\n  getLatestPostByUserID(userid:$userid){\n    postid\n    userid\n    content\n      datecreated\n      media\n      likecount\n      commentcount\n      embeded\n    \n  user {\n    picture\n    userid\n    userfullname\n  }}\n  \n  }\n  "]))),GET_POST_LATEST_COMMENT:Object(W.a)(E||(E=Object(G.a)(["\n  query getPostCommentById($postid:Int!){\n  getPostCommentById(postid:$postid){\n    commentid\n  postid\n  userid\n  content\n  datecreated\n  user {\n    picture\n    userfullname\n    userid\n  }}\n  }\n  "]))),POST_COMMENT:Object(W.a)(P||(P=Object(G.a)(["\n  mutation createComment($userid:Int!,$content:String!,$postid:Int!){\n    createComment(input:{userid:$userid,content:$content,postid:$postid}){\n      content\n      commentid\n      datecreated\n      userid\n      postid\n      user{\n        picture\n        userfullname\n        userid\n      }\n      }\n  }"]))),UPDATE_COMMENT:Object(W.a)(M||(M=Object(G.a)(["\n subscription getComment($postid:Int!){\ngetComment(postid:$postid){\n  commentid\n  userid\n  content\n  datecreated\n  \n  user{\n    userid\n    userfullname\n    userdisplayname\n    picture\n  }\n}\n}"]))),LISTEN_MESSAGE:Object(W.a)(T||(T=Object(G.a)(["\nsubscription waitAllMessage($userid:Int!){\n   \n  \nwaitAllMessage(userid:$userid){\n  messageid\n  content\n  userid\n  receiver\n  datecreated\n  conversationid\n}\n}"]))),GET_ALL_CONVERSATION:Object(W.a)(A||(A=Object(G.a)(["\n   query getAllConversation($userid:Int!) {\ngetAllConversation(userid:$userid){\nconversationid\nuserid1\nuserid2\nlastactivedate\nlastmessage{\n  content\n  receiver\n}}\n}\n"]))),SEND_MESSAGE:Object(W.a)(B||(B=Object(G.a)(["\nmutation sendMessage($userid:Int!,$conversationid:Int!,$receiver:Int!,$content:String!){\n  sendMessage(input:{userid:$userid,conversationid:$conversationid,receiver:$receiver,content:$content}){\n    content\n    messageid\n    datecreated\n    userid\n    conversationid\n    receiver\n  }\n}\n"]))),INIT_MESSAGE:Object(W.a)(R||(R=Object(G.a)(["\n  mutation initConversation($userid1:Int!,$userid2:Int!){\n      initConversation(input:{userid1:$userid1,userid2:$userid2}){\n              conversationid\n              userid1\n              userid2\n  \n}\n\n}"]))),GET_CONVERSATION_MESSAGE:Object(W.a)(U||(U=Object(G.a)(["\nquery getAllMessage($id:Int!){\ngetAllMessage(conversationid:$id){\nmessageid\nuserid\nconversationid\ncontent\nreceiver\n  \n}\n}\n\n"])))},V=(n(154),n(227)),H=n(14),z=n(26),J=n.n(z),Q=n(225),X=n(231),Y=Object(g.a)((function(e){return{badge:{right:0,top:40,transform:"unset"}}}))(x.a);function K(e){var t=e.conversation,n=e.newMessage,a=Object(C.b)(),r=function(e){var t=e.conversationid;a({type:"openConversation",payload:t})},c=function(e){a({type:"hideConversation",payload:e})},s=function(e){a({type:"closeConversation",payload:e})};return Object(j.jsxs)("div",{className:J.a.container,children:[Object(j.jsx)("div",{className:J.a.chatGroups,children:t.filter((function(e){return"close"!==e.state})).map((function(e,t){return Object(j.jsx)(ee,{newMessage:n,onClose:s,onHide:c,thisEl:e},"chat-"+t)}))}),Object(j.jsx)("div",{className:J.a.bubbleContainer,children:t.map((function(e,t){return Object(j.jsx)(Z,{newMessage:n,handleOpen:r,data:e},"cvst-"+e.conversationid)}))})]})}var Z=function(e){var t,n,a=e.data,c=e.handleOpen,s=e.newMessage,o=r.a.useState(null),i=Object(L.a)(o,2),u=i[0],d=i[1],l=Object(Q.a)($.GET_USER_INFORMATION),b=Object(C.c)((function(e){return parseInt(e.user.uid)})),m=r.a.useState(0),f=Object(L.a)(m,2),v=f[0],O=f[1];return r.a.useEffect((function(){var e=a.userid1,t=a.userid2,n=b===e?t:e;l[0]({variables:{id:n}})}),[a,b]),r.a.useEffect((function(){(null===s||void 0===s?void 0:s.waitAllMessage.conversationid)===(null===a||void 0===a?void 0:a.conversationid)&&s.waitAllMessage.messageid!==(null===u||void 0===u?void 0:u.messageid)&&(d(s.waitAllMessage),"open"!==a.state?O((function(e){return e+1})):O(0))}),[s,a,u]),r.a.useEffect((function(){"open"===a.state&&O(0)}),[a.state]),Object(j.jsx)("div",{className:J.a.bubbleItem,onClick:function(){c(a)},children:Object(j.jsx)(Y,{badgeContent:v<9?v:"9+",color:"secondary",children:Object(j.jsx)(p,{userAvatar:null===(t=l[1])||void 0===t||null===(n=t.data)||void 0===n?void 0:n.getUserInformation.picture,size:"medium"})})})},ee=function(e){var t=e.onHide,n=e.thisEl,a=e.onClose,c=e.newMessage,s=r.a.useState([]),o=Object(L.a)(s,2),i=o[0],u=o[1],d=Object(C.c)((function(e){return parseInt(e.user.uid)})),l=Object(X.a)($.SEND_MESSAGE),b=Object(L.a)(l,1)[0],p=Object(Q.a)($.GET_USER_INFORMATION),m=r.a.useState({}),f=Object(L.a)(m,2),v=f[0],O=f[1],h=r.a.useState(""),g=Object(L.a)(h,2),x=g[0],_=g[1],y=w(),k=r.a.useRef(null),I=Object(V.a)($.GET_CONVERSATION_MESSAGE,{variables:{id:n.conversationid},fetchPolicy:"no-cache"});r.a.useEffect((function(){var e=I.data;if(null===e||void 0===e?void 0:e.getAllMessage){var t=Object(H.a)(e.getAllMessage);u((function(e){return Object(H.a)(t)}))}}),[I]),r.a.useEffect((function(){var e,t;(null===c||void 0===c?void 0:c.waitAllMessage.conversationid)===n.conversationid&&(i.length>0?(null===c||void 0===c?void 0:c.waitAllMessage.messageid)!==(null===(e=i[i.length-1])||void 0===e?void 0:e.messageid)&&u((function(e){return[].concat(Object(H.a)(e),[c.waitAllMessage])})):u([null!==(t=null===c||void 0===c?void 0:c.waitAllMessage)&&void 0!==t?t:[].concat()]))}),[c,n]),r.a.useEffect((function(){var e=n.userid1,t=n.userid2,a=d===e?t:e;p[0]({variables:{id:a}})}),[n,d]),r.a.useEffect((function(){var e,t;(null===(e=p[1])||void 0===e?void 0:e.data)&&O(null===(t=p[1])||void 0===t?void 0:t.data.getUserInformation)}),[p]),r.a.useEffect((function(){var e;(e=k.current).scrollTop=e.scrollHeight}),[i]);return Object(j.jsxs)("div",{className:"".concat(J.a.chatItem," ").concat("open"===n.state?J.a.chatOpen:J.a.chatHidden),children:[Object(j.jsxs)("div",{className:J.a.header,style:{backgroundColor:y.backgroundPost},children:[Object(j.jsx)("p",{children:(null===v||void 0===v?void 0:v.userfullname)||"loading"}),Object(j.jsx)("button",{className:"button",onClick:function(){t(n.conversationid)},children:"hide"}),Object(j.jsx)("button",{className:"button",onClick:function(){a(n.conversationid)},children:"close"})]}),Object(j.jsx)("div",{className:J.a.body,ref:k,children:Object(j.jsx)("div",{className:J.a.bodyContent,ref:k,children:i.map((function(e,t){return Object(j.jsx)("div",{className:J.a.commentItem,children:Object(j.jsx)(te,{nextUID:t<i.length-1&&i[t+1].userid-d===i[t].userid-d,avatar:(null===v||void 0===v?void 0:v.picture)||null,text:e.content,isthisuser:d===e.userid})},"chat-"+e.messageid+" "+n.conversationid)}))})}),Object(j.jsx)("div",{className:J.a.form,children:Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=n.userid1===d?n.userid2:n.userid1;t&&d&&(b({variables:{userid:d,receiver:t,conversationid:n.conversationid,content:x.length>0?x:"\ud83d\udc4d"}}),_(""))},children:[Object(j.jsx)("input",{value:x,onChange:function(e){_(e.target.value)},type:"text",placeholder:"enter your message"}),Object(j.jsx)("button",{style:{backgroundColor:x.length>0?"":"transparent"},className:"button",type:"submit",children:x.length>0?"send":"\ud83d\udc4d"})]})})]})},te=function(e){var t=e.text,n=e.isthisuser,a=e.avatar,c=e.nextUID,s=r.a.useRef();return console.log(c),r.a.useEffect((function(){(null===s||void 0===s?void 0:s.curent)&&s.current.scrollIntoView()}),[]),Object(j.jsxs)("div",{ref:s,className:"".concat(n?J.a.right:J.a.left," ").concat(J.a.messageGroup),children:[n?Object(j.jsx)(j.Fragment,{}):Object(j.jsx)(p,{blank:c,userAvatar:a,size:"small"}),Object(j.jsx)("div",{children:Object(j.jsx)("p",{style:"\ud83d\udc4d"===t.trim()?{fontSize:"2rem",background:"transparent",boxShadow:"unset"}:{},children:t})})]})};function ne(e){var t=e.userid,n=(Object(C.b)(),Object(C.c)((function(e){return e.Message.Conversation}))),a=Object(V.a)($.GET_ALL_CONVERSATION,{variables:{userid:t}});a.loading,a.err,a.data;return Object(j.jsx)("div",{style:{position:"relative"},children:n&&Object(j.jsx)(ae,{conversation:n,userid:t})})}var ae=function(e){var t=e.userid,n=e.conversation,a=Object(q.a)($.LISTEN_MESSAGE,{variables:{userid:t}}),c=Object(C.c)((function(e){return e.Message.Conversation[0]||null})),s=Object(C.b)();return r.a.useEffect((function(){if(null===a||void 0===a?void 0:a.data){console.log(a.data);var e=a.data.waitAllMessage,t=e.userid,n=e.receiver,r={conversationid:e.conversationid,lastmessage:e.content,userid1:Math.min(t,n),userid2:Math.max(t,n),state:"close"};null!==c&&(null===c||void 0===c?void 0:c.conversationid)===r.conversationid||s({type:"addConversation",payload:r})}}),[a]),Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(K,{conversation:n,newMessage:a.data})})};function re(e){e.userid;var t=Object(C.c)((function(e){return e.user.uid})),n=w(),a=Object(C.c)((function(e){return e.user.profileImage}));return Object(j.jsx)("header",{style:{backgroundColor:n.background,color:n.text},className:f.a.navbar,children:Object(j.jsxs)("div",{className:f.a.content,children:[Object(j.jsx)("div",{className:f.a.groupSearch,style:{display:"flex",alignItems:"center"},children:Object(j.jsx)(v.b,{to:"/",children:Object(j.jsx)(p,{userAvatar:h})})}),Object(j.jsxs)("div",{className:f.a.groupNotification,style:{display:"flex",alignItems:"center"},children:[Object(j.jsx)("div",{style:{marginRight:8},children:Object(j.jsx)(y,{count:3,icon:O})}),t&&Object(j.jsx)(v.b,{to:"/user/".concat(t),children:Object(j.jsx)(p,{userAvatar:a})})]})]})})}function ce(e){var t=e.children,n=Object(C.c)((function(e){return e.user.uid})),a=w(),r={backgroundColor:a.background,paddingBottom:"10vh",backgroundImage:'url("'.concat(a.backgroundImage,'")'),backgroundPosition:"left top",backgroundSize:"cover",backgroundAttachment:"fixed",minHeight:"100vh"};return Object(j.jsxs)("div",{style:r,children:[n&&Object(j.jsx)(ne,{userid:n}),Object(j.jsx)(re,{userid:n}),t]})}var se=n(17),oe=n(90),ie=n.n(oe),ue=n(75),de=n.n(ue),le=n.p+"static/media/setting.343a5657.svg",be=r.a.lazy((function(){return n.e(3).then(n.bind(null,234))}));function je(e){var t=e.user,n=e.isLocal,c=Object(C.b)(),s=w(),i=r.a.useState(!1),u=Object(L.a)(i,2),d=u[0],l=u[1],b=Object(C.c)((function(e){return e.user})),m=Object(X.a)($.INIT_MESSAGE),f=Object(L.a)(m,2),v=f[0],O=f[1].data;return r.a.useEffect((function(){(null===O||void 0===O?void 0:O.initConversation)&&c({type:"addConversation",payload:Object(o.a)(Object(o.a)({},O.initConversation),{},{state:"open"})})}),[O]),Object(j.jsxs)("div",{className:de.a.container,children:[Object(j.jsx)(a.Suspense,{fallback:Object(j.jsx)(pe,{}),children:Object(j.jsx)(be,{open:d,onClose:function(){l(!1)}})}),Object(j.jsx)("div",{className:de.a.userInfor,style:{backgroundColor:"rgba(".concat(s.background,",.5)")},children:Object(j.jsxs)("div",{className:de.a.group,children:[Object(j.jsx)(p,{size:"large",userAvatar:n?null===b||void 0===b?void 0:b.profileImage:null===t||void 0===t?void 0:t.picture}),Object(j.jsx)("p",{children:n?null===b||void 0===b?void 0:b.fullName:null===t||void 0===t?void 0:t.userfullname}),Object(j.jsx)("button",{onClick:function(){var e=parseInt(b.uid),n=parseInt(t.userid);if(e!==n){var a=Math.min(e,n),r=Math.max(e,n);v({variables:{userid1:a,userid2:r}})}},children:"message"})]})}),Object(j.jsx)("div",{className:de.a.background,children:Object(j.jsx)("button",{onClick:function(){l(!0)},children:Object(j.jsx)("img",{width:35,src:le})})})]})}var pe=function(){return Object(j.jsx)(j.Fragment,{})},me=n(63),fe=n.n(me),ve=n.p+"static/media/reaction.61917291.svg",Oe=n.p+"static/media/userreaction.ab536510.svg",he=n(64),ge=n.n(he);function xe(e){var t=e.media,n=e.onOpen;e.handleOpen;return Object(j.jsxs)("div",{onClick:n,className:"".concat(ge.a.container," ").concat(1===t.length?ge.a.single:ge.a.many),children:[Object(j.jsx)(_e,{media:t[0]}),t.length>=2&&Object(j.jsx)(_e,{left:t.length-2,media:t[1]})]})}var _e=function(e){var t=e.media,n=e.left,a=t.type.match(/^video/);return Object(j.jsx)("div",{className:ge.a.VideoThumbnail,style:{backgroundImage:a?"":'url("'.concat(b(t),'")'),width:"100%",height:"100%"},children:n>0&&Object(j.jsx)("div",{className:ge.a.mediaRemain,children:Object(j.jsxs)("p",{children:[n,"+"]})})})},ye=n(8),Ce=n.n(ye),ke=n(18),we=n(32),Ie=n.n(we);function Ne(e){var t=e.data,n=r.a.useState({}),a=Object(L.a)(n,2),c=a[0],s=a[1];r.a.useEffect((function(){s(t.user)}),[t]);var o=r.a.useState(!1),i=Object(L.a)(o,2),u=i[0],d=i[1];return(null===t||void 0===t?void 0:t.content)?Object(j.jsxs)("div",{className:Ie.a.commentItem,children:[Object(j.jsx)("div",{className:Ie.a.userinfor,children:Object(j.jsx)(v.b,{to:"/user/".concat(t.userid),children:Object(j.jsx)(p,{userAvatar:null===c||void 0===c?void 0:c.picture})})}),Object(j.jsx)("div",{children:Object(j.jsxs)("p",{className:Ie.a.comment,children:[Object(j.jsx)(v.b,{to:"/user/".concat(t.userid),children:Object(j.jsx)("strong",{children:null===c||void 0===c?void 0:c.userfullname})}),Object(j.jsx)("br",{}),t.content.length>20&&!u?t.content.substring(0,20):t.content,t.content.length>20&&Object(j.jsxs)("span",{onClick:function(){d((function(e){return!e}))},style:{color:"gray"},children:["...see ",u?"less":"more"]}),Object(j.jsx)("br",{}),Object(j.jsxs)("span",{className:Ie.a.commentInfor,children:[Se(t.datecreated)," ",Object(j.jsx)("span",{style:{color:"gray",marginLeft:20},children:"replies"})]})]})})]}):Object(j.jsx)(j.Fragment,{})}function Se(e){var t=e/1e3,n=new Date(0);return n.setUTCSeconds(t),n.toDateString()}function Ee(e){var t=e.inMediaBrowser,n=e.onOpen,a=e.onClose,c=e.postID,s=r.a.useState([]),o=Object(L.a)(s,2),i=o[0],u=o[1],d=r.a.useState(!1),l=Object(L.a)(d,2),b=l[0],p=l[1],m=Object(Q.a)($.GET_POST_LATEST_COMMENT,{fetchPolicy:"no-cache"}),f=Object(X.a)($.POST_COMMENT,{fetchPolicy:"no-cache"}),v=r.a.useRef(null),O=Object(C.c)((function(e){return e.user.uid})),h=r.a.useState(!1),g=Object(L.a)(h,2),x=g[0],_=g[1],y=Object(D.a)("(max-width:1000px)");r.a.useEffect((function(){void 0!==y&&null!==y&&_(!(!y||!n||t))}),[y,t,n]),r.a.useEffect((function(){n&&p(!0)}),[n]);var k=function(e,t){return function(){var n=Object(ke.a)(Ce.a.mark((function n(a){var r;return Ce.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r={comment:{content:a,userid:e,postid:t}},f[0]({variables:r.comment});case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()};return r.a.useEffect((function(){b&&m[0]({variables:{postid:c}})}),[b,c]),r.a.useEffect((function(){var e=m[1].data;e&&u((function(t){return[].concat(Object(H.a)(t),Object(H.a)(e.getPostCommentById))}))}),[m[1].data]),i?Object(j.jsxs)("div",{ref:v,className:"".concat(Ie.a.container," ").concat(n?Ie.a.open:Ie.a.close," ").concat(t?Ie.a.inMediaBrowser:""),children:[n?x?Object(j.jsx)(Pe,{onPostComment:k(O,c),comments:i,onClose:a,isOpen:!0}):Object(j.jsx)(Me,{onPostComment:k(O,c),comments:i,onClose:a}):Object(j.jsx)(j.Fragment,{}),n&&c&&Object(j.jsx)(Te,{update:u,postid:c})]}):Object(j.jsx)("p",{})}var Pe=function(e){var t=e.isOpen,n=e.onClose,a=e.comments,c=e.onPostComment,s=r.a.useRef(null);return Object(j.jsx)(F.a,{anchor:"bottom",open:t,onClose:n,children:Object(j.jsxs)("div",{className:Ie.a.drawerComment,children:[Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==s.current.value.trim()&&c(s.current.value).then((function(e){s.current.value=""}))},className:Ie.a.formComment,children:[Object(j.jsx)("input",{ref:s,type:"text"}),Object(j.jsx)("button",{type:"submit",children:"post"})]}),a.map((function(e){return Object(j.jsx)(Ne,{data:e},"comment-drawer-".concat(e.commentid,"-").concat(e.postid,"-").concat(e.userid))}))]})})},Me=function(e){var t=e.comments,n=(e.onClose,e.onPostComment),a=r.a.useRef(null);return Object(j.jsxs)("div",{children:[Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==a.current.value.trim()&&n(a.current.value).then((function(e){a.current.value=""}))},className:Ie.a.formComment,children:[Object(j.jsx)("input",{ref:a,type:"text"}),Object(j.jsx)("button",{type:"submit",children:"post"})]}),t.map((function(e){return Object(j.jsx)(Ne,{data:e},"comment-scroll-".concat(e.commentid,"-").concat(e.postid,"-").concat(e.userid))})),Object(j.jsx)("h4",{children:"load older comment"})]})},Te=function(e){var t=e.postid,n=e.update,a=Object(q.a)($.UPDATE_COMMENT,{variables:{postid:t}}),c=a.data;a.loading;return r.a.useEffect((function(){console.log(c),(null===c||void 0===c?void 0:c.getComment)&&n((function(e){return[c.getComment].concat(Object(H.a)(e))}))}),[c]),Object(j.jsx)(j.Fragment,{})};function Ae(e){var t=e/1e3,n=new Date(0);return n.setUTCSeconds(t),n.toDateString()}var Be=l.a.img+"graphql",Re=function(e){var t=e.userid,n=e.postid,a=e.iconcode;return"mutation{\n\tcreateLike(input:{userid:".concat(t,",postid:").concat(n,",iconcode:").concat(a,"}){\n   \n\n      change\n      status\n    \n  }\n}")},Ue=function(e){var t=e.userid,n=e.postid;return"query{\n  checkUserLikePost(input:{userid:".concat(t,",postid:").concat(n,"}) {\n    didlike\n  }\n}")},Le=function(e){var t=e.userid,n=e.postid;return"mutation{\n  deleteLike(input:{userid:".concat(t,",postid:").concat(n,"}){\n    \n\n    change\n      status\n    \n  }\n\n\n}")},Fe=function(){var e=Object(ke.a)(Ce.a.mark((function e(t){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge(Re(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=Object(ke.a)(Ce.a.mark((function e(t){var n,a;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userid,a=t.postid,e.next=3,Ge(Ue({userid:n,postid:a}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qe=function(){var e=Object(ke.a)(Ce.a.mark((function e(t){var n,a;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userid,a=t.postid,e.next=3,Ge(Le({userid:n,postid:a}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ge=function(){var e=Object(ke.a)(Ce.a.mark((function e(t){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(Be,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t})}).then((function(e){return e.json()}));case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",{err:e.t0});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),We=Object(g.a)((function(e){return{badge:{right:5,top:30,border:"2px solid ".concat(e.palette.background.paper),padding:"0 4px",backgroundColor:"#fd0061"}}}))(x.a);function $e(e){var t,n,c,s=e.data,i=e.onOpen,u=e.type,d=void 0===u?"minimal":u,l=e.propsStyle,b=Object(a.useState)(!1),m=Object(L.a)(b,2),f=m[0],O=m[1],h=Object(a.useState)("minimal"!==d),g=Object(L.a)(h,2),x=g[0],_=g[1],y=Object(a.useState)(null),k=Object(L.a)(y,2),I=k[0],N=k[1],S=Object(a.useState)(!1),E=Object(L.a)(S,2),P=E[0],M=E[1],T=Object(a.useState)(0),A=Object(L.a)(T,2),B=A[0],R=A[1],U=Object(C.c)((function(e){return e.user.uid})),F=w();return r.a.useEffect((function(){U&&s.postid&&De({userid:U,postid:s.postid}).then((function(e){if(e.data){var t=e.data.checkUserLikePost.didlike;N(!!t),R(parseInt(s.likecount))}else N(null)}))}),[s]),r.a.useEffect((function(){P&&(!1===I?Fe({userid:U,postid:s.postid,iconcode:1}).then((function(e){e.data&&(N(!0),R((function(e){return e+1})))})):!0===I&&qe({userid:U,postid:s.postid}).then((function(e){e.data&&(N(!1),R((function(e){return e-1})))})))}),[P]),r.a.useEffect((function(){var e;return null!==I&&(e=setTimeout((function(){M(!1)}),200)),function(){clearTimeout(e)}}),[I]),s?Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{style:Object(o.a)(Object(o.a)({},l),{},{backgroundColor:F.backgroundPost,color:F.text}),className:fe.a.container,tabIndex:"1",children:[Object(j.jsxs)("div",{className:fe.a.userInfor,children:[Object(j.jsx)(v.b,{to:"/user/".concat(null===s||void 0===s?void 0:s.userid),children:Object(j.jsx)(p,{userAvatar:null!==(t=null===s||void 0===s||null===(n=s.user)||void 0===n?void 0:n.picture)&&void 0!==t?t:null,size:"medium"})}),Object(j.jsxs)("div",{className:fe.a.postInfor,children:[Object(j.jsx)(v.b,{to:"/user/".concat(null===s||void 0===s?void 0:s.userid),children:Object(j.jsx)("p",{children:(null===s||void 0===s||null===(c=s.user)||void 0===c?void 0:c.userfullname)||""})}),Object(j.jsx)("p",{children:Ae(s.datecreated)})]})]}),Object(j.jsxs)("div",{title:"click to open post",className:fe.a.postContent,children:[Object(j.jsxs)("p",{children:[f?s.content:s.content.substring(0,200),Object(j.jsxs)("span",{style:{color:"gray",display:s.content.length<200?"none":""},onClick:function(e){O((function(e){return!e})),f&&setTimeout((function(){e.target.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}),50)},children:["...see ",f?"less":"more"]})]}),"[]"!==(null===s||void 0===s?void 0:s.media)&&"minimal"===d?Object(j.jsx)(xe,{onOpen:i,media:JSON.parse(s.media)}):Object(j.jsx)(j.Fragment,{})]}),Object(j.jsxs)("div",{className:fe.a.like_comment,children:[Object(j.jsx)("button",{disabled:P||null===I,className:"button-none",onClick:function(){M(!0)},children:Object(j.jsx)(We,{badgeContent:B,color:"secondary",children:Object(j.jsx)(p,{userAvatar:I?Oe:ve,round:!1})})}),Object(j.jsx)("div",{}),Object(j.jsx)("p",{style:{cursor:"pointer"},onClick:function(){_((function(e){return!e}))},children:"comments"})]}),Object(j.jsx)(Ee,{userId:s.userid,postID:s.postid,onOpen:x,onClose:function(){_(!1)},inMediaBrowser:"minimal"!==d})]})}):Object(j.jsx)(j.Fragment,{})}var Ve=n(53),He=n.n(Ve),ze=n(54),Je=n.n(ze),Qe=n.p+"static/media/back.bd68ef98.svg",Xe=n.p+"static/media/forward.45007aa6.svg";function Ye(e){var t=e.media,n=r.a.useState(0),a=Object(L.a)(n,2),c=a[0],s=a[1],o=r.a.useRef(null),i=r.a.useState({width:0,height:0}),u=Object(L.a)(i,2),d=u[0],l=u[1],b=function(e){return function(){s((function(n){return"r"===e?Math.min(n+1,t.length-1):Math.max(n-1,0)}))}};return r.a.useEffect((function(){var e=function(){var e=o.current.offsetWidth,t=o.current.offsetHeight;l({width:e,height:t})};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[c]),Object(j.jsxs)("div",{className:Je.a.container,ref:o,children:[c>0&&Object(j.jsx)("button",{onClick:b("l"),className:Je.a.Left,children:Object(j.jsx)("img",{alt:"go back",src:Qe})}),Object(j.jsx)(et,{ctnDimension:d,media:t[c]}),c<t.length-1&&Object(j.jsx)("button",{onClick:b("r"),className:Je.a.Right,children:Object(j.jsx)("img",{alt:"go forward",src:Xe})})]})}var Ke=function(e){var t=e.image,n=e.ctnDimension,a=r.a.useRef(null),c=r.a.useState(!1),s=Object(L.a)(c,2),o=s[0],i=s[1];return Object(j.jsx)("img",{ref:a,onLoad:function(e){var t=e.target,a=t.offsetWidth,r=t.offsetHeight;a>n.width&&i(!0),r>n.height&&i(!1)},style:{userSelect:"none"},alt:"user post",className:o?Je.a.ImageWidth:Je.a.ImageHeight,src:b(t)})},Ze=function(e){var t=e.video;return Object(j.jsx)("video",{controls:!0,className:Je.a.Video,src:b(t)})},et=function(e){var t=e.media,n=e.ctnDimension;return t.type.match(/^video/)?Object(j.jsx)(Ze,{video:t}):Object(j.jsx)(Ke,{ctnDimension:n,image:t})},tt=n.p+"static/media/minimize.2ade6ffd.svg";function nt(e){var t=e.open,n=void 0!==t&&t,c=e.onClose,s=e.postid,o=void 0===s?null:s,i=Object(a.useState)({}),u=Object(L.a)(i,2),d=u[0],l=u[1];return r.a.useEffect((function(){document.body.style.overflow=n?"hidden":""}),[n]),r.a.useEffect((function(){return o>=0&&function(e){try{return Ge(function(e){return"\t{\n  getPostInformationById(postid:".concat(e,"){\n    postid\n    userid\n    content\n    media\n    datecreated\n    likecount\n    embeded\n    \n    user{\n      userfullname\n      userid\n      userdisplayname\n      picture\n    }\n  }\n}")}(e))}catch(t){return{err:t}}}(o).then((function(e){e.data&&l(e.data.getPostInformationById)})),function(){document.body.style.overflow=""}}),[n,o]),n?Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:He.a.container,children:d.postid&&Object(j.jsxs)("div",{className:"".concat(He.a.postWrapper," ").concat("[]"!==d.media?He.a.hasMedia:He.a.noMedia),children:["[]"!==(null===d||void 0===d?void 0:d.media)&&Object(j.jsxs)("div",{className:He.a.mediaViewer,children:[Object(j.jsx)("button",{className:He.a.closeButton,onClick:c,children:Object(j.jsx)("img",{src:tt,alt:"exit media"})}),Object(j.jsx)(Ye,{media:JSON.parse(d.media)})]}),Object(j.jsx)($e,{type:"detail",data:d})]})})}):Object(j.jsx)(j.Fragment,{})}var at=n(43);function rt(e){var t=e.posts,n=e.setPosts,c=e.byUID,s=void 0!==c&&c,o=e.uid,i=Object(a.useState)(!1),u=Object(L.a)(i,2),d=u[0],l=u[1],b=Object(a.useState)(null),p=Object(L.a)(b,2),m=p[0],f=p[1],v=Object(a.useState)(!0),O=Object(L.a)(v,2),h=(O[0],O[1],Object(Q.a)($.GET_LATEST_POST,{fetchPolicy:"no-cache"})),g=Object(Q.a)($.GET_USER_LATEST_POST,{fetchPolicy:"no-cache"});Object(a.useEffect)((function(){o>=0&&!0===s?g[0]({variables:{userid:o}}):h[0]()}),[o,s]),r.a.useEffect((function(){var e=h[1].data;e&&n(e.getLatestPost)}),[h]),r.a.useEffect((function(){var e=g[1].data;e&&n(e.getLatestPostByUserID)}),[g]);var x=function(e){return function(){l(!0),f(t[e].postid)}};return t.length>0?Object(j.jsxs)("div",{children:[m&&Object(j.jsx)(nt,{open:d,postid:m,onClose:function(){l(!1)}}),t.map((function(e,t){return Object(j.jsx)($e,{propsStyle:{marginBottom:17},onOpen:x(t),data:e},"post-id-"+e.postid)}))]}):Object(j.jsx)(j.Fragment,{})}var ct=n(65),st=n.n(ct),ot=n.p+"static/media/picture.b0c992ca.svg",it=n.p+"static/media/video.f3b3fb0e.svg",ut=n(42),dt=n.n(ut),lt=n(130);function bt(e){var t=e.value,n=e.setValue;return Object(j.jsx)("div",{className:dt.a.editorWrapper,children:Object(j.jsx)("textarea",{value:t,onChange:function(e){n(e.target.value)}})})}function jt(e){var t=e.files,n=e.handleFiles,r=Object(a.useCallback)((function(e){return function(){n((function(t){return t.filter((function(t,n){return e!==n}))}))}}),[n]);return Object(j.jsx)("div",{className:dt.a.fileViewerWrapper,children:t.map((function(e,t){return Object(j.jsx)(pt,{onDelete:r(t),index:t+1,file:e},"file+"+t)}))})}function pt(e){var t=e.file,n=e.index,r=e.onDelete,c=Object(a.useState)(""),s=Object(L.a)(c,2),i=s[0],u=s[1];return Object(a.useEffect)((function(){var e=new FileReader;e.addEventListener("load",(function(e){var t=e.target.result;u(t)}),[]),e.readAsDataURL(t)}),[t]),Object(j.jsxs)("div",{draggable:!0,style:Object(o.a)({backgroundImage:"url(".concat(i,")")},{backgroundPosition:"center",backgroundSize:"cover",display:"flex",alignItems:"flex-end",justifyContent:"space-between"}),children:[Object(j.jsx)(x.a,{badgeContent:n,color:"secondary",children:Object(j.jsx)("div",{style:{height:15,width:15}})}),Object(j.jsx)("button",{onClick:r,style:{backgroundColor:"var(--light-button)",color:"white"},className:"button",children:"delete"})]})}function mt(e){var t=e.onClose,n=e.appendPost,c=w(),s=r.a.useState(""),i=Object(L.a)(s,2),u=i[0],d=i[1],l=Object(C.c)((function(e){return e.user})),b=Object(a.useRef)(null),p=function(){var e=Object(a.useState)([]),t=Object(L.a)(e,2),n=t[0],r=t[1];return[n,function(e){var t,n=Object(lt.a)(e.target.files);try{var a=function(){var e=t.value;r((function(t){return[].concat(Object(H.a)(t),[e])}))};for(n.s();!(t=n.n()).done;)a()}catch(c){n.e(c)}finally{n.f()}},r]}(),m=Object(L.a)(p,3),f=m[0],v=m[1],O=m[2],h=Object(a.useState)(!1),g=Object(L.a)(h,2),_=g[0],y=g[1],k=Object(a.useState)(!1),I=Object(L.a)(k,2),N=I[0],S=I[1],E=Object(a.useState)({message:""}),P=Object(L.a)(E,2),M=P[0],T=P[1],A=Object(a.useCallback)((function(e){M.message&&T({message:""}),d(e)}),[T,d,M.message]),B=Object(a.useCallback)((function(){b.current.click()}),[b]),R=Object(a.useCallback)((function(e){t()}),[t]),U=Object(a.useCallback)((function(){S(!0),T({message:"posting!"})}),[]);return Object(a.useEffect)((function(){if(!0===N)if(l.uid&&u.trim().length){var e=new FormData;e.append("content",u),e.append("count",f.length),e.append("uid",l.uid),f.forEach((function(t){e.append("uploads",t)})),at.a.makePost(e).then((function(e){if(e.postid){var a=Object(o.a)(Object(o.a)({},e),{},{user:{userid:l.uid,userfullname:l.fullName,picture:l.profileImage}});n(a),T({message:"success!"}),t()}})).catch((function(e){T({message:"post failed!"})}))}else T({message:"no empty post!"}),S(!1)}),[N,l.uid,u,f,n,t]),Object(j.jsxs)("div",{className:dt.a.container,style:{backgroundColor:"rbga(".concat(c.background,",.3)")},children:[Object(j.jsx)("div",{className:dt.a.hiddenInput,children:Object(j.jsx)("input",{onChange:v,ref:b,type:"file",multiple:!0,accept:"image/png, image/gif, image/jpeg, video/*"})}),Object(j.jsx)("div",{title:"close editor",className:dt.a.overlay,onClick:function(e){N||t()}}),Object(j.jsxs)("div",{className:dt.a.editor,style:{backgroundColor:c.background,color:c.text},children:[Object(j.jsx)("div",{className:dt.a.userProfile,children:Object(j.jsxs)("p",{children:[_?"Edit file ("+f.length+")":"Write post"," ",Object(j.jsx)("strong",{children:M.message})]})}),_?Object(j.jsx)(jt,{files:f,handleFiles:O}):Object(j.jsx)(bt,{value:u,setValue:A}),Object(j.jsxs)("div",{className:dt.a.groupButton,children:[Object(j.jsx)("button",{disabled:N,className:"button",onClick:B,children:"add media"}),Object(j.jsx)(x.a,{invisible:_,badgeContent:f.length||0,color:"secondary",children:Object(j.jsxs)("button",{className:"button",onClick:function(){y((function(e){return!e}))},children:["view ",_?"post":"media"]})}),Object(j.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:Object(j.jsx)("button",{disabled:N,className:"button bg-pink",onClick:U,children:"post"})}),Object(j.jsx)("button",{className:"button",disabled:N,onClick:R,children:"cancel"})]})]})]})}var ft=n.p+"static/media/checkin.b8d0c75f.svg";function vt(e){var t=e.appendPost,n=Object(a.useState)(!1),c=Object(L.a)(n,2),s=c[0],o=c[1],i=Object(C.c)((function(e){return e.user.profileImage})),u=r.a.useCallback((function(){o(!1)}),[]),d=w();return Object(j.jsxs)("div",{style:{backgroundColor:d.background},className:st.a.container,children:[s&&Object(j.jsx)(mt,{appendPost:t,onClose:u}),Object(j.jsx)("div",{className:st.a.CheckInItem,children:Object(j.jsx)(p,{size:"large",userAvatar:null!==i&&void 0!==i?i:null})}),Object(j.jsxs)("div",{className:st.a.CheckInStatus,children:[Object(j.jsx)("div",{className:st.a.CheckinForm,children:Object(j.jsx)("button",{onClick:function(){o(!0)},children:"What's in your mind!"})}),Object(j.jsxs)("div",{className:st.a.CheckinButton,children:[Object(j.jsxs)("button",{onClick:function(){o(!0)},children:[Object(j.jsx)(p,{userAvatar:ot}),Object(j.jsx)("p",{children:"Media"})]}),Object(j.jsxs)("button",{children:[Object(j.jsx)(p,{userAvatar:it}),Object(j.jsx)("p",{children:"Live"})]}),Object(j.jsxs)("button",{children:[Object(j.jsx)(p,{userAvatar:ft}),Object(j.jsx)("p",{children:"Checkin! "})]})]})]})]})}var Ot=n(131),ht=n.n(Ot);var gt=[{name:"home",path:"/",Component:function(){var e=Object(a.useState)([]),t=Object(L.a)(e,2),n=t[0],r=t[1],c=w(),s=Object(a.useCallback)((function(e){r((function(t){return[e].concat(Object(H.a)(t))}))}),[]);return Object(j.jsxs)("div",{className:ht.a.container,style:{backgroundColor:c.background,color:c.text},children:[Object(j.jsx)(vt,{appendPost:s}),Object(j.jsx)(rt,{byUID:!1,uid:null,posts:n,setPosts:r})]})}},{name:"user",path:"/user/:uid",Component:function(e){var t=e.match,n=Object(C.c)((function(e){return e.user.uid})),c=Object(a.useState)([]),s=Object(L.a)(c,2),o=s[0],i=s[1],u=Object(a.useState)(null),d=Object(L.a)(u,2),l=d[0],b=d[1],p=w(),m=Object(V.a)($.GET_USER_INFORMATION,{variables:{id:parseInt(t.params.uid)},errorPolicy:"all"}),f=(m.loading,m.error),v=m.data,O=r.a.useCallback((function(e){i((function(t){return[e].concat(Object(H.a)(t))}))}),[]);return r.a.useEffect((function(){v&&b(v.getUserInformation)}),[v,f,t]),(null===l||void 0===l?void 0:l.userid)?Object(j.jsxs)("div",{className:ie.a.pageWrapper,style:{backgroundColor:p.background,color:p.text},children:[Object(j.jsx)(je,{isLocal:n===l.userid,user:l}),l.userid===n&&Object(j.jsxs)("div",{className:ie.a.CheckInWrapper,children:[" ",Object(j.jsx)(vt,{appendPost:O})]}),Object(j.jsx)("div",{className:ie.a.NewsFeedWrapper,children:Object(j.jsx)(rt,{posts:o,uid:l.userid,byUID:!0,setPosts:i})})]}):Object(j.jsx)(j.Fragment,{})}},{name:"post",path:"/post",Component:function(){return Object(j.jsx)("h1",{children:"post page"})}}];var xt=function(){return Object(j.jsx)(ce,{children:Object(j.jsx)(se.c,{children:gt.map((function(e){var t=e.path,n=e.name,a=e.Component;return Object(j.jsx)(se.a,{children:function(e){return Object(j.jsx)(a,Object(o.a)({},e))},exact:!0,path:t},n)}))})})},_t=n(80),yt=n(46),Ct=n.n(yt),kt=n(132),wt=n.n(kt),It=n(58);function Nt(e){return function(t){var n=e.user,a=n.uid,r=n.userFullName,c={loggedIn:!0,uid:a,displayName:n.userDisplayName,profileImage:n.picture,fullName:r};t({type:It.a.logInUser,payload:c})}}function St(){var e=Object(a.useState)(!0),t=Object(L.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)((function(){return{username:"",password:"",userDisplayName:"",userFullName:"",dateOfBirth:"",dateCreatedAccount:(new Date).toISOString().substring(0,10),email:"",phone:"",gender:""}})),s=Object(L.a)(c,2),i=s[0],u=s[1],d=Object(C.b)(),l=function(e){return function(t){var n=t.target.value;"username"!==e&&"password"!==e||(" "===n[n.length-1]&&alert("kh\xf4ng \u0111\u01b0\u1ee3c c\xf3 kho\u1ea3ng c\xe1ch"),n=n.trim()),u((function(t){return Object(o.a)(Object(o.a)({},t),{},Object(_t.a)({},e,n))}))}};return Object(j.jsx)("div",{className:Ct.a.container,children:Object(j.jsxs)("div",{className:Ct.a.Form,children:[n?Object(j.jsx)(Pt,{handleLogin:function(e){e.preventDefault();var t=i.username,n=i.password;at.a.loginExistingUser({username:t,password:n}).then((function(e){e.err||d(Nt(e))}))},user:i,handleChange:l}):Object(j.jsx)(Et,{handleRegister:function(e){e.preventDefault(),at.a.registerNewUser(i).then((function(e){e.err||d(Nt(e))}))},user:i,handleChange:l}),Object(j.jsx)("p",{children:n?"Don't have account?":"Account already exists?"}),Object(j.jsxs)("div",{className:Ct.a.Suggest,children:[Object(j.jsx)("button",{onClick:function(){r((function(e){return!e}))},children:n?"Register":"Login"}),Object(j.jsx)("span",{children:"or"}),Object(j.jsx)(wt.a,{appId:"142129044562039",redirectUri:"google.com",cssClass:"facebook-login-icon",autoLoad:!1,fields:"name,email,picture",onClick:function(){console.log("clicked")},callback:function(e){console.log(e)}})]})]})})}var Et=function(e){var t=e.user,n=e.handleChange,a=e.handleRegister;return Object(j.jsxs)("form",{onSubmit:a,className:Ct.a.MainForm,children:[[{name:"Username",type:"text",placeholder:"login account",isRequired:!0,key:"username"},{name:"Password",type:"password",placeholder:"secure password",isRequired:!0,key:"password"},{name:"Full name",type:"text",placeholder:"your full name",isRequired:!0,key:"userFullName"},{name:"Display name",type:"text",placeholder:"your display name",isRequired:!0,key:"userDisplayName"},{name:"Gender",type:"text",placeholder:"what is your gender",isRequired:!0,key:"gender"},{name:"Email",type:"email",placeholder:"your backup email",isRequired:!0,key:"email"},{name:"Phone",type:"text",placeholder:"your phone number",isRequired:!0,key:"phone"},{name:"Date of birth",type:"date",placeholder:"",isRequired:!0,key:"dateOfBirth"}].map((function(e,a){return Object(j.jsxs)("div",{className:Ct.a.groupForm,children:[Object(j.jsx)("label",{children:e.name}),Object(j.jsx)("input",{type:e.type,value:t[e.key],onChange:n(e.key),placeholder:e.placeholder,required:e.isRequired})]},"register-id-"+a)})),Object(j.jsx)("button",{type:"submit",children:"Create Account"})]})},Pt=function(e){var t=e.user,n=e.handleChange,a=e.handleLogin;return Object(j.jsxs)("form",{onSubmit:a,className:Ct.a.MainForm,children:[[{name:"Username",type:"text",placeholder:"login account",isRequired:!0,key:"username"},{name:"Password",type:"password",placeholder:"secure password",isRequired:!0,key:"password"}].map((function(e,a){return Object(j.jsxs)("div",{className:Ct.a.groupForm,children:[Object(j.jsx)("label",{children:e.name}),Object(j.jsx)("input",{type:e.type,value:t[e.key],onChange:n(e.key),placeholder:e.placeholder,required:e.isRequired})]},"login-id-"+a)})),Object(j.jsx)("button",{type:"submit",children:"Login"})]})};var Mt=n(60),Tt=n(133),At={loggedIn:!1,uid:null,displayName:null,profileImage:null,fullName:null},Bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At,t=arguments.length>1?arguments[1]:void 0;return t.type===It.a.logInUser?Object(o.a)(Object(o.a)({},e),t.payload):t.type===It.a.logOutUser?Object(o.a)({},At):t.type===It.a.changeAvatar?Object(o.a)(Object(o.a)({},e),t.payload):e},Rt={theme:"default"},Ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt;return e},Lt={queue:[],Conversation:[]},Ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt,t=arguments.length>1?arguments[1]:void 0;if("addToQueue"===t.type)return Object(o.a)(Object(o.a)({},e),{},{queue:[].concat(Object(H.a)(e.queue),[t.payload])});if("popFistElement"===t.type)return console.log("doing"),Object(o.a)(Object(o.a)({},e),{},{queue:Object(H.a)(e.queue).filter((function(e,t){return 0!==t}))});if("addConversation"===t.type){var n=Object(H.a)(e.Conversation),a=[t.payload].concat(Object(H.a)(n.filter((function(e){return e.conversationid!==t.payload.conversationid}))));return Object(o.a)(Object(o.a)({},e),{},{Conversation:a})}if("getAllConversation"===t.type)return Object(o.a)(Object(o.a)({},e),{},{Conversation:t.payload});if("openConversation"===t.type){var r=t.payload,c=Object(H.a)(e.Conversation),s=c.map((function(e){return r===e.conversationid?Object(o.a)(Object(o.a)({},e),{},{state:"open"}):e}));return Object(o.a)(Object(o.a)({},e),{},{Conversation:s})}if("hideConversation"===t.type){var i=t.payload,u=Object(H.a)(e.Conversation),d=u.map((function(e){return i===e.conversationid?Object(o.a)(Object(o.a)({},e),{},{state:"hide"}):e}));return Object(o.a)(Object(o.a)({},e),{},{Conversation:d})}if("closeConversation"===t.type){var l=t.payload,b=Object(H.a)(e.Conversation),j=b.map((function(e){return l===e.conversationid?Object(o.a)(Object(o.a)({},e),{},{state:"close"}):e}));return Object(o.a)(Object(o.a)({},e),{},{Conversation:j})}return e},Dt=Object(Mt.combineReducers)({user:Bt,settings:Ut,Message:Ft}),qt=[n(134).a],Gt=Object(Mt.createStore)(Dt,Object(Tt.composeWithDevTools)(Mt.applyMiddleware.apply(void 0,qt))),Wt=(n(178),n(97)),$t=n(191),Vt=n(189),Ht=n(229),zt=n(33),Jt=n(45),Qt=n(135),Xt=window.location.host,Yt=new Ht.a({uri:"http://".concat(Xt,"/graphql")}),Kt=new Qt.a({uri:"ws://".concat(Xt,"/graphql"),options:{reconnect:!0}}),Zt=Object(zt.split)((function(e){var t=e.query,n=Object(Jt.e)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),Kt,Yt),en=new Wt.a({link:Zt,cache:new $t.a}),tn=function(){var e=function(){var e=Object(a.useState)(null),t=Object(L.a)(e,2),n=t[0],r=t[1],c=Object(C.c)((function(e){return e.user.loggedIn}));return Object(a.useEffect)((function(){r(c)}),[c]),n}();return null!==e?!0===e?Object(j.jsx)(xt,{}):Object(j.jsx)(St,{}):Object(j.jsx)(j.Fragment,{})};s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(C.a,{store:Gt,children:Object(j.jsx)(v.a,{children:Object(j.jsx)(Vt.a,{client:en,children:Object(j.jsx)(tn,{})})})})}),document.getElementById("root"))},22:function(e,t,n){"use strict";var a={dev:"//api",img:"//"};t.a=a},26:function(e,t,n){e.exports={container:"ChatBubble_container__3S5sJ",bubbleContainer:"ChatBubble_bubbleContainer__2rnxW",bubbleItem:"ChatBubble_bubbleItem__S5xGB",chatGroups:"ChatBubble_chatGroups__BmNCM",chatItem:"ChatBubble_chatItem__juEdF",header:"ChatBubble_header__8Ju_9",form:"ChatBubble_form__5E2X2",body:"ChatBubble_body__188j2",bodyContent:"ChatBubble_bodyContent__7ssOB",chatHidden:"ChatBubble_chatHidden__1modv",left:"ChatBubble_left__1aWr4",right:"ChatBubble_right__Ya3Kc",commentItem:"ChatBubble_commentItem__2JRzb",messageGroup:"ChatBubble_messageGroup__TzKEx"}},32:function(e,t,n){e.exports={container:"Comment_container__3imMD",userinfor:"Comment_userinfor__1odgz",commentItem:"Comment_commentItem__2pmZ5",comment:"Comment_comment__1PIRq",showup:"Comment_showup__2CGhg",commentInfor:"Comment_commentInfor__26YK_",drawerComment:"Comment_drawerComment__3qZ-O",formComment:"Comment_formComment__3xEeE"}},42:function(e,t,n){e.exports={container:"PostEdit_container__1cABj",overlay:"PostEdit_overlay__3nG28",editor:"PostEdit_editor__3GTHV",editorWrapper:"PostEdit_editorWrapper__1BXqX",fileViewerWrapper:"PostEdit_fileViewerWrapper__GXxpg",groupButton:"PostEdit_groupButton__1zwPx",hiddenInput:"PostEdit_hiddenInput__31IVS"}},43:function(e,t,n){"use strict";var a=n(8),r=n.n(a),c=n(18),s=n(22),o=n(91),i=n.n(o),u={registerNewUser:function(e){return Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(s.a.dev,"/user/signup"),d("POST",{user:e})).then((function(e){return e.json()}));case 3:if(!(n=t.sent).status){t.next=6;break}return t.abrupt("return",n);case 6:throw new Error;case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",{err:"bad request"});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},loginExistingUser:function(e){return Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(s.a.dev,"/user/login"),d("POST",{user:e})).then((function(e){return e.json()}));case 3:if(!(n=t.sent).status){t.next=6;break}return t.abrupt("return",n);case 6:throw new Error;case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",{err:"bad request from client"});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},loginFacebook:function(e){return Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(s.a.dev,"/user/fblogin"),d("POST",{user:e})).then((function(e){return e.json()}));case 3:if(!(n=t.sent).status){t.next=6;break}return t.abrupt("return",n);case 6:throw new Error;case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",{err:"bad request"});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},makePost:function(e){return Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i()({method:"post",url:"".concat(s.a.dev,"/post/newpost"),data:e,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data})).catch((function(e){console.log(e)}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))()},getLatestPost:function(){return Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get("".concat(s.a.dev,"/post/latest")).then((function(e){return e.data}));case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{err:"bad request! no post."});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},getUserById:function(e){return Object(c.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.abrupt("return",fetch("".concat(s.a.dev,"/user/information/").concat(e)).then((function(e){return e.json()})));case 4:return t.prev=4,t.t0=t.catch(0),t.abrupt("return",{err:t.t0.message});case 7:case"end":return t.stop()}}),t,null,[[0,4]])})))()},getEarlierPostByLastId:function(e){return Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(s.a.dev,"/post/earlier/").concat(e)).then((function(e){return e.json()}));case 3:return n=t.sent,t.abrupt("return",n);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{err:t.t0.message});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getAllPostById:function(e){return Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(s.a.dev,"/post/allpost/").concat(e)).then((function(e){return e.json()}));case 3:return n=t.sent,t.abrupt("return",n);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{err:t.t0.message});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getUserEarlierPostById:function(e,t){return Object(c.a)(r.a.mark((function n(){var a;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("".concat(s.a.dev,"/post/earlier/").concat(e,"/").concat(t)).then((function(e){return e.json()}));case 3:return a=n.sent,n.abrupt("return",a);case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",{err:n.t0.message});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},setUserAvatar:function(e,t){return Object(c.a)(r.a.mark((function n(){var a;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i()({method:"put",url:"".concat(s.a.dev,"/user/avatar/").concat(e),data:t,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data})).catch((function(e){console.log(e)}));case 3:return a=n.sent,n.abrupt("return",a);case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",{err:n.t0.message});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},userCommentPost:function(e){return Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(s.a.dev,"/post/comment"),d("POST",e)).then((function(e){return e.json()}));case 3:return n=t.sent,t.abrupt("return",n);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{err:"bad request"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getPostLatestComment:function(e){return Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(s.a.dev,"/post/comment/").concat(e)).then((function(e){return e.json()}));case 3:return n=t.sent,t.abrupt("return",n);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{err:"bad request"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},updateCommentByLastID:function(e){return Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(s.a.dev,"/post/comment/update"),d("POST",e)).then((function(e){return e.json()}));case 3:return n=t.sent,t.abrupt("return",n);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{err:"not found"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},d=function(e,t){return{method:e,mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}};t.a=u},46:function(e,t,n){e.exports={container:"LoginPage_container__2iffR",Form:"LoginPage_Form__1MiFU",MainForm:"LoginPage_MainForm__1w3oE",Suggest:"LoginPage_Suggest__2T50A",groupForm:"LoginPage_groupForm__3B-v9"}},52:function(e,t,n){e.exports={small:"Avatar_small__1S5ft",medium:"Avatar_medium__2Wn88",large:"Avatar_large__16sur",avatar:"Avatar_avatar__2GRnH"}},53:function(e,t,n){e.exports={container:"MediaBrowser_container__l0ovP",postWrapper:"MediaBrowser_postWrapper__2d20Z",hasMedia:"MediaBrowser_hasMedia__3IbhH",noMedia:"MediaBrowser_noMedia__2R8dK",overlay:"MediaBrowser_overlay__nQIPx",mediaViewer:"MediaBrowser_mediaViewer__1GHtf",closeButton:"MediaBrowser_closeButton__1SpPQ"}},54:function(e,t,n){e.exports={container:"MediaViewer_container__1UA21",Left:"MediaViewer_Left__tRnSH",Right:"MediaViewer_Right__1PFCw",Video:"MediaViewer_Video__1Mwxg",ImageHeight:"MediaViewer_ImageHeight__39tQr",ImageWidth:"MediaViewer_ImageWidth__eMG_V"}},58:function(e,t,n){"use strict";t.a={logInUser:"user/LogInUser",logOutUser:"user/LogOutUser",changeAvatar:"user/changeAvatars"}},63:function(e,t,n){e.exports={container:"Post_container__705-l",userInfor:"Post_userInfor__3TsEz",postInfor:"Post_postInfor__2u5Dy",postContent:"Post_postContent__1O4Rf",postMedia:"Post_postMedia__1d6sf",like_comment:"Post_like_comment__D8NQK"}},64:function(e,t,n){e.exports={container:"Preview_container__1bfQb",single:"Preview_single__1vPF6",many:"Preview_many__PfN9x",VideoThumbnail:"Preview_VideoThumbnail__MwOHt",mediaRemain:"Preview_mediaRemain__sQjtr"}},65:function(e,t,n){e.exports={container:"CheckIn_container__lONDU",CheckInStatus:"CheckIn_CheckInStatus__1Sa0w",CheckInItem:"CheckIn_CheckInItem__1mM14",CheckinForm:"CheckIn_CheckinForm__2Yoyx",CheckinButton:"CheckIn_CheckinButton__3Itp0"}},74:function(e,t,n){e.exports={groupNotification:"Navbar_groupNotification__3NmGa",navbar:"Navbar_navbar__3HLis",content:"Navbar_content__j5B0b",groupSearch:"Navbar_groupSearch__dY8E7"}},75:function(e,t,n){e.exports={container:"UserWall_container__ASS1k",background:"UserWall_background__1lSyb",showup:"UserWall_showup__2KldS",userInfor:"UserWall_userInfor__PIxU_",group:"UserWall_group__2SClk"}},88:function(e,t,n){e.exports={searchBox:"SearchBox_searchBox__1sNLE",overlaySearch:"SearchBox_overlaySearch__lq-N2",searchTitle:"SearchBox_searchTitle__nYQG3"}},90:function(e,t,n){e.exports={pageWrapper:"UserPage_pageWrapper__3X4YX",showup:"UserPage_showup__2HiG8",CheckInWrapper:"UserPage_CheckInWrapper__2Mrh8",NewsFeedWrapper:"UserPage_NewsFeedWrapper__1olmX"}}},[[190,1,2]]]);
//# sourceMappingURL=main.da519725.chunk.js.map