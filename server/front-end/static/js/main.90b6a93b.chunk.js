(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(9),s=n.n(c),i=n(32),o=n.n(i),u=n.p+"static/media/avatar.6537f30a.jpg",l=n(1);function d(e){var t,n=e.userAvatar,r=e.size;switch(void 0===r?"small":r){case"small":t=o.a.small;break;case"medium":t=o.a.medium;break;case"large":t=o.a.large;break;default:t=o.a.small}return Object(l.jsx)("div",{className:"".concat(o.a.avatar," ").concat(t),children:Object(l.jsx)("img",{alt:"user avatar",src:null!==n&&void 0!==n?n:u})})}var j=n(37),b=n.n(j),p=n.p+"static/media/message.a71a633a.svg",h=n.p+"static/media/logo.2163973a.svg",f=n(22),m=n(127),O=Object(f.a)((function(e){return{badge:{right:4,top:4,border:"2px solid ".concat(e.palette.background.paper),padding:"0 4px"}}}))(m.a);function v(e){var t=e.icon,n=e.size,r=e.count;return Object(l.jsx)(O,{badgeContent:null!==r&&void 0!==r?r:4,color:"secondary",children:Object(l.jsx)(d,{userAvatar:t,size:n})})}var x=n.p+"static/media/notification.5099f905.svg",g=n(5),_=n(44),y=n.n(_),k=n.p+"static/media/close.7bf27813.svg",N=n.p+"static/media/search.70b257cc.svg",C=n(129),w=n(128),S=function(){var e=Object(w.a)("(max-width:700px)"),t=Object(r.useState)(!0),n=Object(g.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(!1),i=Object(g.a)(s,2),o=i[0],u=i[1];return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(I,{isOpen:o,setOpen:u}),Object(l.jsxs)("form",{className:y.a.searchBox,style:{backgroundColor:e?"transparent":""},children:[Object(l.jsx)("div",{style:{display:a?"":"none"},children:Object(l.jsx)("img",{onClick:function(){e&&u(!0)},alt:"icon",title:"Search",width:e?"32":"23",src:N})}),Object(l.jsx)("input",{placeholder:"Search Anything!",style:{display:e?"none":""},onFocus:function(){c(!1)},onBlur:function(){c(!0)},type:"text"})]})]})},I=function(e){var t=e.isOpen,n=e.setOpen,c=Object(r.useRef)(null);return Object(r.useEffect)((function(){(null===c||void 0===c?void 0:c.current)&&c.current.focus()}),[c]),Object(l.jsx)(a.a.Fragment,{children:Object(l.jsxs)(C.a,{anchor:"top",open:t,onClose:function(){n(!1)},children:[Object(l.jsx)("p",{className:y.a.searchTitle,children:"Search anything!"}),Object(l.jsxs)("div",{className:y.a.overlaySearch,children:[Object(l.jsx)("div",{children:Object(l.jsx)("img",{alt:"icon",title:"Search",src:N})}),Object(l.jsx)("input",{ref:c,type:"text"}),Object(l.jsx)("div",{children:Object(l.jsx)("img",{onClick:function(){n(!1)},alt:"icon",title:"Search",src:k})})]})]})})};function P(){return Object(l.jsx)("header",{className:b.a.navbar,children:Object(l.jsxs)("div",{className:b.a.content,children:[Object(l.jsxs)("div",{className:b.a.groupSearch,children:[Object(l.jsx)(d,{userAvatar:h}),Object(l.jsx)(S,{})]}),Object(l.jsxs)("div",{className:b.a.groupNotification,children:[Object(l.jsx)(v,{icon:p}),Object(l.jsx)(v,{icon:x}),Object(l.jsx)(d,{})]})]})})}function F(e){var t=e.children;return Object(l.jsxs)("div",{children:[Object(l.jsx)(P,{}),t]})}var E=n(4),B=n(65),R=n.n(B),q=n(11),A=n(26),L=n.n(A),U=n.p+"static/media/reaction.7d741b0d.svg",D={dev:"/api"};function M(e){var t=e.path;return D.dev+t.substring(t.indexOf("public/")+6)}var T=n(14),W=n.n(T),z=n(27),G=n(49),V=n.n(G),J={registerNewUser:function(e){return Object(z.a)(W.a.mark((function t(){var n;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(D.dev,"/user/signup"),H("POST",{user:e})).then((function(e){return e.json()}));case 3:if(!(n=t.sent).status){t.next=6;break}return t.abrupt("return",n);case 6:throw new Error;case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",{err:"bad request"});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},loginExistingUser:function(e){return Object(z.a)(W.a.mark((function t(){var n;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(D.dev,"/user/login"),H("POST",{user:e})).then((function(e){return e.json()}));case 3:if(!(n=t.sent).status){t.next=6;break}return t.abrupt("return",n);case 6:throw new Error;case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",{err:"bad request from client"});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},loginFacebook:function(e){return Object(z.a)(W.a.mark((function t(){var n;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(D.dev,"/user/fblogin"),H("POST",{user:e})).then((function(e){return e.json()}));case 3:if(!(n=t.sent).status){t.next=6;break}return t.abrupt("return",n);case 6:throw new Error;case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",{err:"bad request"});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},makePost:function(e){return Object(z.a)(W.a.mark((function t(){var n;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V()({method:"post",url:"http://localhost:4000/post/newpost",data:e,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data})).catch((function(e){console.log(e)}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))()},getLatestPost:function(){return Object(z.a)(W.a.mark((function e(){var t;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.a.get("".concat(D.dev,"/post/latest")).then((function(e){return e.data}));case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{err:"bad request! no post."});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},getUserById:function(e){return Object(z.a)(W.a.mark((function t(){return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.abrupt("return",fetch("".concat(D.dev,"/user/information/").concat(e)).then((function(e){return e.json()})));case 4:return t.prev=4,t.t0=t.catch(0),t.abrupt("return",{err:t.t0.message});case 7:case"end":return t.stop()}}),t,null,[[0,4]])})))()}},H=function(e,t){return{method:e,mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}},X=J;function Y(e){var t,n=e.data,r=a.a.useState(null),c=Object(g.a)(r,2),s=c[0],i=c[1];return a.a.useEffect((function(){n&&i((function(e){return Object(q.a)(Object(q.a)(Object(q.a)({},e),n),{},{media:JSON.parse(n.media)})}))}),[n]),a.a.useEffect((function(){(null===s||void 0===s?void 0:s.userid)&&X.getUserById(s.userid).then((function(e){i((function(t){return Object(q.a)(Object(q.a)({},t),e.rows[0])}))}))}),[s]),s?Object(l.jsxs)("div",{className:L.a.container,tabIndex:"1",children:[Object(l.jsxs)("div",{className:L.a.userInfor,children:[Object(l.jsx)(d,{userAvatar:u,size:"medium"}),Object(l.jsxs)("div",{className:L.a.postInfor,children:[Object(l.jsx)("p",{children:(null===s||void 0===s?void 0:s.userfullname)||""}),Object(l.jsx)("p",{children:n.datecreated})]})]}),Object(l.jsxs)("div",{className:L.a.postContent,children:[Object(l.jsx)("p",{children:n.content}),(null===s||void 0===s||null===(t=s.media)||void 0===t?void 0:t.length)?Object(l.jsx)("div",{className:L.a.postMedia,style:{backgroundImage:'url("'.concat(M(s.media[0]),'")')}}):Object(l.jsx)(l.Fragment,{})]}),Object(l.jsxs)("div",{className:L.a.like_comment,children:[Object(l.jsx)(d,{userAvatar:U}),Object(l.jsx)("div",{}),Object(l.jsxs)("p",{children:[n.commentcount," comments"]})]})]}):Object(l.jsx)(l.Fragment,{})}function Q(e){var t=e.posts;return Object(l.jsx)("div",{children:t.map((function(e,t){return Object(l.jsx)(Y,{data:e},"post-id-"+t)}))})}var K=n(33),Z=n.n(K),$=n.p+"static/media/picture.b0c992ca.svg",ee=n.p+"static/media/video.f3b3fb0e.svg",te=n(20),ne=n.n(te),re=n(71),ae=n(66);var ce=n(21);function se(e){var t=e.value,n=e.setValue;return Object(l.jsx)("div",{className:ne.a.editorWrapper,children:Object(l.jsx)("textarea",{value:t,onChange:function(e){n(e.target.value)}})})}function ie(e){var t=e.files,n=e.handleFiles,r=function(e){return function(){n((function(t){return t.filter((function(t,n){return e!==n}))}))}};return Object(l.jsx)("div",{className:ne.a.fileViewerWrapper,children:t.map((function(e,t){return Object(l.jsx)(oe,{onDelete:r(t),index:t+1,file:e})}))})}function oe(e){var t=e.file,n=e.index,a=e.onDelete,c=Object(r.useState)(""),s=Object(g.a)(c,2),i=s[0],o=s[1];return Object(r.useEffect)((function(){var e=new FileReader;e.addEventListener("load",(function(e){var t=e.target.result;o(t)}),[]),e.readAsDataURL(t)}),[t]),Object(l.jsxs)("div",{draggable:!0,style:Object(q.a)({backgroundImage:"url(".concat(i,")")},{backgroundPosition:"center",backgroundSize:"cover",display:"flex",alignItems:"flex-end",justifyContent:"space-between"}),children:[Object(l.jsx)(m.a,{badgeContent:n,color:"secondary",children:Object(l.jsx)("div",{style:{height:15,width:15}})}),Object(l.jsx)("button",{onClick:a,style:{backgroundColor:"var(--light-button)",color:"white"},className:"button",children:"delete"})]})}function ue(e){var t=e.onClose,n=a.a.useState(""),c=Object(g.a)(n,2),s=c[0],i=c[1],o=Object(ce.c)((function(e){return e.user.uid})),u=Object(r.useRef)(null),d=function(){var e=Object(r.useState)([]),t=Object(g.a)(e,2),n=t[0],a=t[1];return[n,function(e){var t,n=Object(ae.a)(e.target.files);try{var r=function(){var e=t.value;a((function(t){return[].concat(Object(re.a)(t),[e])}))};for(n.s();!(t=n.n()).done;)r()}catch(c){n.e(c)}finally{n.f()}},a]}(),j=Object(g.a)(d,3),b=j[0],p=j[1],h=j[2],f=Object(r.useState)(!1),O=Object(g.a)(f,2),v=O[0],x=O[1];return Object(l.jsxs)("div",{className:ne.a.container,children:[Object(l.jsx)("div",{className:ne.a.hiddenInput,children:Object(l.jsx)("input",{onChange:p,ref:u,type:"file",multiple:!0,accept:"image/png, image/gif, image/jpeg"})}),Object(l.jsx)("div",{title:"close editor",className:ne.a.overlay,onClick:function(e){t(),e.stopPropagation()}}),Object(l.jsxs)("div",{className:ne.a.editor,children:[Object(l.jsx)("div",{className:ne.a.userProfile,children:Object(l.jsx)("p",{children:v?"Edit file ("+b.length+")":"Write post"})}),v?Object(l.jsx)(ie,{files:b,handleFiles:h}):Object(l.jsx)(se,{value:s,setValue:i}),Object(l.jsxs)("div",{className:ne.a.groupButton,children:[Object(l.jsx)("button",{className:"button",onClick:function(){u.current.click()},children:"add media"}),Object(l.jsx)(m.a,{invisible:v,badgeContent:b.length||0,color:"secondary",children:Object(l.jsxs)("button",{className:"button",onClick:function(){x((function(e){return!e}))},children:["view ",v?"post":"media"]})}),Object(l.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:Object(l.jsx)("button",{className:"button bg-pink",onClick:function(){if(o&&s.trim().length){var e=new FormData;e.append("content",s),e.append("count",b.length),e.append("uid",o),b.forEach((function(t,n){e.append("uploads",t)})),X.makePost(e).then((function(e){console.log(e)}))}else alert("check your post again!")},children:"post"})}),Object(l.jsx)("button",{className:"button",onClick:function(e){t()},children:"cancel"})]})]})]})}var le=n.p+"static/media/checkin.b8d0c75f.svg";function de(){var e=Object(r.useState)(!1),t=Object(g.a)(e,2),n=t[0],a=t[1];return Object(l.jsxs)("div",{className:Z.a.container,children:[n&&Object(l.jsx)(ue,{onClose:function(){a(!1)}}),Object(l.jsx)("div",{className:Z.a.CheckInItem,children:Object(l.jsx)(d,{size:"large"})}),Object(l.jsxs)("div",{className:Z.a.CheckInStatus,children:[Object(l.jsx)("div",{className:Z.a.CheckinForm,children:Object(l.jsx)("button",{onClick:function(){a(!0)},children:"What's in your mind!"})}),Object(l.jsxs)("div",{className:Z.a.CheckinButton,children:[Object(l.jsxs)("button",{onClick:function(){a(!0)},children:[Object(l.jsx)(d,{userAvatar:$}),Object(l.jsx)("p",{children:"Media"})]}),Object(l.jsxs)("button",{children:[Object(l.jsx)(d,{userAvatar:ee}),Object(l.jsx)("p",{children:"Live"})]}),Object(l.jsxs)("button",{children:[Object(l.jsx)(d,{userAvatar:le}),Object(l.jsx)("p",{children:"Checkin! "})]})]})]})]})}var je=[{name:"home",path:"/",Component:function(){var e=Object(r.useState)([]),t=Object(g.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){X.getLatestPost().then((function(e){e.err||a(e.rows)}))}),[]),Object(l.jsxs)("div",{className:R.a.container,children:[Object(l.jsx)(de,{}),Object(l.jsx)(Q,{posts:n})]})}},{name:"user",path:"/user",Component:function(){return Object(l.jsx)("h1",{children:"user"})}},{name:"post",path:"/post",Component:function(){return Object(l.jsx)("h1",{children:"post page"})}}];n(67);var be=function(){return Object(l.jsx)(F,{children:Object(l.jsx)(E.c,{children:je.map((function(e){var t=e.path,n=e.name,r=e.Component;return Object(l.jsxs)(E.a,{exact:!0,path:t,children:[" ",Object(l.jsx)(r,{})]},n)}))})})},pe=n(41),he=n(23),fe=n.n(he),me=n(68),Oe=n.n(me),ve={logInUser:"user/LogInUser",logOutUser:"user/LogOutUser"};function xe(e){return function(t){var n=e.user,r=n.uid,a=n.userFullName,c=n.userDisplayName,s=n.picture;t({type:ve.logInUser,payload:{loggedIn:!0,uid:r,displayName:c,profileImage:s,fullName:a}})}}function ge(){var e=Object(r.useState)(!0),t=Object(g.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)((function(){return{username:"",password:"",userDisplayName:"",userFullName:"",dateOfBirth:"",dateCreatedAccount:(new Date).toISOString().substring(0,10),email:"",phone:"",gender:""}})),s=Object(g.a)(c,2),i=s[0],o=s[1],u=Object(ce.b)(),d=function(e){return function(t){var n=t.target.value;"username"!==e&&"password"!==e||(" "===n[n.length-1]&&alert("kh\xf4ng \u0111\u01b0\u1ee3c c\xf3 kho\u1ea3ng c\xe1ch"),n=n.trim()),o((function(t){return Object(q.a)(Object(q.a)({},t),{},Object(pe.a)({},e,n))}))}};return Object(l.jsx)("div",{className:fe.a.container,children:Object(l.jsxs)("div",{className:fe.a.Form,children:[n?Object(l.jsx)(ye,{handleLogin:function(e){e.preventDefault();var t=i.username,n=i.password;X.loginExistingUser({username:t,password:n}).then((function(e){e.err||u(xe(e))}))},user:i,handleChange:d}):Object(l.jsx)(_e,{handleRegister:function(e){e.preventDefault(),X.registerNewUser(i).then((function(e){e.err||u(xe(e))}))},user:i,handleChange:d}),Object(l.jsx)("p",{children:n?"Don't have account?":"Account already exists?"}),Object(l.jsxs)("div",{className:fe.a.Suggest,children:[Object(l.jsx)("button",{onClick:function(){a((function(e){return!e}))},children:n?"Register":"Login"}),Object(l.jsx)("span",{children:"or"}),Object(l.jsx)(Oe.a,{appId:"142129044562039",redirectUri:"google.com",cssClass:"facebook-login-icon",autoLoad:!1,fields:"name,email,picture",onClick:function(){console.log("clicked")},callback:function(e){console.log(e)}})]})]})})}var _e=function(e){var t=e.user,n=e.handleChange,r=e.handleRegister;return Object(l.jsxs)("form",{onSubmit:r,className:fe.a.MainForm,children:[[{name:"Username",type:"text",placeholder:"login account",isRequired:!0,key:"username"},{name:"Password",type:"password",placeholder:"secure password",isRequired:!0,key:"password"},{name:"Full name",type:"text",placeholder:"your full name",isRequired:!0,key:"userFullName"},{name:"Display name",type:"text",placeholder:"your display name",isRequired:!0,key:"userDisplayName"},{name:"Gender",type:"text",placeholder:"what is your gender",isRequired:!0,key:"gender"},{name:"Email",type:"email",placeholder:"your backup email",isRequired:!0,key:"email"},{name:"Phone",type:"text",placeholder:"your phone number",isRequired:!0,key:"phone"},{name:"Date of birth",type:"date",placeholder:"",isRequired:!0,key:"dateOfBirth"}].map((function(e,r){return Object(l.jsxs)("div",{className:fe.a.groupForm,children:[Object(l.jsx)("label",{children:e.name}),Object(l.jsx)("input",{type:e.type,value:t[e.key],onChange:n(e.key),placeholder:e.placeholder,required:e.isRequired})]},"register-id-"+r)})),Object(l.jsx)("button",{type:"submit",children:"Create Account"})]})},ye=function(e){var t=e.user,n=e.handleChange,r=e.handleLogin;return Object(l.jsxs)("form",{onSubmit:r,className:fe.a.MainForm,children:[[{name:"Username",type:"text",placeholder:"login account",isRequired:!0,key:"username"},{name:"Password",type:"password",placeholder:"secure password",isRequired:!0,key:"password"}].map((function(e,r){return Object(l.jsxs)("div",{className:fe.a.groupForm,children:[Object(l.jsx)("label",{children:e.name}),Object(l.jsx)("input",{type:e.type,value:t[e.key],onChange:n(e.key),placeholder:e.placeholder,required:e.isRequired})]},"login-id-"+r)})),Object(l.jsx)("button",{type:"submit",children:"Login"})]})},ke=n(47);var Ne=n(30),Ce=n(69),we={loggedIn:!1,uid:null,displayName:null,profileImage:null,fullName:null},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;return t.type===ve.logInUser?Object(q.a)(Object(q.a)({},e),t.payload):t.type===ve.logOutUser?Object(q.a)({},we):e},Ie=Object(Ne.combineReducers)({user:Se}),Pe=[n(70).a],Fe=Object(Ne.createStore)(Ie,Object(Ce.composeWithDevTools)(Ne.applyMiddleware.apply(void 0,Pe))),Ee=(n(103),function(){var e=function(){var e=Object(r.useState)(null),t=Object(g.a)(e,2),n=t[0],a=t[1],c=Object(ce.c)((function(e){return e.user.loggedIn}));return Object(r.useEffect)((function(){a(c)}),[c]),n}();return null!==e?!0===e?Object(l.jsx)(be,{}):Object(l.jsx)(ge,{}):Object(l.jsx)(l.Fragment,{})});s.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(ce.a,{store:Fe,children:Object(l.jsx)(ke.a,{children:Object(l.jsx)(Ee,{})})})}),document.getElementById("root"))},20:function(e,t,n){e.exports={container:"PostEdit_container__1cABj",overlay:"PostEdit_overlay__3nG28",editor:"PostEdit_editor__3GTHV",editorWrapper:"PostEdit_editorWrapper__1BXqX",fileViewerWrapper:"PostEdit_fileViewerWrapper__GXxpg",groupButton:"PostEdit_groupButton__1zwPx",hiddenInput:"PostEdit_hiddenInput__31IVS"}},23:function(e,t,n){e.exports={container:"LoginPage_container__2iffR",Form:"LoginPage_Form__1MiFU",MainForm:"LoginPage_MainForm__1w3oE",Suggest:"LoginPage_Suggest__2T50A",groupForm:"LoginPage_groupForm__3B-v9"}},26:function(e,t,n){e.exports={container:"Post_container__705-l",userInfor:"Post_userInfor__3TsEz",postInfor:"Post_postInfor__2u5Dy",postContent:"Post_postContent__1O4Rf",postMedia:"Post_postMedia__1d6sf",like_comment:"Post_like_comment__D8NQK"}},32:function(e,t,n){e.exports={small:"Avatar_small__1S5ft",medium:"Avatar_medium__2Wn88",large:"Avatar_large__16sur",avatar:"Avatar_avatar__2GRnH"}},33:function(e,t,n){e.exports={container:"CheckIn_container__lONDU",CheckInStatus:"CheckIn_CheckInStatus__1Sa0w",CheckInItem:"CheckIn_CheckInItem__1mM14",CheckinForm:"CheckIn_CheckinForm__2Yoyx",CheckinButton:"CheckIn_CheckinButton__3Itp0"}},37:function(e,t,n){e.exports={groupNotification:"Navbar_groupNotification__3NmGa",navbar:"Navbar_navbar__3HLis",content:"Navbar_content__j5B0b",groupSearch:"Navbar_groupSearch__dY8E7"}},44:function(e,t,n){e.exports={searchBox:"SearchBox_searchBox__1sNLE",overlaySearch:"SearchBox_overlaySearch__lq-N2",searchTitle:"SearchBox_searchTitle__nYQG3"}},65:function(e,t,n){e.exports={container:"HomePage_container__2EfJt"}},67:function(e,t,n){e.exports={container:"ChatBubble_container__3S5sJ"}}},[[104,1,2]]]);
//# sourceMappingURL=main.90b6a93b.chunk.js.map